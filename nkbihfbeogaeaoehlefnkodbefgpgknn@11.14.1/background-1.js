LavaPack.loadBundle([[1487,{"./constants":1482,"@ethereumjs/util":394,"@metamask/ethjs-unit":1224,"@metamask/utils":1886,"bn.js":2474,buffer:2522,"eth-ens-namehash":2721,"fast-deep-equal":2837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const s=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),u=i(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function p(e){return e?new l.default((0,o.remove0x)(e),16):new l.default(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new l.default(t),i=new l.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new l.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new l.default(1))),s},r.weiHexToGweiDec=function(e){const t=new l.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=p,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new l.default(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${l.default.isBN(e)?e.toString(16):new l.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,s.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,s.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/phishing-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[149,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:61,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[1498,{"readable-stream":1519},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BasePostMessageStream=void 0;const n=e("readable-stream"),i=()=>undefined,s="SYN",a="ACK";class o extends n.Duplex{constructor(){super({objectMode:!0}),this._init=!1,this._haveSyn=!1,this._log=()=>null}_handshake(){this._write(s,null,i),this.cork()}_onData(e){if(this._init)try{this.push(e),this._log(e,!1)}catch(e){this.emit("error",e)}else e===s?(this._haveSyn=!0,this._write(a,null,i)):e===a&&(this._init=!0,this._haveSyn||this._write(a,null,i),this.uncork())}_read(){return undefined}_write(e,t,r){e!==a&&e!==s&&this._log(e,!0),this._postMessage(e),r()}_setLogger(e){this._log=e}}r.BasePostMessageStream=o}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/BasePostMessageStream.js"}],[1499,{"../BasePostMessageStream":1498,"../utils":1503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebWorkerParentPostMessageStream=void 0;const n=e("../BasePostMessageStream"),i=e("../utils");class s extends n.BasePostMessageStream{constructor({worker:e}){super(),this._target=i.DEDICATED_WORKER_NAME,this._worker=e,this._worker.onmessage=this._onMessage.bind(this),this._handshake()}_postMessage(e){this._worker.postMessage({target:this._target,data:e})}_onMessage(e){const t=e.data;(0,i.isValidStreamMessage)(t)&&this._onData(t.data)}_destroy(){this._worker.onmessage=null,this._worker=null}}r.WebWorkerParentPostMessageStream=s}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerParentPostMessageStream.js"}],[15,{"../../../../shared/constants/permissions":4036,nanoid:3472},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionBackgroundApiMethods=function(e){return{addPermittedAccount:(t,r)=>{const n=e.getCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts);n.value.includes(r)||e.updateCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts,[...n.value,r])},addMorePermittedAccounts:(t,r)=>{const n=e.getCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts);e.updateCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts,[...n.value,...r])},removePermittedAccount:(t,r)=>{const n=e.getCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts);if(!n.value.includes(r))return;const i=n.value.filter((e=>e!==r));0===i.length?e.revokePermission(t,s.RestrictedMethods.eth_accounts):e.updateCaveat(t,s.RestrictedMethods.eth_accounts,s.CaveatTypes.restrictReturnedAccounts,i)},requestAccountsPermissionWithId:async t=>{const r=(0,i.default)();return e.requestPermissions({origin:t},{eth_accounts:{}},{id:r}),r}}};var n,i=(n=e("nanoid"))&&n.__esModule?n:{default:n},s=e("../../../../shared/constants/permissions")}}},{package:"$root$",file:"app/scripts/controllers/permissions/background-api.js"}],[150,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:62,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[1500,{"../BasePostMessageStream":1498,"../utils":1503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebWorkerPostMessageStream=void 0;const n=e("../BasePostMessageStream"),i=e("../utils");class s extends n.BasePostMessageStream{constructor(){if("undefined"==typeof self||"undefined"==typeof WorkerGlobalScope)throw new Error("WorkerGlobalScope not found. This class should only be instantiated in a WebWorker.");super(),this._name=i.DEDICATED_WORKER_NAME,self.addEventListener("message",this._onMessage.bind(this)),this._handshake()}_postMessage(e){self.postMessage({data:e})}_onMessage(e){const t=e.data;(0,i.isValidStreamMessage)(t)&&t.target===this._name&&this._onData(t.data)}_destroy(){return undefined}}r.WebWorkerPostMessageStream=s}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/WebWorker/WebWorkerPostMessageStream.js"}],[1501,{"./BasePostMessageStream":1498,"./WebWorker/WebWorkerParentPostMessageStream":1499,"./WebWorker/WebWorkerPostMessageStream":1500,"./runtime/BrowserRuntimePostMessageStream":1502,"./window/WindowPostMessageStream":1504},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./window/WindowPostMessageStream"),r),i(e("./WebWorker/WebWorkerPostMessageStream"),r),i(e("./WebWorker/WebWorkerParentPostMessageStream"),r),i(e("./runtime/BrowserRuntimePostMessageStream"),r),i(e("./BasePostMessageStream"),r)}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/browser.js"}],[1502,{"../BasePostMessageStream":1498,"../utils":1503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.BrowserRuntimePostMessageStream=void 0;const o=e("../BasePostMessageStream"),l=e("../utils");class c extends o.BasePostMessageStream{constructor({name:e,target:t}){super(),n.set(this,void 0),i.set(this,void 0),s(this,n,e,"f"),s(this,i,t,"f"),this._onMessage=this._onMessage.bind(this),this._getRuntime().onMessage.addListener(this._onMessage),this._handshake()}_postMessage(e){this._getRuntime().sendMessage({target:a(this,i,"f"),data:e})}_onMessage(e){(0,l.isValidStreamMessage)(e)&&e.target===a(this,n,"f")&&this._onData(e.data)}_getRuntime(){var e,t;if("chrome"in globalThis&&"function"==typeof(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.sendMessage))return chrome.runtime;if("browser"in globalThis&&"function"==typeof(null===(t=null===browser||void 0===browser?void 0:browser.runtime)||void 0===t?void 0:t.sendMessage))return browser.runtime;throw new Error("browser.runtime.sendMessage is not a function. This class should only be instantiated in a web extension.")}_destroy(){this._getRuntime().onMessage.removeListener(this._onMessage)}}r.BrowserRuntimePostMessageStream=c,n=new WeakMap,i=new WeakMap}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/runtime/BrowserRuntimePostMessageStream.js"}],[1503,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isValidStreamMessage=r.DEDICATED_WORKER_NAME=void 0;const n=e("@metamask/utils");r.DEDICATED_WORKER_NAME="dedicatedWorker",r.isValidStreamMessage=function(e){return(0,n.isObject)(e)&&Boolean(e.data)&&("number"==typeof e.data||"object"==typeof e.data||"string"==typeof e.data)}}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/utils.js"}],[1504,{"../BasePostMessageStream":1498,"../utils":1503,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.WindowPostMessageStream=void 0;const s=e("@metamask/utils"),a=e("../BasePostMessageStream"),o=e("../utils"),l=null===(n=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"source"))||void 0===n?void 0:n.get;(0,s.assert)(l,"MessageEvent.prototype.source getter is not defined.");const c=null===(i=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"origin"))||void 0===i?void 0:i.get;(0,s.assert)(c,"MessageEvent.prototype.origin getter is not defined.");class u extends a.BasePostMessageStream{constructor({name:e,target:t,targetOrigin:r=location.origin,targetWindow:n=window}){if(super(),"undefined"==typeof window||"function"!=typeof window.postMessage)throw new Error("window.postMessage is not a function. This class should only be instantiated in a Window.");this._name=e,this._target=t,this._targetOrigin=r,this._targetWindow=n,this._onMessage=this._onMessage.bind(this),window.addEventListener("message",this._onMessage,!1),this._handshake()}_postMessage(e){this._targetWindow.postMessage({target:this._target,data:e},this._targetOrigin)}_onMessage(e){const t=e.data;"*"!==this._targetOrigin&&c.call(e)!==this._targetOrigin||l.call(e)!==this._targetWindow||!(0,o.isValidStreamMessage)(t)||t.target!==this._name||this._onData(t.data)}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}r.WindowPostMessageStream=u}}},{package:"@metamask/post-message-stream",file:"node_modules/@metamask/post-message-stream/dist/window/WindowPostMessageStream.js"}],[1505,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,o;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var l=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(s(t,"type"))}return o+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/errors-browser.js"}],[1506,{"./_stream_readable":1508,"./_stream_writable":1510,_process:3530,inherits:3130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(c,i);for(var a=n(s.prototype),o=0;o<a.length;o++){var l=a[o];c.prototype[l]||(c.prototype[l]=s.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[1507,{"./_stream_transform":1509,inherits:3130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1508,{"../errors":1505,"./_stream_duplex":1506,"./internal/streams/async_iterator":1511,"./internal/streams/buffer_list":1512,"./internal/streams/destroy":1513,"./internal/streams/from":1515,"./internal/streams/state":1517,"./internal/streams/stream":1518,_process:3530,buffer:2522,events:2809,inherits:3130,"string_decoder/":3900,util:2487},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=E,E.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,o=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=e("util");l=c&&c.debuglog?c.debuglog("stream"):function(){};var u,d,h,p=e("./internal/streams/buffer_list"),f=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,v=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,s);var y=f.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=e("string_decoder/").StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function E(t){if(n=n||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function T(e,t,r,n,i){l("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?j(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(s=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof o||"string"==typeof t||t===undefined||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),s)y(e,s);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)c.endEmitted?y(e,new b):C(e,c,t,!0);else if(c.ended)y(e,new _);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?C(e,c,t,!1):N(e,c)):C(e,c,t,!1)}else n||(c.reading=!1,N(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&j(e)),N(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},E.prototype.unshift=function(e){return T(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){u||(u=e("string_decoder/").StringDecoder);var r=new u(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var P=1073741824;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function j(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(A,e))}function A(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function N(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){l("readable nexttick read 0"),e.read(0)}function x(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(W,t,e))}function W(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):j(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){y(this,new w("_read()"))},E.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,l("pipe count=%d opts=%j",s.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function o(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",o),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}s.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",o);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",u);var d=!1;function h(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==U(s.pipes,e))&&!d&&(l("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function p(t){l("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&y(e,t)}function f(){e.removeListener("finish",m),g()}function m(){l("onfinish"),e.removeListener("close",f),g()}function g(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",f),e.once("finish",m),e.emit("pipe",n),s.flowing||(l("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?j(this):i.reading||r.nextTick(I,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(O,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(O,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(x,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<k.length;s++)e.on(k[s],this.emit.bind(this,k[s]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=D,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(E,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[1509,{"../errors":1505,"./_stream_duplex":1506,inherits:3130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=u;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[151,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:63,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,n,i,s,a,o,l;const c=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,u=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};c&&Object.keys(c).forEach((e=>{Object.keys(c[e]).forEach((t=>{const r=c[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountHiddenTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.accountTokens,null==e||null===(s=e.PreferencesController)||void 0===s||delete s.assetImages,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.hiddenTokens,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.tokens,null==e||null===(l=e.PreferencesController)||void 0===l||delete l.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[1510,{"../errors":1505,"./_stream_duplex":1506,"./internal/streams/destroy":1513,"./internal/streams/state":1517,"./internal/streams/stream":1518,_process:3530,buffer:2522,inherits:3130,"util-deprecate":3965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=E,E.WritableState=S;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),o=e("buffer").Buffer,l=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,u=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,p=h.ERR_INVALID_ARG_TYPE,f=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,b=h.ERR_UNKNOWN_ENCODING,y=u.errorOrDestroy;function k(){}function S(t,s,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=s instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(A,e,t),e._writableState.errorEmitted=!0,y(e,i)):(s(i),e._writableState.errorEmitted=!0,y(e,i),A(e,t))}(e,n,i,t,s);else{var a=M(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||P(e,n),i?r.nextTick(C,e,n,a,s):C(e,n,a,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function E(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(E,this))return new E(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function T(e,t,r,n,i,s,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function C(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),A(e,t)}function P(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,l=!0;r;)s[o]=r,r.isBuf||(l=!1),r=r.next,o+=1;s.allBuffers=l,T(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,d=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function j(e,t){e._final((function(r){t.pendingcb--,r&&y(e,r),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=M(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(j,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(E,a),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===E&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},E.prototype.pipe=function(){y(this,new g)},E.prototype.write=function(e,t,n){var i,s=this._writableState,a=!1,c=!s.objectMode&&(i=e,o.isBuffer(i)||i instanceof l);return c&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=k),s.ending?function(e,t){var n=new w;y(e,n),r.nextTick(t,n)}(this,n):(c||function(e,t,n,i){var s;return null===n?s=new _:"string"==typeof n||t.objectMode||(s=new p("chunk",["string","Buffer"],n)),!s||(y(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,a=function(e,t,r,n,i,s){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,l,n,i,s);return c}(this,s,c,e,t,n)),a},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||P(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=u.destroy,E.prototype._undestroy=u.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[1511,{"./end-of-stream":1514,_process:3530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[a]=null,e[o]=null,t(p(r,!1)))}}function m(e){r.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(p(undefined,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(p(undefined,!0)):t[d](r,n)}),n)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(p(s,!1));n=new Promise(this[d])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(p(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[h].read();n?(r[u]=null,r[a]=null,r[o]=null,e(p(n,!1))):(r[a]=e,r[o]=t)},writable:!0}),t));return r[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[u]=null,r[a]=null,r[o]=null,t(e)),void(r[l]=e)}var n=r[a];null!==n&&(r[u]=null,r[a]=null,r[o]=null,n(p(undefined,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[1512,{buffer:2522,util:2487},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=e("buffer").Buffer,c=e("util").inspect,u=c&&c.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,r,n,i=l.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,l.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return c(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1513,{_process:3530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var a=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):s?(e.nextTick(n,a),s(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1514,{"../../../errors":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var a=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){o=!1,c=!0,a||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||s.call(t)},p=function(e){s.call(t,e)},f=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1515,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[1516,{"../../../errors":1505,"./end-of-stream":1514},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var h=r.map((function(t,i){var s=i<r.length-1;return function(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var l=!1;return function(e){if(!o&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}(t,s,i>0,(function(e){u||(u=e),e&&h.forEach(l),s||(h.forEach(l),d(u))}))}));return r.reduce(c)}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1517,{"../../../errors":1505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[1518,{events:2809},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1519,{"./lib/_stream_duplex.js":1506,"./lib/_stream_passthrough.js":1507,"./lib/_stream_readable.js":1508,"./lib/_stream_transform.js":1509,"./lib/_stream_writable.js":1510,"./lib/internal/streams/end-of-stream.js":1514,"./lib/internal/streams/pipeline.js":1516},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/post-message-stream>readable-stream",file:"node_modules/@metamask/post-message-stream/node_modules/readable-stream/readable-browser.js"}],[152,{"@metamask/transaction-controller":1827,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");const s="sentEther";r.default={version:64,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,n.isPlainObject)(r))for(const e of Object.values(r))e.type===s&&(e.type=i.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===s&&(e.type=i.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1520,{"./ppom-controller":1521},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var n=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return n.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return n.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[1521,{"./ppom-storage":1522,"./util":1523,"@metamask/base-controller":1527,"@metamask/controller-utils":1529,"await-semaphore":2416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,a,o,l,c,u,d,h,p,f,m,g,v,_,w,b,y,k,S,E,T,C,P,M,j,A,N,R,O,I,x,L=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},D=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const B=e("@metamask/base-controller"),W=e("@metamask/controller-utils"),U=e("await-semaphore"),F=e("./ppom-storage"),H=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const G=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],$={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1},versionFileETag:{persist:!0,anonymous:!1}},q="PPOMController",V={headers:{"Content-Type":"application/json"}};class K extends B.BaseControllerV2{constructor({chainId:e,messenger:t,provider:r,storageBackend:_,securityAlertsEnabled:w,onPreferencesChange:b,ppomProvider:E,cdnBaseUrl:T,providerRequestLimit:C,state:P,blockaidPublicKey:M,nativeCrypto:j}){super({name:q,metadata:$,messenger:t,state:{versionInfo:P?.versionInfo??[],storageMetadata:P?.storageMetadata??[],versionFileETag:P?.versionFileETag??""}}),n.add(this),i.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),d.set(this,0),h.set(this,void 0),p.set(this,void 0),f.set(this,{}),m.set(this,void 0),g.set(this,!1),v.set(this,undefined),L(this,h,(0,H.addHexPrefix)(e),"f"),L(this,s,r,"f"),L(this,l,E,"f"),L(this,a,new F.PPOMStorage({storageBackend:_,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),L(this,o,new U.Mutex,"f"),L(this,c,T,"f"),L(this,u,C??300,"f"),L(this,p,w,"f"),L(this,m,M,"f"),L(this,v,j,"f"),b(D(this,n,"m",y).bind(this)),D(this,n,"m",k).call(this),D(this,n,"m",S).call(this)}async usePPOM(e){if(!D(this,p,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,H.blockaidValidationSupportedForNetwork)(D(this,h,"f")))throw Error(`Blockaid validation not available on network with chainId: ${D(this,h,"f")}`);return await D(this,o,"f").use((async()=>{await D(this,n,"m",T).call(this),L(this,d,0,"f"),L(this,f,{},"f");return{...await e(D(this,i,"f")),providerRequestsCount:{...D(this,f,"f")}}}))}}r.PPOMController=K,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,n=new WeakSet,_=async function(){if(D(this,p,"f")&&!D(this,g,"f")){const{ppomInit:e}=D(this,l,"f");await e("./ppom_bg.wasm"),L(this,g,!0,"f")}},w=function(){D(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[],e.versionFileETag=""})),D(this,a,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},b=function(e){const t=(0,H.addHexPrefix)(e.providerConfig.chainId);t!==D(this,h,"f")&&(L(this,h,t,"f"),D(this,n,"m",E).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},y=function(e){const t=e.securityAlertsEnabled;t!==D(this,p,"f")&&(L(this,p,t,"f"),t||D(this,n,"m",w).call(this))},k=function(){this.messagingSystem.registerActionHandler(`${q}:usePPOM`,this.usePPOM.bind(this))},S=function(){const e=D(this,n,"m",b).bind(this);this.messagingSystem.subscribe("NetworkController:stateChange",e)},E=async function(){await D(this,o,"f").use((async()=>{D(this,i,"f")&&(D(this,i,"f").free(),L(this,i,undefined,"f"))}))},T=async function(){const e=await D(this,n,"m",C).call(this);(D(this,i,"f")===undefined||e)&&(L(this,i,await D(this,n,"m",x).call(this),"f"),D(this,a,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)})))},C=async function(){const e=await D(this,n,"m",R).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},P=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},M=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await D(this,n,"m",j).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},j=async function(e){const{storageMetadata:t}=this.state;if(D(this,n,"m",P).call(this,t,e))try{return await D(this,a,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,H.checkFilePath)(e.filePath);const r=(0,H.constructURLHref)(D(this,c,"f"),e.filePath),i=await D(this,n,"m",O).call(this,r);return await(0,H.validateSignature)(i,e.hashSignature,D(this,m,"f"),e.filePath,D(this,v,"f")),await D(this,a,"f").writeFile({data:i,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),i},A=async function(e,t={},r="GET"){const n=await(0,W.safelyExecute)((async()=>(0,W.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0);if(200!==n?.status)throw new Error(`Failed to fetch file with url: ${e}`);return n},N=async function(e){const t=await D(this,n,"m",A).call(this,e,{headers:V},"HEAD"),{versionFileETag:r}=this.state;return t.headers.get("ETag")!==r&&(this.update((e=>{e.versionFileETag=t.headers.get("ETag")})),!0)},R=async function(){const e=(0,H.constructURLHref)(D(this,c,"f"),"ppom_version.json");if(!await D(this,n,"m",N).call(this,e)&&this.state.versionInfo?.length)return undefined;return(await D(this,n,"m",A).call(this,e,{headers:V})).json()},O=async function(e){const t=await D(this,n,"m",A).call(this,e);return await t.arrayBuffer()},I=async function(e,t){return new Promise((r=>{D(this,d,"f")>D(this,u,"f")?r(H.PROVIDER_ERRORS.limitExceeded()):(L(this,d,D(this,d,"f")+1,"f"),G.includes(e)?(D(this,f,"f")[e]=D(this,f,"f")[e]?Number(D(this,f,"f")[e])+1:1,D(this,s,"f").sendAsync((0,H.createPayload)(e,t),((e,t)=>{r(e?{jsonrpc:"2.0",id:(0,H.IdGenerator)(),error:e}:t)}))):r(H.PROVIDER_ERRORS.methodNotSupported()))}))},x=async function(){await D(this,n,"m",_).call(this);const e=this.state.versionInfo.filter((({chainId:e})=>e===D(this,h,"f")));if(e?.length===undefined||0===e?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${D(this,h,"f")}`);const t=await D(this,n,"m",M).call(this,e);if(t?.length!==e?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${D(this,h,"f")}`);D(this,i,"f")&&D(this,i,"f").free();const{PPOM:r}=D(this,l,"f");return r.new(D(this,n,"m",I).bind(this),t)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1522,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),a(this,n,e,"f"),a(this,i,t,"f"),a(this,s,r,"f")}async syncMetadata(e){const t=o(this,i,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const a=await o(this,n,"f").dir();for(const{name:e,chainId:t}of a)r.find((r=>r.name===e&&r.chainId===t))||await o(this,n,"f").delete({name:e,chainId:t});return o(this,s,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await o(this,n,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=o(this,i,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const s=await o(this,n,"f").read({name:e,chainId:t},r.checksum);if(!s)throw new Error(`Storage File (${e}, ${t}) not found`);return s}async writeFile({data:e,name:t,chainId:r,version:a,checksum:l}){await o(this,n,"f").write({name:t,chainId:r},e,l);const c=o(this,i,"f").call(this),u=c.find((e=>e.name===t&&e.chainId===r));u?(u.version=a,u.checksum=l):c.push({name:t,chainId:r,version:a,checksum:l}),o(this,s,"f").call(this,c)}},n=new WeakMap,i=new WeakMap,s=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1523,{buffer:2522,"crypto-js":2633,elliptic:2688,"json-rpc-random-id":3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const o=s(e("crypto-js")),l=a(e("elliptic")),c=a(e("json-rpc-random-id")),u=l.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,c.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,i,s,a)=>{const l=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,o.SHA256)(o.default.lib.WordArray.create(e)).toString()})(e,s,a);if(!new u("ed25519").keyFromPublic(n).verify(t.from(l),r))throw Error(`Signature verification failed for file path: ${i}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1524,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1525,{immer:3129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const a=s[r],o=e[i];return"function"==typeof a?n[i]=a(o):a&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1526,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1527,{"./BaseController":1524,"./BaseControllerV2":1525,"./ControllerMessenger":1526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/index.js"}],[1528,{"./types":1532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/constants.js"}],[1529,{"./constants":1528,"./siwe":1531,"./types":1532,"./util":1533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/index.js"}],[153,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:65,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[1530,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/logger.js"}],[1531,{"./logger":1530,"@metamask/utils":1886,"@spruceid/siwe-parser":2077,buffer:2522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),s=e("./logger"),a=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),s=t.from(i,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return a(t),e}var r}const l={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const s=new URL(n),a=(0,r.parseDomainParts)(i.parsedMessage.domain,s.protocol);return 0===a.hostname.localeCompare(s.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==s.port?""===s.port&&a.port===l[s.protocol]:""===a.username||a.username===s.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1532,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/types.js"}],[1533,{"./constants":1528,"@ethereumjs/util":394,"@metamask/ethjs-unit":1224,"@metamask/utils":1886,"bn.js":2474,buffer:2522,"eth-ens-namehash":2721,"fast-deep-equal":2837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const s=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),u=i(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function p(e){return e?new l.default((0,o.remove0x)(e),16):new l.default(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new l.default(t),i=new l.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new l.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new l.default(1))),s},r.weiHexToGweiDec=function(e){const t=new l.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=p,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new l.default(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${l.default.isBN(e)?e.toString(16):new l.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,s.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,s.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator>@metamask/controller-utils",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/controller-utils/dist/util.js"}],[1534,{"@metamask/json-rpc-engine":1551,"@metamask/rpc-errors":1562},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/json-rpc-engine"),i=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t})=>n.createAsyncMiddleware.call(void 0,(async(r,n,s)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(r),!t()||(a=r.method,!["eth_sendTransaction","wallet_watchAsset","wallet_switchEthereumChain","eth_signTypedData_v4","wallet_addEthereumChain","wallet_requestPermissions","wallet_requestSnaps","personal_sign","eth_sign","eth_requestAccounts"].includes(a)))return await s();var a;try{await e(r,s)}catch(e){n.error=i.serializeError.call(void 0,e)}}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-OVWSDI7B.js"}],[1535,{"./chunk-Z4BLTVTB.js":1536,"@metamask/base-controller":1543,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p,f=e("./chunk-Z4BLTVTB.js"),m=e("@metamask/base-controller"),g=e("@metamask/utils"),v="QueuedRequestController",_={enqueueRequest:`${v}:enqueueRequest`,getState:`${v}:getState`},w={networkSwitched:`${v}:networkSwitched`,stateChange:`${v}:stateChange`},b=class extends m.BaseController{constructor({messenger:e}){super({name:v,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),f.__privateAdd.call(void 0,this,a),f.__privateAdd.call(void 0,this,l),f.__privateAdd.call(void 0,this,u),f.__privateAdd.call(void 0,this,h),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,i,[]),f.__privateAdd.call(void 0,this,s,0),f.__privateMethod.call(void 0,this,a,o).call(this)}async enqueueRequest(e,t){void 0===f.__privateGet.call(void 0,this,n)&&f.__privateSet.call(void 0,this,n,e.origin);try{if(this.state.queuedRequestCount>0||f.__privateGet.call(void 0,this,n)!==e.origin){const{promise:t,reject:r,resolve:n}=g.createDeferredPromise.call(void 0,{suppressUnhandledRejection:!0});f.__privateGet.call(void 0,this,i).push({origin:e.origin,processRequest:e=>{e?r(e):n()}}),f.__privateMethod.call(void 0,this,h,p).call(this),await t}else"eth_requestAccounts"!==e.method&&await f.__privateMethod.call(void 0,this,u,d).call(this);f.__privateSet.call(void 0,this,s,f.__privateGet.call(void 0,this,s)+1);try{await t()}finally{f.__privateSet.call(void 0,this,s,f.__privateGet.call(void 0,this,s)-1)}return}finally{0===f.__privateGet.call(void 0,this,s)&&(f.__privateSet.call(void 0,this,n,void 0),f.__privateGet.call(void 0,this,i).length>0&&f.__privateMethod.call(void 0,this,l,c).call(this))}}};n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakSet,o=function(){this.messagingSystem.registerActionHandler(`${v}:enqueueRequest`,this.enqueueRequest.bind(this))},l=new WeakSet,c=async function(){const e=f.__privateGet.call(void 0,this,i).shift();f.__privateSet.call(void 0,this,n,e.origin);const t=[e.processRequest];for(;f.__privateGet.call(void 0,this,i)[0]?.origin===f.__privateGet.call(void 0,this,n);){const e=f.__privateGet.call(void 0,this,i).shift();t.push(e.processRequest)}let r;try{await f.__privateMethod.call(void 0,this,u,d).call(this)}catch(e){r=e}for(const e of t)e(r);f.__privateMethod.call(void 0,this,h,p).call(this)},u=new WeakSet,d=async function(){if(!f.__privateGet.call(void 0,this,n))throw new Error("Current batch origin must be initialized first");const e=this.messagingSystem.call("SelectedNetworkController:getNetworkClientIdForDomain",f.__privateGet.call(void 0,this,n)),{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},h=new WeakSet,p=function(){this.update((e=>{e.queuedRequestCount=f.__privateGet.call(void 0,this,i).length}))},r.controllerName=v,r.QueuedRequestControllerActionTypes=_,r.QueuedRequestControllerEventTypes=w,r.QueuedRequestController=b}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-UKCK5E7S.js"}],[1536,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/chunk-Z4BLTVTB.js"}],[1537,{"./chunk-OVWSDI7B.js":1534,"./chunk-UKCK5E7S.js":1535,"./chunk-Z4BLTVTB.js":1536},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-UKCK5E7S.js"),i=e("./chunk-OVWSDI7B.js");e("./chunk-Z4BLTVTB.js"),r.QueuedRequestController=n.QueuedRequestController,r.QueuedRequestControllerActionTypes=n.QueuedRequestControllerActionTypes,r.QueuedRequestControllerEventTypes=n.QueuedRequestControllerEventTypes,r.createQueuedRequestMiddleware=i.createQueuedRequestMiddleware}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.js"}],[1538,{"./chunk-Z4BLTVTB.js":1542,immer:3129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-Z4BLTVTB.js"),s=e("immer");s.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${String(i)}'`);const a=s[r],o=e[i];return"function"==typeof a?n[i]=a(o):a&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){i.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,i.__privateSet.call(void 0,this,n,s.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=s.produceWithPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);return i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=s.applyPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-DV5LNY3P.js"}],[1539,{"./chunk-UJFCPTF3.js":1541,"./chunk-Z4BLTVTB.js":1542},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,s,new Map),l.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,n).delete(e)}clearActions(){l.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,s).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=l.__privateGet.call(void 0,this,a).get(e),i=n(...t);i!==r&&(l.__privateGet.call(void 0,this,a).set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=l.__privateGet.call(void 0,this,i).get(e);if(n||(n=new Map,l.__privateGet.call(void 0,this,i).set(e,n)),n.set(t,r),r){const n=l.__privateGet.call(void 0,this,s).get(e);if(n){const e=r(...n());l.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,i).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,i).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[154,{"../../../shared/constants/hardware-wallets":4028,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?i.LedgerTransportTypes.webhid:i.LedgerTransportTypes.u2f,n=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),s={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:n?i.LedgerTransportTypes.live:r}};return delete s.PreferencesController.useLedgerLive,s}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[1540,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},i=n;r.BaseControllerV1=n,r.BaseControllerV1_default=i}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1541,{"./chunk-Z4BLTVTB.js":1542},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,a);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,u=function(e){const t=p.__privateGet.call(void 0,this,s);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,i)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateSet.call(void 0,this,n,e),p.__privateSet.call(void 0,this,i,t),p.__privateSet.call(void 0,this,s,r),p.__privateSet.call(void 0,this,a,l)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,c,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,n).subscribe(e,t,r):p.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1542,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1543,{"./chunk-DV5LNY3P.js":1538,"./chunk-G42723LG.js":1539,"./chunk-NINOM2XQ.js":1540,"./chunk-UJFCPTF3.js":1541,"./chunk-Z4BLTVTB.js":1542},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),i=e("./chunk-DV5LNY3P.js"),s=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=i.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=s.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=i.getAnonymizedState,r.getPersistentState=i.getPersistentState}}},{package:"@metamask/queued-request-controller>@metamask/base-controller",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1544,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createScaffoldMiddleware=function(e){return(t,r,n,i)=>{const s=e[t.method];return void 0===s?n():"function"==typeof s?s(t,r,n,i):(r.result=s,i())}}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-3AC2MIND.js"}],[1545,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAsyncMiddleware=function(e){return async(t,r,n,i)=>{let s;const a=new Promise((e=>{s=e}));let o=null,l=!1;const c=async()=>(l=!0,n((e=>{o=e,s()})),a);try{await e(t,r,c),l?(await a,o(null)):i(null)}catch(e){o?o(e):i(e)}}}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-ENMR2SJC.js"}],[1546,{"./chunk-IPW2SZMY.js":1547},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-IPW2SZMY.js");r.mergeMiddleware=function(e){const t=new(0,n.JsonRpcEngine);return e.forEach((e=>t.push(e))),t.asMiddleware()}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-I2BVUFWR.js"}],[1547,{"./chunk-Z4BLTVTB.js":1550,"@metamask/rpc-errors":1562,"@metamask/safe-event-emitter":1563,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p,f,m,g,v,_,w,b,y,k,S=e("./chunk-Z4BLTVTB.js"),E=e("@metamask/rpc-errors"),T=e("@metamask/safe-event-emitter"),C=(n=T)&&n.__esModule?n:{default:n},P=e("@metamask/utils"),M=class e extends C.default{constructor({notificationHandler:e}={}){super(),S.__privateAdd.call(void 0,this,o),S.__privateAdd.call(void 0,this,c),S.__privateAdd.call(void 0,this,d),S.__privateAdd.call(void 0,this,i,!1),S.__privateAdd.call(void 0,this,s,void 0),S.__privateAdd.call(void 0,this,a,void 0),S.__privateSet.call(void 0,this,s,[]),S.__privateSet.call(void 0,this,a,e)}destroy(){S.__privateGet.call(void 0,this,s).forEach((e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()})),S.__privateSet.call(void 0,this,s,[]),S.__privateSet.call(void 0,this,i,!0)}push(e){S.__privateMethod.call(void 0,this,o,l).call(this),S.__privateGet.call(void 0,this,s).push(e)}handle(e,t){if(S.__privateMethod.call(void 0,this,o,l).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?S.__privateMethod.call(void 0,this,c,u).call(this,e,t):S.__privateMethod.call(void 0,this,c,u).call(this,e):t?S.__privateMethod.call(void 0,this,d,h).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return S.__privateMethod.call(void 0,this,o,l).call(this),async(t,r,n,i)=>{var a,o;try{const[l,c,u]=await S.__privateMethod.call(void 0,a=e,m,g).call(a,t,r,S.__privateGet.call(void 0,this,s));return c?(await S.__privateMethod.call(void 0,o=e,w,b).call(o,u),i(l)):n((async t=>{var r;try{await S.__privateMethod.call(void 0,r=e,w,b).call(r,u)}catch(e){return t(e)}return t()}))}catch(e){return i(e)}}}async _promiseHandle(e){return new Promise(((t,r)=>{S.__privateMethod.call(void 0,this,d,h).call(this,e,((e,n)=>{e&&void 0===n?r(e):t(n)})).catch(r)}))}};i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=function(){if(S.__privateGet.call(void 0,this,i))throw new Error("This engine is destroyed and can no longer be used.")},c=new WeakSet,u=async function(e,t){try{if(0===e.length){const e=[{id:null,jsonrpc:"2.0",error:new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}const r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter((e=>void 0!==e));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},d=new WeakSet,h=async function(e,t){var r;if(!e||Array.isArray(e)||"object"!=typeof e){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new(0,E.JsonRpcError)(E.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return S.__privateGet.call(void 0,this,a)&&!P.isJsonRpcRequest.call(void 0,e)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(S.__privateGet.call(void 0,this,a)&&!P.isJsonRpcRequest.call(void 0,e)){try{await S.__privateGet.call(void 0,this,a).call(this,e)}catch(e){return t(e)}return t(null)}let n=null;const i={...e},o={id:i.id,jsonrpc:i.jsonrpc};try{await S.__privateMethod.call(void 0,r=M,p,f).call(r,i,o,S.__privateGet.call(void 0,this,s))}catch(e){n=e}return n&&(delete o.result,o.error||(o.error=E.serializeError.call(void 0,n))),t(n,o)},p=new WeakSet,f=async function(e,t,r){var n,i,s;const[a,o,l]=await S.__privateMethod.call(void 0,n=M,m,g).call(n,e,t,r);if(S.__privateMethod.call(void 0,i=M,y,k).call(i,e,t,o),await S.__privateMethod.call(void 0,s=M,w,b).call(s,l),a)throw a},m=new WeakSet,g=async function(e,t,r){var n;const i=[];let s=null,a=!1;for(const o of r)if([s,a]=await S.__privateMethod.call(void 0,n=M,v,_).call(n,e,t,o,i),a)break;return[s,a,i.reverse()]},v=new WeakSet,_=async function(e,t,r,n){return new Promise((i=>{const s=e=>{const r=e||t.error;r&&(t.error=E.serializeError.call(void 0,r)),i([r,!0])},a=r=>{t.error?s(t.error):(r&&("function"!=typeof r&&s(new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${A(e)}`,{request:e})),n.push(r)),i([null,!1]))};try{r(e,t,a,s)}catch(e){s(e)}}))},w=new WeakSet,b=async function(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))},y=new WeakSet,k=function(e,t,r){if(!P.hasProperty.call(void 0,t,"result")&&!P.hasProperty.call(void 0,t,"error"))throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${A(e)}`,{request:e});if(!r)throw new(0,E.JsonRpcError)(E.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${A(e)}`,{request:e})},S.__privateAdd.call(void 0,M,p),S.__privateAdd.call(void 0,M,m),S.__privateAdd.call(void 0,M,v),S.__privateAdd.call(void 0,M,w),S.__privateAdd.call(void 0,M,y);var j=M;function A(e){return JSON.stringify(e,null,2)}r.JsonRpcEngine=j}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-IPW2SZMY.js"}],[1548,{"./chunk-XDGWQHNY.js":1549},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-XDGWQHNY.js");r.createIdRemapMiddleware=function(){return(e,t,r,i)=>{const s=e.id,a=n.getUniqueId.call(void 0);e.id=a,t.id=a,r((r=>{e.id=s,t.id=s,r()}))}}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-PBQXMZM5.js"}],[1549,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=4294967295,i=Math.floor(Math.random()*n);r.getUniqueId=function(){return i=(i+1)%n}}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-XDGWQHNY.js"}],[155,{"../../../shared/constants/network":4033,"bignumber.js":2427,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),s=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new s.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,n;const i=(null==e?void 0:e.PreferencesController)||{},s=i.preferences||{};if(s.showTestNetworks)return e;const l=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},c=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},u=(null===(n=e.CachedBalancesController)||void 0===n?void 0:n.cachedBalances)||{},d=a.TEST_CHAINS.includes(null==c?void 0:c.chainId),h=Object.values(l).some((({chainId:e})=>a.TEST_CHAINS.includes(e))),p=a.TEST_CHAINS.some((e=>Object.values(u[e]||{}).some(o))),f=d||h||p,m={...e,PreferencesController:{...i,preferences:{...s,showTestNetworks:f}}};return m}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[1550,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/chunk-Z4BLTVTB.js"}],[1551,{"./chunk-3AC2MIND.js":1544,"./chunk-ENMR2SJC.js":1545,"./chunk-I2BVUFWR.js":1546,"./chunk-IPW2SZMY.js":1547,"./chunk-PBQXMZM5.js":1548,"./chunk-XDGWQHNY.js":1549,"./chunk-Z4BLTVTB.js":1550},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-ENMR2SJC.js"),i=e("./chunk-3AC2MIND.js"),s=e("./chunk-PBQXMZM5.js"),a=e("./chunk-XDGWQHNY.js"),o=e("./chunk-I2BVUFWR.js"),l=e("./chunk-IPW2SZMY.js");e("./chunk-Z4BLTVTB.js"),r.JsonRpcEngine=l.JsonRpcEngine,r.createAsyncMiddleware=n.createAsyncMiddleware,r.createIdRemapMiddleware=s.createIdRemapMiddleware,r.createScaffoldMiddleware=i.createScaffoldMiddleware,r.getUniqueId=a.getUniqueId,r.mergeMiddleware=o.mergeMiddleware}}},{package:"@metamask/queued-request-controller>@metamask/json-rpc-engine",file:"node_modules/@metamask/queued-request-controller/node_modules/@metamask/json-rpc-engine/dist/index.js"}],[1552,{"@metamask/base-controller":1557,"eth-rpc-errors":2753},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.RateLimitController=void 0;const i=e("eth-rpc-errors"),s=e("@metamask/base-controller"),a="RateLimitController",o={requests:{persist:!1,anonymous:!1}};class l extends s.BaseControllerV2{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:i}){const s={requests:Object.keys(i).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:a,metadata:o,messenger:r,state:Object.assign(Object.assign({},s),n)}),this.implementations=i,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${a}:call`,((e,t,...r)=>this.call(e,t,...r)))}call(e,t,...r){return n(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw i.ethErrors.rpc.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}))}isRateLimited(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitCount)&&void 0!==r?r:this.rateLimitCount;return this.state.requests[e][t]>=n}recordRequest(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitTimeout)&&void 0!==r?r:this.rateLimitTimeout;this.update((r=>{var i;const s=null!==(i=r.requests[e][t])&&void 0!==i?i:0;r.requests[e][t]=s+1,0===s&&setTimeout((()=>this.resetRequestCount(e,t)),n)}))}resetRequestCount(e,t){this.update((r=>{r.requests[e][t]=0}))}}r.RateLimitController=l}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/RateLimitController.js"}],[1553,{"./RateLimitController":1552},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./RateLimitController"),r)}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[1554,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1555,{immer:3129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const a=s[r],o=e[i];return"function"==typeof a?n[i]=a(o):a&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1556,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1557,{"./BaseController":1554,"./BaseControllerV2":1555,"./ControllerMessenger":1556},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/index.js"}],[156,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:68,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...n}=e,{domainMetadata:a={},permissionsHistory:o={},permissionsLog:l=[]}=r;return{...n,PermissionController:i(t),PermissionLogController:{permissionActivityLog:l,permissionHistory:o},SubjectMetadataController:s(a)}}(t.data);return t.data=r,t}};function i(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[n]}=r,i=n.caveats.find((e=>"exposedAccounts"===e.name)),s={...n,caveats:[{type:"restrictReturnedAccounts",value:i.value}]};return delete s["@context"],e[t]={origin:t,permissions:{eth_accounts:s}},e}),{})}}function s(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:n=null,icon:i=null,extensionId:s=null,...a}=r;return delete a.lastUpdated,delete a.host,t&&(e[t]={name:n,iconUrl:i,extensionId:s,...a,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[157,{"@metamask/permission-controller":1461,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/permission-controller"),i=e("lodash");r.default={version:69,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?n.SubjectType.Extension:n.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[1575,{"@metamask/base-controller":1066,"@metamask/swappable-obj-proxy":1797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,a,o,l,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=r.METAMASK_DOMAIN=r.controllerName=void 0;const d=e("@metamask/base-controller"),h=e("@metamask/swappable-obj-proxy");r.controllerName="SelectedNetworkController";const p={domains:{persist:!0,anonymous:!1}};r.METAMASK_DOMAIN="metamask",r.SelectedNetworkControllerActionTypes={getState:`${r.controllerName}:getState`,getNetworkClientIdForDomain:`${r.controllerName}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${r.controllerName}:setNetworkClientIdForDomain`},r.SelectedNetworkControllerEventTypes={stateChange:`${r.controllerName}:stateChange`};class f extends d.BaseController{constructor({messenger:e,state:t={domains:{}},getUseRequestQueue:o}){super({name:r.controllerName,metadata:p,messenger:e,state:t}),n.add(this),i.set(this,new Map),s.set(this,void 0),c(this,s,o,"f"),u(this,n,"m",a).call(this),this.messagingSystem.call("PermissionController:getSubjectNames").filter((e=>this.state.domains[e]===undefined)).forEach((e=>this.setNetworkClientIdForDomain(e,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId))),this.messagingSystem.subscribe("PermissionController:stateChange",((e,t)=>{t.forEach((({op:e,path:t})=>{if("subjects"===t[0]&&t[1]!==undefined&&"string"==typeof t[1]){const r=t[1];"add"===e&&this.state.domains[r]===undefined?this.setNetworkClientIdForDomain(r,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId):"remove"===e&&this.state.domains[r]!==undefined&&this.update((({domains:e})=>{delete e[r]}))}}))})),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e},t)=>{t.forEach((({op:t,path:r})=>{if("remove"===t&&"networkConfigurations"===r[0]){const t=r[1];Object.entries(this.state.domains).forEach((([r,n])=>{n===t&&this.setNetworkClientIdForDomain(r,e)}))}}))}))}setNetworkClientIdForDomain(e,t){if(e===r.METAMASK_DOMAIN)throw new Error(`NetworkClientId for domain "${r.METAMASK_DOMAIN}" cannot be set on the SelectedNetworkController`);if(!u(this,n,"m",l).call(this,e))throw new Error("NetworkClientId for domain cannot be called with a domain that has not yet been granted permissions");u(this,n,"m",o).call(this,e,t)}getNetworkClientIdForDomain(e){var t;const{selectedNetworkClientId:r}=this.messagingSystem.call("NetworkController:getState");return u(this,s,"f").call(this)&&null!==(t=this.state.domains[e])&&void 0!==t?t:r}getProviderAndBlockTracker(e){if(!u(this,s,"f").call(this))throw new Error("Provider and BlockTracker should be fetched from NetworkController when useRequestQueue is false");const t=this.state.domains[e];if(!t)throw new Error("NetworkClientId has not been set for the requested domain");let r=u(this,i,"f").get(e);if(r===undefined){const n=this.messagingSystem.call("NetworkController:getNetworkClientById",t);r={provider:(0,h.createEventEmitterProxy)(n.provider),blockTracker:(0,h.createEventEmitterProxy)(n.blockTracker,{eventFilter:"skipInternal"})},u(this,i,"f").set(e,r)}return r}}r.SelectedNetworkController=f,i=new WeakMap,s=new WeakMap,n=new WeakSet,a=function(){this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))},o=function(e,t){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",t),n=u(this,i,"f").get(e);n===undefined?u(this,i,"f").set(e,{provider:(0,h.createEventEmitterProxy)(r.provider),blockTracker:(0,h.createEventEmitterProxy)(r.blockTracker,{eventFilter:"skipInternal"})}):(n.provider.setTarget(r.provider),n.blockTracker.setTarget(r.blockTracker)),this.update((r=>{r.domains[e]=t}))},l=function(e){return this.messagingSystem.call("PermissionController:hasPermissions",e)}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkController.js"}],[1576,{"./SelectedNetworkController":1575},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=void 0;const n=e("./SelectedNetworkController");r.createSelectedNetworkMiddleware=e=>(t,r,i)=>{if(!t.origin)throw new Error("Request object is lacking an 'origin'");var s;return t.networkClientId=(s=t.origin,e.call(n.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,s)),i()}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkMiddleware.js"}],[1577,{"./SelectedNetworkController":1575,"./SelectedNetworkMiddleware":1576},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=r.METAMASK_DOMAIN=r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=void 0;var n=e("./SelectedNetworkController");Object.defineProperty(r,"SelectedNetworkControllerActionTypes",{enumerable:!0,get:function(){return n.SelectedNetworkControllerActionTypes}}),Object.defineProperty(r,"SelectedNetworkControllerEventTypes",{enumerable:!0,get:function(){return n.SelectedNetworkControllerEventTypes}}),Object.defineProperty(r,"SelectedNetworkController",{enumerable:!0,get:function(){return n.SelectedNetworkController}}),Object.defineProperty(r,"METAMASK_DOMAIN",{enumerable:!0,get:function(){return n.METAMASK_DOMAIN}});var i=e("./SelectedNetworkMiddleware");Object.defineProperty(r,"createSelectedNetworkMiddleware",{enumerable:!0,get:function(){return i.createSelectedNetworkMiddleware}})}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.js"}],[1578,{"@metamask/base-controller":1066,"@metamask/controller-utils":1581,"@metamask/logging-controller":1329,"@metamask/message-manager":1343,"@metamask/rpc-errors":1562,buffer:2522,"ethereumjs-util":2768,events:2809,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,i,s,a,o,l,c,u,d,h,p,f,m,g,v,_,w,b,y,k,S,E,T,C,P,M,j,A,N,R,O=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},I=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},x=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},L=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},D=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureController=void 0;const B=e("@metamask/base-controller"),W=e("@metamask/controller-utils"),U=e("@metamask/logging-controller"),F=e("@metamask/message-manager"),H=e("@metamask/rpc-errors"),G=e("ethereumjs-util"),$=D(e("events")),q=e("lodash"),V={unapprovedMsgs:{persist:!1,anonymous:!1},unapprovedPersonalMsgs:{persist:!1,anonymous:!1},unapprovedTypedMessages:{persist:!1,anonymous:!1},unapprovedMsgCount:{persist:!1,anonymous:!1},unapprovedPersonalMsgCount:{persist:!1,anonymous:!1},unapprovedTypedMessagesCount:{persist:!1,anonymous:!1}};class K extends B.BaseController{constructor({messenger:e,isEthSignEnabled:t,getAllState:r,securityProviderRequest:c,getCurrentChainId:u}){super({name:"SignatureController",metadata:V,messenger:e,state:{unapprovedMsgs:{},unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0}}),n.add(this),i.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),I(this,i,t,"f"),I(this,s,r,"f"),this.hub=new $.default,I(this,a,new F.MessageManager(undefined,undefined,c),"f"),I(this,o,new F.PersonalMessageManager(undefined,undefined,c),"f"),I(this,l,new F.TypedMessageManager(undefined,undefined,c,undefined,u),"f"),x(this,n,"m",S).call(this,x(this,a,"f"),"unapprovedMessage"),x(this,n,"m",S).call(this,x(this,o,"f"),"unapprovedPersonalMessage"),x(this,n,"m",S).call(this,x(this,l,"f"),"unapprovedTypedMessage"),x(this,n,"m",E).call(this,x(this,a,"f"),((e,t,r)=>{e.unapprovedMsgs=t,e.unapprovedMsgCount=r})),x(this,n,"m",E).call(this,x(this,o,"f"),((e,t,r)=>{e.unapprovedPersonalMsgs=t,e.unapprovedPersonalMsgCount=r})),x(this,n,"m",E).call(this,x(this,l,"f"),((e,t,r)=>{e.unapprovedTypedMessages=t,e.unapprovedTypedMessagesCount=r}))}get unapprovedMsgCount(){return x(this,a,"f").getUnapprovedMessagesCount()}get unapprovedPersonalMessagesCount(){return x(this,o,"f").getUnapprovedMessagesCount()}get unapprovedTypedMessagesCount(){return x(this,l,"f").getUnapprovedMessagesCount()}get messages(){return[...x(this,l,"f").getAllMessages(),...x(this,o,"f").getAllMessages(),...x(this,a,"f").getAllMessages()].reduce(((e,t)=>(e[t.id]=t,e)),{})}resetState(){this.update((()=>({unapprovedMsgs:{},unapprovedPersonalMsgs:{},unapprovedTypedMessages:{},unapprovedMsgCount:0,unapprovedPersonalMsgCount:0,unapprovedTypedMessagesCount:0})))}rejectUnapproved(e){x(this,n,"m",_).call(this,x(this,a,"f"),e),x(this,n,"m",_).call(this,x(this,o,"f"),e),x(this,n,"m",_).call(this,x(this,l,"f"),e)}clearUnapproved(){x(this,n,"m",w).call(this,x(this,a,"f")),x(this,n,"m",w).call(this,x(this,o,"f")),x(this,n,"m",w).call(this,x(this,l,"f"))}newUnsignedMessage(e,t){return O(this,void 0,void 0,(function*(){return x(this,n,"m",u).call(this,x(this,a,"f"),W.ApprovalType.EthSign,U.SigningMethod.EthSign,"Message",x(this,n,"m",d).bind(this),e,t,x(this,n,"m",c).bind(this))}))}newUnsignedPersonalMessage(e,t){return O(this,void 0,void 0,(function*(){return x(this,n,"m",u).call(this,x(this,o,"f"),W.ApprovalType.PersonalSign,U.SigningMethod.PersonalSign,"Personal Message",x(this,n,"m",h).bind(this),e,t)}))}newUnsignedTypedMessage(e,t,r,i){return O(this,void 0,void 0,(function*(){const s=x(this,n,"m",R).call(this,r);return x(this,n,"m",u).call(this,x(this,l,"f"),W.ApprovalType.EthSignTypedData,s,"Typed Message",x(this,n,"m",p).bind(this),e,t,undefined,r,i)}))}setDeferredSignSuccess(e,t){x(this,n,"m",f).call(this,x(this,n,"m",m),e,t)}setMessageMetadata(e,t){x(this,n,"m",f).call(this,x(this,n,"m",g),e,t)}setDeferredSignError(e){x(this,n,"m",f).call(this,x(this,n,"m",v),e)}setTypedMessageInProgress(e){x(this,l,"f").setMessageStatusInProgress(e)}setPersonalMessageInProgress(e){x(this,o,"f").setMessageStatusInProgress(e)}}r.SignatureController=K,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,n=new WeakSet,c=function(e){if(!x(this,i,"f").call(this))throw H.rpcErrors.methodNotFound("eth_sign has been disabled. You must enable it in the advanced settings");const t=x(this,n,"m",P).call(this,e.data);if(66!==t.length&&67!==t.length)throw H.rpcErrors.invalidParams("eth_sign requires 32 byte message hash")},u=function(e,t,r,i,s,a,o,l,c,u){return O(this,void 0,void 0,(function*(){let d;l&&l(a);try{const l=yield e.addUnapprovedMessage(a,o,c),h=Object.assign(Object.assign(Object.assign({},a),{metamaskId:l}),c&&{version:c}),p=e.waitForFinishStatus(h,i);try{x(this,n,"m",N).call(this,r,U.SigningStage.Proposed,h);d=(yield x(this,n,"m",j).call(this,h,t)).resultCallbacks}catch(t){throw x(this,n,"m",N).call(this,r,U.SigningStage.Rejected,h),x(this,n,"m",k).call(this,e,l),H.providerErrors.userRejectedRequest("User rejected the request.")}yield s(h,u);const f=yield p;return x(this,n,"m",N).call(this,r,U.SigningStage.Signed,h),null==d||d.success(f),f}catch(e){throw null==d||d.error(e),e}}))},d=function(e){return O(this,void 0,void 0,(function*(){return yield x(this,n,"m",b).call(this,x(this,a,"f"),W.ApprovalType.EthSign,e,(e=>O(this,void 0,void 0,(function*(){return yield this.messagingSystem.call("KeyringController:signMessage",e)}))))}))},h=function(e){return O(this,void 0,void 0,(function*(){return yield x(this,n,"m",b).call(this,x(this,o,"f"),W.ApprovalType.PersonalSign,e,(e=>O(this,void 0,void 0,(function*(){return yield this.messagingSystem.call("KeyringController:signPersonalMessage",e)}))))}))},p=function(e,t={parseJsonData:!0}){return O(this,void 0,void 0,(function*(){const{version:r}=e;return yield x(this,n,"m",b).call(this,x(this,l,"f"),W.ApprovalType.EthSignTypedData,e,(e=>O(this,void 0,void 0,(function*(){const i=t.parseJsonData?x(this,n,"m",A).call(this,e,r):e;return yield this.messagingSystem.call("KeyringController:signTypedMessage",i,r)}))))}))},f=function(e,...t){const r=[x(this,a,"f"),x(this,o,"f"),x(this,l,"f")];for(const n of r)if(e(n,...t))return!0;throw new Error("Message not found")},m=function(e,t,r){try{return e.setMessageStatusSigned(t,r),!0}catch(e){return!1}},g=function(e,t,r){try{return e.setMetadata(t,r),!0}catch(e){return!1}},v=function(e,t){try{return e.rejectMessage(t),!0}catch(e){return!1}},_=function(e,t){Object.keys(e.getUnapprovedMessages()).forEach((r=>{x(this,n,"m",k).call(this,e,r,t)}))},w=function(e){e.update({unapprovedMessages:{},unapprovedMessagesCount:0})},b=function(e,t,r,i){return O(this,void 0,void 0,(function*(){console.info(`MetaMaskController - ${t}`);const s=r.metamaskId;try{const n=yield e.approveMessage(r);try{const r=yield i(n);return this.hub.emit(`${t}:signed`,{signature:r,messageId:s}),n.deferSetAsSigned||e.setMessageStatusSigned(s,r),r}catch(e){throw this.hub.emit(`${s}:signError`,{error:e}),e}}catch(r){throw console.info(`MetaMaskController - ${t} failed.`,r),x(this,n,"m",y).call(this,e,s,r.message),r}}))},y=function(e,t,r){e instanceof F.TypedMessageManager?e.setMessageStatusErrored(t,r):x(this,n,"m",k).call(this,e,t)},k=function(e,t,r){if(r){const e=x(this,n,"m",M).call(this,t);this.hub.emit("cancelWithReason",{message:e,reason:r})}e.rejectMessage(t)},S=function(e,t){e.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),e.hub.on("unapprovedMessage",(e=>{this.hub.emit(t,e)}))},E=function(e,t){e.subscribe((e=>{const r=x(this,n,"m",T).call(this,e.unapprovedMessages);this.update((()=>{const n=Object.assign({},this.state);return t(n,r,e.unapprovedMessagesCount),n}))}))},T=function(e){const t={};for(const r of Object.keys(e)){const i=e[r],s=x(this,n,"m",C).call(this,i);t[r]=s}return t},C=function(e){const{messageParams:t}=e,r=L(e,["messageParams"]);return Object.assign(Object.assign({},r),{msgParams:t})},P=function(e){return e.startsWith("0x")?e:(0,G.bufferToHex)(t.from(e,"utf8"))},M=function(e){return Object.assign(Object.assign(Object.assign({},this.state.unapprovedMsgs),this.state.unapprovedPersonalMsgs),this.state.unapprovedTypedMessages)[e]},j=function(e,t){return O(this,void 0,void 0,(function*(){const r=e.metamaskId,n=e.origin||W.ORIGIN_METAMASK,i=(0,q.cloneDeep)(e);return yield this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t,requestData:i,expectsResult:!0},!0)}))},A=function(e,t){return"V1"===t||"string"!=typeof e.data?e:Object.assign(Object.assign({},e),{data:JSON.parse(e.data)})},N=function(e,t,r){this.messagingSystem.call("LoggingController:add",{type:U.LogType.EthSignLog,data:{signingMethod:e,stage:t,signingData:r}})},R=function(e){let t=U.SigningMethod.EthSignTypedData;return"V3"===e?t=U.SigningMethod.EthSignTypedDataV3:"V4"===e&&(t=U.SigningMethod.EthSignTypedDataV4),t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/SignatureController.js"}],[1579,{"./SignatureController":1578},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./SignatureController"),r)}}},{package:"@metamask/signature-controller",file:"node_modules/@metamask/signature-controller/dist/index.js"}],[158,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:70,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[1580,{"./types":1584},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1581,{"./constants":1580,"./siwe":1583,"./types":1584,"./util":1585},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1582,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1583,{"./logger":1582,"@metamask/utils":1886,"@spruceid/siwe-parser":2077,buffer:2522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),s=e("./logger"),a=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),s=t.from(i,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return a(t),e}var r}const l={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const s=new URL(n),a=(0,r.parseDomainParts)(i.parsedMessage.domain,s.protocol);return 0===a.hostname.localeCompare(s.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==s.port?""===s.port&&a.port===l[s.protocol]:""===a.username||a.username===s.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1584,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1585,{"./constants":1580,"@ethereumjs/util":394,"@metamask/ethjs-unit":1224,"@metamask/utils":1886,"bn.js":2474,buffer:2522,"eth-ens-namehash":2721,"fast-deep-equal":2837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const s=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),u=i(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function p(e){return e?new l.default((0,o.remove0x)(e),16):new l.default(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new l.default(t),i=new l.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new l.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new l.default(1))),s},r.weiHexToGweiDec=function(e){const t=new l.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=p,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new l.default(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${l.default.isBN(e)?e.toString(16):new l.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,s.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,s.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/signature-controller>@metamask/controller-utils",file:"node_modules/@metamask/signature-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1587,{"./constants":1588,"./types":1590,"./utils":1591,"@ethersproject/bignumber":430,"@ethersproject/bytes":432,"@ethersproject/providers":470,"@metamask/base-controller":1595,"@metamask/controller-utils":1597,"bignumber.js":1602,"lodash/cloneDeep":3352,"lodash/mapValues":3376},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_INTERVAL=void 0;const i=e("@metamask/base-controller"),s=e("@metamask/controller-utils"),a=e("bignumber.js"),o=e("@ethersproject/bignumber"),l=e("@ethersproject/providers"),c=e("@ethersproject/bytes"),u=n(e("lodash/mapValues")),d=n(e("lodash/cloneDeep")),h=e("./types"),p=e("./utils"),f=e("./constants");r.DEFAULT_INTERVAL=5e3;class m extends i.BaseController{constructor({onNetworkStateChange:e,getNonceLock:t,provider:n,confirmExternalTransaction:i,trackMetaMetricsEvent:s},a,o){super(a,o),this.defaultConfig={interval:r.DEFAULT_INTERVAL,chainId:f.CHAIN_IDS.ETHEREUM,clientId:"default",supportedChainIds:[f.CHAIN_IDS.ETHEREUM,f.CHAIN_IDS.RINKEBY]},this.defaultState={smartTransactionsState:{smartTransactions:{},userOptIn:undefined,userOptInV2:undefined,fees:{approvalTxFees:undefined,tradeTxFees:undefined},liveness:!0}},this.getNonceLock=t,this.ethersProvider=new l.Web3Provider(n),this.confirmExternalTransaction=i,this.trackMetaMetricsEvent=s,this.initialize(),this.initializeSmartTransactionsForChainId(),e((({providerConfig:e})=>{const{chainId:t}=e;this.configure({chainId:t}),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state),this.ethersProvider=new l.Web3Provider(n)})),this.subscribe((e=>this.checkPoll(e)))}async fetch(e,t){const{clientId:r}=this.config,n=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},r&&{"X-Client-Id":r})});return(0,p.handleFetch)(e,n)}checkPoll(e){const{smartTransactions:t}=e.smartTransactionsState,r=t[this.config.chainId],n=null==r?void 0:r.filter(p.isSmartTransactionPending);!this.timeoutHandle&&(null==n?void 0:n.length)>0?this.poll():this.timeoutHandle&&0===(null==n?void 0:n.length)&&this.stop()}initializeSmartTransactionsForChainId(){var e;if(this.config.supportedChainIds.includes(this.config.chainId)){const{smartTransactionsState:t}=this.state;this.update({smartTransactionsState:Object.assign(Object.assign({},t),{smartTransactions:Object.assign(Object.assign({},t.smartTransactions),{[this.config.chainId]:null!==(e=t.smartTransactions[this.config.chainId])&&void 0!==e?e:[]})})})}}async poll(e){const{chainId:t,supportedChainIds:r}=this.config;e&&this.configure({interval:e},!1,!1),this.timeoutHandle&&clearInterval(this.timeoutHandle),r.includes(t)&&(await(0,s.safelyExecute)((()=>this.updateSmartTransactions())),this.timeoutHandle=setInterval((()=>{(0,s.safelyExecute)((()=>this.updateSmartTransactions()))}),this.config.interval))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{userOptInV2:e})})}trackStxStatusChange(e,t){if(!t)return;let r=(0,d.default)(e);if(r=Object.assign(Object.assign({},(0,d.default)(t)),r),!r.swapMetaData||r.status===t.status&&t.swapMetaData)return;const n={stx_status:r.status,token_from_symbol:r.sourceTokenSymbol,token_to_symbol:r.destinationTokenSymbol,processing_time:(0,p.getStxProcessingTime)(r.time),stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0};this.trackMetaMetricsEvent({event:"STX Status Updated",category:"swaps",sensitiveProperties:n})}isNewSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,i=n[t],s=null==i?void 0:i.findIndex((t=>t.uuid===e));return-1===s||s===undefined}updateSmartTransaction(e){const{chainId:t}=this.config,{smartTransactionsState:r}=this.state,{smartTransactions:n}=r,i=n[t],s=null==i?void 0:i.findIndex((t=>t.uuid===e.uuid)),a=this.isNewSmartTransaction(e.uuid);if(this.trackStxStatusChange(e,a?undefined:i[s]),a){const n=i.findIndex((t=>{var r,n,i;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(n=e.txParams)||void 0===n?void 0:n.nonce)&&(null===(i=t.status)||void 0===i?void 0:i.startsWith("cancelled"))})),s=[(0,d.default)(e)],a=Object.assign(Object.assign({},e),{history:s}),o=n>-1?i.slice(0,n).concat(i.slice(n+1)).concat(a):i.concat(a);this.update({smartTransactionsState:Object.assign(Object.assign({},r),{smartTransactions:Object.assign(Object.assign({},r.smartTransactions),{[t]:o})})})}else{if((e.status===h.SmartTransactionStatuses.SUCCESS||e.status===h.SmartTransactionStatuses.REVERTED)&&!e.confirmed){const t=i[s],r=Object.assign(Object.assign({},t),e);this.confirmSmartTransaction(r)}this.update({smartTransactionsState:Object.assign(Object.assign({},r),{smartTransactions:Object.assign(Object.assign({},r.smartTransactions),{[t]:r.smartTransactions[t].map(((t,r)=>r===s?Object.assign(Object.assign({},t),e):t))})})})}}async updateSmartTransactions(){const{smartTransactions:e}=this.state.smartTransactionsState,{chainId:t}=this.config,r=(null==e?void 0:e[t]).filter(p.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r)}async confirmSmartTransaction(e){var t,r,n;const i=null===(t=e.statusMetadata)||void 0===t?void 0:t.minedHash;try{const t=await this.ethersProvider.getTransactionReceipt(i),s=await this.ethersProvider.getTransaction(i),a=null===(r=s.maxFeePerGas)||void 0===r?void 0:r.toHexString(),l=null===(n=s.maxPriorityFeePerGas)||void 0===n?void 0:n.toHexString();if(null==t?void 0:t.blockNumber){const r=await this.ethersProvider.getBlock(null==t?void 0:t.blockNumber,!1),n=null==r?void 0:r.baseFeePerGas.toHexString(),s=(0,u.default)(t,(e=>e instanceof o.BigNumber?e.toHexString():e)),c=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:a,maxPriorityFeePerGas:l}),d=Object.assign(Object.assign({},e),{id:e.uuid,status:"confirmed",hash:i,txParams:c}),h=(0,p.snapshotFromTxMeta)(d),f=(0,p.replayHistory)(d.history),m=(0,p.generateHistoryEntry)(f,h,"txStateManager: setting status to confirmed"),g=m.length>0?Object.assign(Object.assign({},d),{history:d.history.concat(m)}):d;this.confirmExternalTransaction(g,s,n),this.trackMetaMetricsEvent({event:"STX Confirmed",category:"swaps"}),this.updateSmartTransaction(Object.assign(Object.assign({},e),{confirmed:!0}))}}catch(e){this.trackMetaMetricsEvent({event:"STX Confirmation Failed",category:"swaps"}),console.error("confirm error",e)}}async fetchSmartTransactionsStatus(e){const{chainId:t}=this.config,r=new URLSearchParams({uuids:e.join(",")}),n=`${(0,p.getAPIRequestURL)(h.APIType.BATCH_STATUS,t)}?${r.toString()}`,i=await this.fetch(n);return Object.entries(i).forEach((([e,t])=>{this.updateSmartTransaction({statusMetadata:t,status:(0,p.calculateStatus)(t),cancellable:(0,p.isSmartTransactionCancellable)(t),uuid:e})})),i}async addNonceToTransaction(e){const t=await this.getNonceLock(e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:undefined,tradeTxFees:undefined};return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:e})}),e}async getFees(e,t){const{chainId:r}=this.config,n=[];let i;if(t){const r=await this.addNonceToTransaction(t);n.push(r),i=Object.assign(Object.assign({},e),{nonce:(0,p.incrementNonceInHex)(r.nonce)})}else i=await this.addNonceToTransaction(e);n.push(i);const s=await this.fetch((0,p.getAPIRequestURL)(h.APIType.GET_FEES,r),{method:"POST",body:JSON.stringify({txs:n})});let a,o;return t?(a=null==s?void 0:s.txs[0],o=null==s?void 0:s.txs[1]):o=null==s?void 0:s.txs[0],this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{fees:{approvalTxFees:a,tradeTxFees:o}})}),{approvalTxFees:a,tradeTxFees:o}}async submitSignedTransactions({txParams:e,signedTransactions:t,signedCanceledTransactions:r}){const{chainId:n}=this.config,i=await this.fetch((0,p.getAPIRequestURL)(h.APIType.SUBMIT_TRANSACTIONS,n),{method:"POST",body:JSON.stringify({rawTxs:t,rawCancelTxs:r})}),s=Date.now();let o;try{const t=await this.ethersProvider.getBalance(null==e?void 0:e.from);o=new a.BigNumber(t.toHexString()).toString(16)}catch(e){console.error("ethers error",e)}const l=await this.getNonceLock(null==e?void 0:e.from);try{const t=(0,c.hexlify)(l.nextNonce);e&&!(null==e?void 0:e.nonce)&&(e.nonce=t);const{nonceDetails:r}=l;this.updateSmartTransaction({chainId:n,nonceDetails:r,preTxBalance:o,status:h.SmartTransactionStatuses.PENDING,time:s,txParams:e,uuid:i.uuid,cancellable:!0})}finally{l.releaseLock()}return i}async cancelSmartTransaction(e){const{chainId:t}=this.config;await this.fetch((0,p.getAPIRequestURL)(h.APIType.CANCEL,t),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness(){const{chainId:e}=this.config;let t=!1;try{const r=await this.fetch((0,p.getAPIRequestURL)(h.APIType.LIVENESS,e));t=Boolean(r.lastBlock)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update({smartTransactionsState:Object.assign(Object.assign({},this.state.smartTransactionsState),{liveness:t})}),t}async setStatusRefreshInterval(e){e!==this.config.interval&&this.configure({interval:e},!1,!1)}getTransactions({addressFrom:e,status:t}){const{smartTransactions:r}=this.state.smartTransactionsState,{chainId:n}=this.config,i=null==r?void 0:r[n];return i&&0!==i.length?i.filter((r=>{var n;return r.status===t&&(null===(n=r.txParams)||void 0===n?void 0:n.from)===e})):[]}}r.default=m}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[1588,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_IDS=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.metaswap.codefi.network",r.CHAIN_IDS={ETHEREUM:"0x1",RINKEBY:"0x4",BSC:"0x38"}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[1589,{"./SmartTransactionsController":1587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e("./SmartTransactionsController"));r.default=i.default}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[159,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:71,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[1590,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.cancellationReasonToStatusMap=r.SmartTransactionStatuses=r.SmartTransactionCancellationReason=r.SmartTransactionMinedTx=r.APIType=void 0,function(e){e[e.GET_FEES=0]="GET_FEES",e[e.ESTIMATE_GAS=1]="ESTIMATE_GAS",e[e.SUBMIT_TRANSACTIONS=2]="SUBMIT_TRANSACTIONS",e[e.CANCEL=3]="CANCEL",e[e.BATCH_STATUS=4]="BATCH_STATUS",e[e.LIVENESS=5]="LIVENESS"}(r.APIType||(r.APIType={})),function(e){e.NOT_MINED="not_mined",e.SUCCESS="success",e.CANCELLED="cancelled",e.REVERTED="reverted",e.UNKNOWN="unknown"}(r.SmartTransactionMinedTx||(r.SmartTransactionMinedTx={})),function(e){e.WOULD_REVERT="would_revert",e.TOO_CHEAP="too_cheap",e.DEADLINE_MISSED="deadline_missed",e.INVALID_NONCE="invalid_nonce",e.USER_CANCELLED="user_cancelled",e.NOT_CANCELLED="not_cancelled",e.PREVIOUS_TX_CANCELLED="previous_tx_cancelled"}(n=r.SmartTransactionCancellationReason||(r.SmartTransactionCancellationReason={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.REVERTED="reverted",e.UNKNOWN="unknown",e.CANCELLED="cancelled",e.CANCELLED_WOULD_REVERT="cancelled_would_revert",e.CANCELLED_TOO_CHEAP="cancelled_too_cheap",e.CANCELLED_DEADLINE_MISSED="cancelled_deadline_missed",e.CANCELLED_INVALID_NONCE="cancelled_invalid_nonce",e.CANCELLED_USER_CANCELLED="cancelled_user_cancelled",e.CANCELLED_PREVIOUS_TX_CANCELLED="cancelled_previous_tx_cancelled",e.RESOLVED="resolved"}(i=r.SmartTransactionStatuses||(r.SmartTransactionStatuses={})),r.cancellationReasonToStatusMap={[n.WOULD_REVERT]:i.CANCELLED_WOULD_REVERT,[n.TOO_CHEAP]:i.CANCELLED_TOO_CHEAP,[n.DEADLINE_MISSED]:i.CANCELLED_DEADLINE_MISSED,[n.INVALID_NONCE]:i.CANCELLED_INVALID_NONCE,[n.USER_CANCELLED]:i.CANCELLED_USER_CANCELLED,[n.PREVIOUS_TX_CANCELLED]:i.CANCELLED_PREVIOUS_TX_CANCELLED}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/types.js"}],[1591,{"../package.json":1603,"./constants":1588,"./types":1590,"@ethersproject/bytes":432,"bignumber.js":1602,"fast-json-patch":2843,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const i=n(e("fast-json-patch")),s=n(e("lodash")),a=e("bignumber.js"),o=e("@ethersproject/bytes"),l=n(e("../package.json")),c=e("./types"),u=e("./constants");r.isSmartTransactionPending=function(e){return e.status===c.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case c.APIType.GET_FEES:return`${u.API_BASE_URL}/networks/${r}/getFees`;case c.APIType.ESTIMATE_GAS:return`${u.API_BASE_URL}/networks/${r}/estimateGas`;case c.APIType.SUBMIT_TRANSACTIONS:return`${u.API_BASE_URL}/networks/${r}/submitTransactions?stxControllerVersion=${l.default.version}`;case c.APIType.CANCEL:return`${u.API_BASE_URL}/networks/${r}/cancel`;case c.APIType.BATCH_STATUS:return`${u.API_BASE_URL}/networks/${r}/batchStatus`;case c.APIType.LIVENESS:return`${u.API_BASE_URL}/networks/${r}/health`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if((0,r.isSmartTransactionStatusResolved)(e))return c.SmartTransactionStatuses.RESOLVED;const t=[c.SmartTransactionCancellationReason.WOULD_REVERT,c.SmartTransactionCancellationReason.TOO_CHEAP,c.SmartTransactionCancellationReason.DEADLINE_MISSED,c.SmartTransactionCancellationReason.INVALID_NONCE,c.SmartTransactionCancellationReason.USER_CANCELLED,c.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===c.SmartTransactionCancellationReason.NOT_CANCELLED)return c.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?c.cancellationReasonToStatusMap[e.cancellationReason]:c.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.SUCCESS)return c.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.CANCELLED)return c.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.REVERTED)return c.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===c.SmartTransactionMinedTx.UNKNOWN)return c.SmartTransactionStatuses.UNKNOWN}return c.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const n=i.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n},r.replayHistory=function(e){return s.default.cloneDeep(e).reduce(((e,t)=>i.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,s.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!s.default.isObject(e))return e;const t=s.default.mapValues(e,(e=>s.default.isArray(e)?e.map(r.mapKeysToCamel):s.default.isObject(e)?(0,r.mapKeysToCamel)(e):e));return s.default.mapKeys(t,((e,t)=>s.default.camelCase(t)))},r.handleFetch=async function(e,t){const n=await fetch(e,t),i=await n.json();if(!n.ok)throw console.log("response",n),new Error(`Fetch error:${JSON.stringify(Object.assign({status:n.status},(0,r.mapKeysToCamel)(i)))}`);return i};r.isSmartTransactionCancellable=e=>e.minedTx===c.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===c.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new a.BigNumber(e,16).toString(10);return(0,o.hexlify)(Number(t)+1)}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[1592,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1593,{immer:3129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const a=s[r],o=e[i];return"function"==typeof a?n[i]=a(o):a&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1594,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1595,{"./BaseController":1592,"./BaseControllerV2":1593,"./ControllerMessenger":1594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var a=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return a.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return a.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return a.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/base-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1596,{"./types":1600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_TEST_API_URL=r.OPENSEA_API_URL=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v1",r.OPENSEA_API_URL="https://api.opensea.io/api/v1",r.OPENSEA_TEST_API_URL="https://testnets-api.opensea.io/api/v1",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1597,{"./constants":1596,"./siwe":1599,"./types":1600,"./util":1601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1598,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1599,{"./logger":1598,"@spruceid/siwe-parser":2077,buffer:2522,"ethereumjs-util":2768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@spruceid/siwe-parser"),i=e("ethereumjs-util"),s=e("./logger"),a=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function o(e){try{const n="string"!=typeof(r=e)?r:(0,i.isHexPrefixed)(r)?r.slice(2):r,s=t.from(n,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return a(t),e}var r}const l={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const s=new URL(n),a=(0,r.parseDomainParts)(i.parsedMessage.domain,s.protocol);return 0===a.hostname.localeCompare(s.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==s.port?""===s.port&&a.port===l[s.protocol]:""===a.username||a.username===s.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new n.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[16,{"../../../../shared/constants/permissions":4036,"@metamask/permission-controller":1461,"ethereumjs-util":2768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaveatMutatorFactories=void 0;var n=e("@metamask/permission-controller"),i=e("ethereumjs-util"),s=e("../../../../shared/constants/permissions");r.CaveatMutatorFactories={[s.CaveatTypes.restrictReturnedAccounts]:{removeAccount:function(e,t){const r=(0,i.toChecksumAddress)(e),s=t.filter((e=>(0,i.toChecksumAddress)(e)!==r));if(s.length===t.length)return{operation:n.CaveatMutatorOperation.noop};if(s.length>0)return{operation:n.CaveatMutatorOperation.updateValue,value:s};return{operation:n.CaveatMutatorOperation.revokePermission}}}}}}},{package:"$root$",file:"app/scripts/controllers/permissions/caveat-mutators.js"}],[160,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:72,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[1600,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1601,{"./constants":1596,"@metamask/utils":1886,buffer:2522,"eth-ens-namehash":2721,"ethereumjs-util":2768,"ethjs-unit":2808,"fast-deep-equal":2837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const s=e("@metamask/utils"),a=i(e("eth-ens-namehash")),o=e("ethereumjs-util"),l=e("ethjs-unit"),c=i(e("fast-deep-equal")),u=e("./constants"),d=new Error("timeout");function h(e){return e?new o.BN((0,o.stripHexPrefix)(e),16):new o.BN(0)}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${e}'`);return r}))}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield p(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e);return Number.isSafeInteger(t)&&t>0&&t<=u.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new o.BN(t),i=new o.BN(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new o.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,l.toWei)(r,"gwei");if(n.length<=9)return(0,l.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=(0,l.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new o.BN(1))),s},r.weiHexToGweiDec=function(e){const t=new o.BN((0,o.stripHexPrefix)(e),16);return(0,l.fromWei)(t,"gwei").toString(10)},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=h,r.hexToText=function(e){try{const r=(0,o.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return o.BN.isBN(e)?e:new o.BN(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,s.isStrictHexString)(e)?e:`0x${o.BN.isBN(e)?e.toString(16):new o.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.addHexPrefix)(e);return(0,o.isHexString)(t)?(0,o.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.addHexPrefix)(e):e;return!!(0,o.isHexString)(r)&&(0,o.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=f,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):yield f(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===d)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=a.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,c.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1602,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",l=1e14,c=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,p=1e9;function f(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function g(e,t){var r,n,i=e.c,s=t.c,a=e.s,o=t.s,l=e.e,c=t.e;if(!a||!o)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-o:a;if(a!=o)return a;if(r=a<0,n=l==c,!i||!s)return n?0:!i^r?1:-1;if(!n)return l>c^r?1:-1;for(o=(l=i.length)<(c=s.length)?l:c,a=0;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^r?1:-1;return l==c?0:l>c^r?1:-1}function v(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return f(e.e/c)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function b(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,y,k,S,E,T,C,P,M,j,A=$.prototype={constructor:$,toString:null,valueOf:null},N=new $(1),R=20,O=4,I=-7,x=21,L=-1e7,D=1e7,B=!1,W=1,U=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function $(e,t){var r,i,a,l,d,h,p,f,m=this;if(!(m instanceof $))return new $(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>D?m.c=m.e=null:e.e<L?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>D?m.c=m.e=null:(m.e=l,m.c=[e]))}f=String(e)}else{if(!n.test(f=String(e)))return k(m,f,h);m.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(l=f.indexOf("."))>-1&&(f=f.replace(".","")),(d=f.search(/e/i))>0?(l<0&&(l=d),l+=+f.slice(d+1),f=f.substring(0,d)):l<0&&(l=f.length)}else{if(v(t,2,H.length,"Base"),10==t&&G)return Y(m=new $(e),R+m.e+1,O);if(f=String(e),h="number"==typeof e){if(0*e!=0)return k(m,f,h,t);if(m.s=1/e<0?(f=f.slice(1),-1):1,$.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else m.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(r=H.slice(0,t),l=d=0,p=f.length;d<p;d++)if(r.indexOf(i=f.charAt(d))<0){if("."==i){if(d>l){l=p;continue}}else if(!a&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){a=!0,d=-1,l=0;continue}return k(m,String(e),h,t)}h=!1,(l=(f=y(f,t,10,m.s)).indexOf("."))>-1?f=f.replace(".",""):l=f.length}for(d=0;48===f.charCodeAt(d);d++);for(p=f.length;48===f.charCodeAt(--p););if(f=f.slice(d,++p)){if(p-=d,h&&$.DEBUG&&p>15&&(e>u||e!==s(e)))throw Error(o+m.s*e);if((l=l-d-1)>D)m.c=m.e=null;else if(l<L)m.c=[m.e=0];else{if(m.e=l,m.c=[],d=(l+1)%c,l<0&&(d+=c),d<p){for(d&&m.c.push(+f.slice(0,d)),p-=c;d<p;)m.c.push(+f.slice(d,d+=c));d=c-(f=f.slice(d)).length}else d-=p;for(;d--;f+="0");m.c.push(+f)}}else m.c=[m.e=0]}function q(e,t,r,n){var i,s,a,o,l;if(null==r?r=O:v(r,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)l=m(e.c),l=1==n||2==n&&(a<=I||a>=x)?w(l,a):b(l,a,"0");else if(s=(e=Y(new $(e),t,r)).e,o=(l=m(e.c)).length,1==n||2==n&&(t<=s||s<=I)){for(;o<t;l+="0",o++);l=w(l,s)}else if(t-=a,l=b(l,s,"0"),s+1>o){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=s-o)>0)for(s+1==o&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function V(e,t){for(var r,n,i=1,s=new $(e[0]);i<e.length;i++)(!(n=new $(e[i])).s||(r=g(s,n))===t||0===r&&s.s===t)&&(s=n);return s}function K(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>D?e.c=e.e=null:r<L?e.c=[e.e=0]:(e.e=r,e.c=t),e}function Y(e,t,r,n){var a,o,u,h,p,f,m,g=e.c,v=d;if(g){e:{for(a=1,h=g[0];h>=10;h/=10,a++);if((o=t-a)<0)o+=c,u=t,p=g[f=0],m=s(p/v[a-u-1]%10);else if((f=i((o+1)/c))>=g.length){if(!n)break e;for(;g.length<=f;g.push(0));p=m=0,a=1,u=(o%=c)-c+1}else{for(p=h=g[f],a=1;h>=10;h/=10,a++);m=(u=(o%=c)-c+a)<0?0:s(p/v[a-u-1]%10)}if(n=n||t<0||null!=g[f+1]||(u<0?p:p%v[a-u-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(o>0?u>0?p/v[a-u]:0:g[f-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=v[(c-t%c)%c],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=f,h=1,f--):(g.length=f+1,h=v[c-o],g[f]=u>0?s(p/v[a-u]%v[u])*h:0),n)for(;;){if(0==f){for(o=1,u=g[0];u>=10;u/=10,o++);for(u=g[0]+=h,h=1;u>=10;u/=10,h++);o!=h&&(e.e++,g[0]==l&&(g[0]=1));break}if(g[f]+=h,g[f]!=l)break;g[f--]=0,h=1}for(o=g.length;0===g[--o];g.pop());}e.e>D?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function J(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=I||r>=x?w(t,r):b(t,r,"0"),e.s<0?"-"+t:t)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(r=e[t],0,p,t),R=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(r=e[t],0,8,t),O=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(v(r[0],-p,0,t),v(r[1],0,p,t),I=r[0],x=r[1]):(v(r,-p,p,t),I=-(x=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)v(r[0],-p,-1,t),v(r[1],1,p,t),L=r[0],D=r[1];else{if(v(r,-p,p,t),!r)throw Error(a+t+" cannot be zero: "+r);L=-(D=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(a+"crypto unavailable");B=r}else B=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(r=e[t],0,9,t),W=r),e.hasOwnProperty(t="POW_PRECISION")&&(v(r=e[t],0,p,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);F=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);G="0123456789"==r.slice(0,10),H=r}}return{DECIMAL_PLACES:R,ROUNDING_MODE:O,EXPONENTIAL_AT:[I,x],RANGE:[L,D],CRYPTO:B,MODULO_MODE:W,POW_PRECISION:U,FORMAT:F,ALPHABET:H}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-p&&i<=p&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=l||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return V(arguments,-1)},$.minimum=$.min=function(){return V(arguments,1)},$.random=(S=9007199254740992,E=Math.random()*S&2097151?function(){return s(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,l,u=0,h=[],f=new $(N);if(null==e?e=R:v(e,0,p),o=i(e/c),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)(l=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(h.push(l%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw B=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)(l=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(h.push(l%1e14),u+=7);u=o/7}if(!B)for(;u<o;)(l=E())<9e15&&(h[u++]=l%1e14);for(o=h[--u],e%=c,o&&e&&(l=d[c-e],h[u]=s(o/l)*l);0===h[u];h.pop(),u--);if(u<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(u=1,l=h[0];l>=10;l/=10,u++);u<c&&(n-=c-u)}return f.e=n,f.c=h,f}),$.sum=function(){for(var e=1,t=arguments,r=new $(t[0]);e<t.length;)r=r.plus(t[e++]);return r},y=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,a=[0],o=0,l=e.length;o<l;){for(s=a.length;s--;a[s]*=t);for(a[0]+=n.indexOf(e.charAt(o++)),i=0;i<a.length;i++)a[i]>r-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/r|0,a[i]%=r)}return a.reverse()}return function(n,i,s,a,o){var l,c,u,d,h,p,f,g,v=n.indexOf("."),_=R,w=O;for(v>=0&&(d=U,U=0,n=n.replace(".",""),p=(g=new $(i)).pow(n.length-v),U=d,g.c=t(b(m(p.c),p.e,"0"),10,s,e),g.e=g.c.length),u=d=(f=t(n,i,s,o?(l=H,e):(l=e,H))).length;0==f[--d];f.pop());if(!f[0])return l.charAt(0);if(v<0?--u:(p.c=f,p.e=u,p.s=a,f=(p=r(p,g,_,w,s)).c,h=p.r,u=p.e),v=f[c=u+_+1],d=s/2,h=h||c<0||null!=f[c+1],h=w<4?(null!=v||h)&&(0==w||w==(p.s<0?3:2)):v>d||v==d&&(4==w||h||6==w&&1&f[c-1]||w==(p.s<0?8:7)),c<1||!f[0])n=h?b(l.charAt(1),-_,l.charAt(0)):l.charAt(0);else{if(f.length=c,h)for(--s;++f[--c]>s;)f[c]=0,c||(++u,f=[1].concat(f));for(d=f.length;!f[--d];);for(v=0,n="";v<=d;n+=l.charAt(f[v++]));n=b(n,u,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,a,o=0,l=e.length,c=t%h,u=t/h|0;for(e=e.slice();l--;)o=((i=c*(s=e[l]%h)+(n=u*s+(a=e[l]/h|0)*c)%h*h+o)/r|0)+(n/h|0)+u*a,e[l]=i%r;return o&&(e=[o].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,a,o,u){var d,h,p,m,g,v,_,w,b,y,k,S,E,T,C,P,M,j=n.s==i.s?1:-1,A=n.c,N=i.c;if(!(A&&A[0]&&N&&N[0]))return new $(n.s&&i.s&&(A?!N||A[0]!=N[0]:N)?A&&0==A[0]||!N?0*j:j/0:NaN);for(b=(w=new $(j)).c=[],j=a+(h=n.e-i.e)+1,u||(u=l,h=f(n.e/c)-f(i.e/c),j=j/c|0),p=0;N[p]==(A[p]||0);p++);if(N[p]>(A[p]||0)&&h--,j<0)b.push(1),m=!0;else{for(T=A.length,P=N.length,p=0,j+=2,(g=s(u/(N[0]+1)))>1&&(N=e(N,g,u),A=e(A,g,u),P=N.length,T=A.length),E=P,k=(y=A.slice(0,P)).length;k<P;y[k++]=0);M=N.slice(),M=[0].concat(M),C=N[0],N[1]>=u/2&&C++;do{if(g=0,(d=t(N,y,P,k))<0){if(S=y[0],P!=k&&(S=S*u+(y[1]||0)),(g=s(S/C))>1)for(g>=u&&(g=u-1),_=(v=e(N,g,u)).length,k=y.length;1==t(v,y,_,k);)g--,r(v,P<_?M:N,_,u),_=v.length,d=1;else 0==g&&(d=g=1),_=(v=N.slice()).length;if(_<k&&(v=[0].concat(v)),r(y,v,k,u),k=y.length,-1==d)for(;t(N,y,P,k)<1;)g++,r(y,P<k?M:N,k,u),k=y.length}else 0===d&&(g++,y=[0]);b[p++]=g,y[0]?y[k++]=A[E]||0:(y=[A[E]],k=1)}while((E++<T||null!=y[0])&&j--);m=null!=y[0],b[0]||b.splice(0,1)}if(u==l){for(p=1,j=b[0];j>=10;j/=10,p++);Y(w,a+(w.e=p+h*c-1)+1,o,m)}else w.e=h,w.r=+m;return w}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,C=/^([^.]+)\.$/,P=/^\.([^.]+)$/,M=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(e,t,r,n){var i,s=r?t:t.replace(j,"");if(M.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(T,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(C,"$1").replace(P,"0.$1")),t!=s))return new $(s,i);if($.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return g(this,new $(e,t))},A.decimalPlaces=A.dp=function(e,t){var r,n,i,s=this;if(null!=e)return v(e,0,p),null==t?t=O:v(t,0,8),Y(new $(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-f(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},A.dividedBy=A.div=function(e,t){return r(this,new $(e,t),R,O)},A.dividedToIntegerBy=A.idiv=function(e,t){return r(this,new $(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var r,n,o,l,u,d,h,p,f=this;if((e=new $(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+J(e));if(null!=t&&(t=new $(t)),u=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return p=new $(Math.pow(+J(f),u?e.s*(2-_(e)):+J(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new $(NaN);(n=!d&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||u&&f.c[1]>=24e7:f.c[0]<8e13||u&&f.c[0]<=9999975e7)))return l=f.s<0&&_(e)?-0:0,f.e>-1&&(l=1/l),new $(d?1/l:l);U&&(l=i(U/c+2))}for(u?(r=new $(.5),d&&(e.s=1),h=_(e)):h=(o=Math.abs(+J(e)))%2,p=new $(N);;){if(h){if(!(p=p.times(f)).c)break;l?p.c.length>l&&(p.c.length=l):n&&(p=p.mod(t))}if(o){if(0===(o=s(o/2)))break;h=o%2}else if(Y(e=e.times(r),e.e+1,1),e.e>14)h=_(e);else{if(0===(o=+J(e)))break;h=o%2}f=f.times(f),l?f.c&&f.c.length>l&&(f.c.length=l):n&&(f=f.mod(t))}return n?p:(d&&(p=N.div(p)),t?p.mod(t):l?Y(p,U,O,undefined):p)},A.integerValue=function(e){var t=new $(this);return null==e?e=O:v(e,0,8),Y(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===g(this,new $(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return g(this,new $(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=g(this,new $(e,t)))||0===t},A.isInteger=function(){return!!this.c&&f(this.e/c)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return g(this,new $(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=g(this,new $(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var r,n,i,s,a=this,o=a.s;if(t=(e=new $(e,t)).s,!o||!t)return new $(NaN);if(o!=t)return e.s=-t,a.plus(e);var u=a.e/c,d=e.e/c,h=a.c,p=e.c;if(!u||!d){if(!h||!p)return h?(e.s=-t,e):new $(p?a:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new $(h[0]?a:3==O?-0:0)}if(u=f(u),d=f(d),h=h.slice(),o=u-d){for((s=o<0)?(o=-o,i=h):(d=u,i=p),i.reverse(),t=o;t--;i.push(0));i.reverse()}else for(n=(s=(o=h.length)<(t=p.length))?o:t,o=t=0;t<n;t++)if(h[t]!=p[t]){s=h[t]<p[t];break}if(s&&(i=h,h=p,p=i,e.s=-e.s),(t=(n=p.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=l-1;n>o;){if(h[--n]<p[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=l}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--d);return h[0]?K(e,h,d):(e.s=3==O?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var n,i,s=this;return e=new $(e,t),!s.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||s.c&&!s.c[0]?new $(s):(9==W?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,W),(e=s.minus(n.times(e))).c[0]||1!=W||(e.s=s.s),e)},A.multipliedBy=A.times=function(e,t){var r,n,i,s,a,o,u,d,p,m,g,v,_,w,b,y=this,k=y.c,S=(e=new $(e,t)).c;if(!(k&&S&&k[0]&&S[0]))return!y.s||!e.s||k&&!k[0]&&!S||S&&!S[0]&&!k?e.c=e.e=e.s=null:(e.s*=y.s,k&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=f(y.e/c)+f(e.e/c),e.s*=y.s,(u=k.length)<(m=S.length)&&(_=k,k=S,S=_,i=u,u=m,m=i),i=u+m,_=[];i--;_.push(0));for(w=l,b=h,i=m;--i>=0;){for(r=0,g=S[i]%b,v=S[i]/b|0,s=i+(a=u);s>i;)r=((d=g*(d=k[--a]%b)+(o=v*d+(p=k[a]/b|0)*g)%b*b+_[s]+r)/w|0)+(o/b|0)+v*p,_[s--]=d%w;_[s]=r}return r?++n:_.splice(0,1),K(e,_,n)},A.negated=function(){var e=new $(this);return e.s=-e.s||null,e},A.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new $(e,t)).s,!i||!t)return new $(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/c,a=e.e/c,o=n.c,u=e.c;if(!s||!a){if(!o||!u)return new $(i/0);if(!o[0]||!u[0])return u[0]?e:new $(o[0]?n:0*i)}if(s=f(s),a=f(a),o=o.slice(),i=s-a){for(i>0?(a=s,r=u):(i=-i,r=o),r.reverse();i--;r.push(0));r.reverse()}for((i=o.length)-(t=u.length)<0&&(r=u,u=o,o=r,t=i),i=0;t;)i=(o[--t]=o[t]+u[t]+i)/l|0,o[t]=l===o[t]?0:o[t]%l;return i&&(o=[i].concat(o),++a),K(e,o,a)},A.precision=A.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return v(e,1,p),null==t?t=O:v(t,0,8),Y(new $(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},A.shiftedBy=function(e){return v(e,-9007199254740991,u),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,n,i,s,a=this,o=a.c,l=a.s,c=a.e,u=R+4,d=new $("0.5");if(1!==l||!o||!o[0])return new $(!l||l<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(l=Math.sqrt(+J(a)))||l==1/0?(((t=m(o)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=f((c+1)/2)-(c<0||c%2),n=new $(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new $(l+""),n.c[0])for((l=(c=n.e)+u)<3&&(l=0);;)if(s=n,n=d.times(s.plus(r(a,s,u,1))),m(s.c).slice(0,l)===(t=m(n.c)).slice(0,l)){if(n.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Y(n,n.e+R+2,1),e=!n.times(n).eq(a));break}if(!i&&(Y(s,s.e+R+2,0),s.times(s).eq(a))){n=s;break}u+=4,l+=4,i=1}return Y(n,n.e+R+1,O,e)},A.toExponential=function(e,t){return null!=e&&(v(e,0,p),e++),q(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(v(e,0,p),e=e+this.e+1),q(this,e,t)},A.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=F;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),l=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",d=o[0],h=o[1],p=i.s<0,f=p?d.slice(1):d,m=f.length;if(c&&(s=l,l=c,c=s,m-=s),l>0&&m>0){for(s=m%l||l,d=f.substr(0,s);s<m;s+=l)d+=u+f.substr(s,l);c>0&&(d+=u+f.slice(s)),p&&(d="-"+d)}n=h?d+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):d}return(r.prefix||"")+n+(r.suffix||"")},A.toFraction=function(e){var t,n,i,s,o,l,u,h,p,f,g,v,_=this,w=_.c;if(null!=e&&(!(u=new $(e)).isInteger()&&(u.c||1!==u.s)||u.lt(N)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+J(u));if(!w)return new $(_);for(t=new $(N),p=n=new $(N),i=h=new $(N),v=m(w),o=t.e=v.length-_.e-1,t.c[0]=d[(l=o%c)<0?c+l:l],e=!e||u.comparedTo(t)>0?o>0?t:p:u,l=D,D=1/0,u=new $(v),h.c[0]=0;f=r(u,t,0,1),1!=(s=n.plus(f.times(i))).comparedTo(e);)n=i,i=s,p=h.plus(f.times(s=p)),h=s,t=u.minus(f.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(p)),n=n.plus(s.times(i)),h.s=p.s=_.s,g=r(p,i,o*=2,O).minus(_).abs().comparedTo(r(h,n,o,O).minus(_).abs())<1?[p,i]:[h,n],D=l,g},A.toNumber=function(){return+J(this)},A.toPrecision=function(e,t){return null!=e&&v(e,1,p),q(this,e,t,2)},A.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=I||i>=x?w(m(r.c),i):b(m(r.c),i,"0"):10===e&&G?t=b(m((r=Y(new $(r),R+i+1,O)).c),r.e,"0"):(v(e,2,H.length,"Base"),t=y(b(m(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return J(this)},A._isBigNumber=!0,null!=t&&$.set(t),$}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[1603,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={name:"@metamask/smart-transactions-controller",version:"6.2.2",description:"Improves success rates for swaps by trialing transactions privately and finding minimum fees",repository:{type:"git",url:"https://github.com/MetaMask/smart-transactions-controller.git"},license:"SEE LICENSE IN LICENSE",main:"dist/index.js",types:"dist/index.d.ts",files:["dist/"],scripts:{build:"tsc --project .","build:clean":"rm -rf dist && yarn build","build:link":"yarn build && cd dist && yarn link && rm -rf node_modules && cd ..",lint:"yarn lint:eslint && yarn lint:misc --check","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' '**/*.yml' '!.yarnrc.yml' --ignore-path .gitignore",prepack:"./scripts/prepack.sh",test:"jest","test:watch":"jest --watchAll"},dependencies:{"@ethersproject/bignumber":"^5.7.0","@ethersproject/bytes":"^5.7.0","@ethersproject/providers":"^5.7.0","@metamask/base-controller":"^3.2.1","@metamask/controller-utils":"^5.0.0","@metamask/network-controller":"^15.0.0","bignumber.js":"^9.0.1","fast-json-patch":"^3.1.0",lodash:"^4.17.21"},devDependencies:{"@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"^3.1.0","@metamask/eslint-config":"^10.0.0","@metamask/eslint-config-jest":"^10.0.0","@metamask/eslint-config-nodejs":"^10.0.0","@metamask/eslint-config-typescript":"^10.0.0","@types/jest":"^26.0.24","@types/lodash":"^4.14.194","@types/node":"^16.18.31","@typescript-eslint/eslint-plugin":"^5.33.0","@typescript-eslint/parser":"^5.33.0",eslint:"^8.21.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jest":"^26.8.2","eslint-plugin-jsdoc":"^39.2.9","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1","isomorphic-fetch":"^3.0.0",jest:"^26.4.2",nock:"^13.3.1",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.4.3","ts-jest":"^26.5.6",typescript:"~4.4.4"},packageManager:"yarn@3.2.1",engines:{node:">=16.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>keccak":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>secp256k1":!1,"@metamask/controller-utils>babel-runtime>core-js":!1}}}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/package.json"}],[1604,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e[e.Unverified=0]="Unverified",e[e.Blocked=1]="Blocked",e[e.Verified=2]="Verified",e[e.Unavailable=3]="Unavailable",e))(n||{});r.SnapsRegistryStatus=n}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4CA3O64H.js"}],[1605,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4URGXJP7.js"}],[1606,{"@metamask/snaps-rpc-methods":1722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-rpc-methods"),i=Object.freeze(["snap_dialog","snap_manageState","snap_notify","snap_getLocale",n.SnapEndowments.Cronjob,n.SnapEndowments.HomePage,n.SnapEndowments.LifecycleHooks,n.SnapEndowments.EthereumProvider,n.SnapEndowments.TransactionInsight,n.SnapEndowments.SignatureInsight]);r.ALLOWED_PERMISSIONS=i}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-5YBORD3A.js"}],[1607,{"./chunk-CFTCANAK.js":1613,"./chunk-EXN2TFDJ.js":1616,"@metamask/post-message-stream":1501},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s=e("./chunk-CFTCANAK.js"),a=e("./chunk-EXN2TFDJ.js"),o=e("@metamask/post-message-stream"),l=class extends s.ProxyExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r,stream:new(0,o.BrowserRuntimePostMessageStream)({name:"parent",target:"child"})}),a.__privateAdd.call(void 0,this,n),this.documentUrl=e}async initEnvStream(e){return await a.__privateMethod.call(void 0,this,n,i).call(this),super.initEnvStream(e)}};n=new WeakSet,i=async function(){await chrome.offscreen.hasDocument()||await chrome.offscreen.createDocument({justification:"MetaMask Snaps Execution Environment",reasons:["IFRAME_SCRIPTING"],url:this.documentUrl.toString()})},r.OffscreenExecutionService=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-6HI7J27U.js"}],[1608,{"./chunk-LWBPKSU2.js":1622,"./chunk-RDBT3ZJQ.js":1629,"./chunk-XWDEGRM5.js":1635,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-XWDEGRM5.js"),i=e("./chunk-LWBPKSU2.js"),s=e("./chunk-RDBT3ZJQ.js"),a=e("@metamask/utils");r.detectSnapLocation=function(e,t){const r=t?.allowHttp??!1,o=t?.allowLocal??!1,l=new URL(e);switch(l.protocol){case"npm:":return new(0,n.NpmLocation)(l,t);case"local:":return a.assert.call(void 0,o,new TypeError("Fetching local snaps is disabled.")),new(0,i.LocalLocation)(l,t);case"http:":case"https:":return a.assert.call(void 0,r,new TypeError("Fetching snaps through http/https is disabled.")),new(0,s.HttpLocation)(l,t);default:throw new TypeError(`Unrecognized "${l.protocol}" snap location protocol.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-7WOG63YY.js"}],[1609,{"./chunk-EXN2TFDJ.js":1616,"@metamask/post-message-stream":1501},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/post-message-stream"),c=class extends l.BasePostMessageStream{constructor({stream:e,jobId:t}){super(),o.__privateAdd.call(void 0,this,s),o.__privateAdd.call(void 0,this,n,void 0),o.__privateAdd.call(void 0,this,i,void 0),o.__privateSet.call(void 0,this,n,e),o.__privateSet.call(void 0,this,i,t),o.__privateGet.call(void 0,this,n).on("data",o.__privateMethod.call(void 0,this,s,a).bind(this))}_postMessage(e){o.__privateGet.call(void 0,this,n).write({jobId:o.__privateGet.call(void 0,this,i),data:e})}};n=new WeakMap,i=new WeakMap,s=new WeakSet,a=function(e){e.jobId===o.__privateGet.call(void 0,this,i)&&this.push(e.data)},r.ProxyPostMessageStream=c}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-7Y6P5FRN.js"}],[161,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:73,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[1610,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.RequestQueue=class{constructor(e){this.maxQueueSize=e,this.queueSizes=new Map}increment(e){const t=this.queueSizes.get(e)??0;if(t>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(e,t+1)}decrement(e){const t=this.queueSizes.get(e)??0;if(0===t)throw new Error(`Cannot decrement, ${e} does not have any outstanding requests.`);this.queueSizes.set(e,t-1)}get(e){return this.queueSizes.get(e)??0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-AP7CJ6DA.js"}],[1611,{"./chunk-5YBORD3A.js":1606,"./chunk-7WOG63YY.js":1608,"./chunk-AP7CJ6DA.js":1610,"./chunk-BO2ZDPWV.js":1612,"./chunk-EXN2TFDJ.js":1616,"./chunk-NOLPMHXS.js":1624,"./chunk-NXZVKBSV.js":1625,"./chunk-XE5IWVNV.js":1634,"@metamask/base-controller":1066,"@metamask/permission-controller":1649,"@metamask/rpc-errors":1562,"@metamask/snaps-rpc-methods":1722,"@metamask/snaps-sdk":1723,"@metamask/snaps-utils":1759,"@metamask/utils":1886,"@xstate/fsm":2142,nanoid:1657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-7WOG63YY.js"),i=e("./chunk-AP7CJ6DA.js"),s=e("./chunk-5YBORD3A.js"),a=e("./chunk-BO2ZDPWV.js"),o=e("./chunk-NXZVKBSV.js"),l=e("./chunk-XE5IWVNV.js"),c=e("./chunk-NOLPMHXS.js"),u=e("./chunk-EXN2TFDJ.js"),d=e("@metamask/base-controller"),h=e("@metamask/permission-controller"),p=e("@metamask/rpc-errors"),f=e("@metamask/snaps-rpc-methods"),m=e("@metamask/snaps-sdk"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),_=e("@xstate/fsm"),w=e("nanoid"),b="SnapController",y="wallet_installSnap",k="wallet_updateSnap",S="wallet_installSnapResult",E=new Set(["initialPermissions","id","version","enabled","blocked"]),T={snaps:{},snapStates:{},unencryptedSnapStates:{}};function C(e){return Object.keys(e).reduce(((t,r)=>(E.has(r)&&(t[r]=e[r]),t)),{})}var P,M,j,A,N,R,O,I,x,L,D,B,W,U,F,H,G,$,q,V,K,Y,J,X,z,Z,Q,ee,te,re,ne,ie,se,ae,oe,le,ce,ue,de,he,pe,fe,me,ge,ve,_e,we,be,ye,ke,Se,Ee,Te,Ce,Pe,Me,je,Ae,Ne,Re,Oe,Ie,xe,Le,De,Be,We,Ue,Fe,He,Ge,$e,qe,Ve,Ke,Ye,Je,Xe,ze,Ze,Qe,et,tt,rt,nt,it,st,at,ot,lt,ct,ut,dt,ht,pt,ft,mt=class extends d.BaseController{constructor({closeAllConnections:e,messenger:t,state:r,dynamicPermissions:i=["eth_accounts"],environmentEndowmentPermissions:s=[],excludedPermissions:a={},idleTimeCheckInterval:o=v.inMilliseconds.call(void 0,5,v.Duration.Second),maxIdleTime:l=v.inMilliseconds.call(void 0,30,v.Duration.Second),maxRequestTime:c=v.inMilliseconds.call(void 0,60,v.Duration.Second),maxInitTime:d=v.inMilliseconds.call(void 0,60,v.Duration.Second),fetchFunction:h=globalThis.fetch.bind(globalThis),featureFlags:p={},detectSnapLocation:f=n.detectSnapLocation,preinstalledSnaps:_}){super({messenger:t,metadata:{snapStates:{persist:!0,anonymous:!1},unencryptedSnapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).filter((e=>e.status!==g.SnapStatus.Installing)).map((e=>({...e,status:g.SnapStatus.Stopped}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),anonymous:!1}},name:"SnapController",state:{...T,...r}}),u.__privateAdd.call(void 0,this,F),u.__privateAdd.call(void 0,this,G),u.__privateAdd.call(void 0,this,q),u.__privateAdd.call(void 0,this,K),u.__privateAdd.call(void 0,this,J),u.__privateAdd.call(void 0,this,z),u.__privateAdd.call(void 0,this,Q),u.__privateAdd.call(void 0,this,te),u.__privateAdd.call(void 0,this,ne),u.__privateAdd.call(void 0,this,se),u.__privateAdd.call(void 0,this,oe),u.__privateAdd.call(void 0,this,ce),u.__privateAdd.call(void 0,this,de),u.__privateAdd.call(void 0,this,pe),u.__privateAdd.call(void 0,this,me),u.__privateAdd.call(void 0,this,ve),u.__privateAdd.call(void 0,this,we),u.__privateAdd.call(void 0,this,ye),u.__privateAdd.call(void 0,this,Se),u.__privateAdd.call(void 0,this,Te),u.__privateAdd.call(void 0,this,Pe),u.__privateAdd.call(void 0,this,je),u.__privateAdd.call(void 0,this,Ne),u.__privateAdd.call(void 0,this,Oe),u.__privateAdd.call(void 0,this,xe),u.__privateAdd.call(void 0,this,De),u.__privateAdd.call(void 0,this,We),u.__privateAdd.call(void 0,this,Fe),u.__privateAdd.call(void 0,this,Ge),u.__privateAdd.call(void 0,this,qe),u.__privateAdd.call(void 0,this,Ke),u.__privateAdd.call(void 0,this,Je),u.__privateAdd.call(void 0,this,ze),u.__privateAdd.call(void 0,this,Qe),u.__privateAdd.call(void 0,this,tt),u.__privateAdd.call(void 0,this,nt),u.__privateAdd.call(void 0,this,st),u.__privateAdd.call(void 0,this,ot),u.__privateAdd.call(void 0,this,ct),u.__privateAdd.call(void 0,this,dt),u.__privateAdd.call(void 0,this,pt),u.__privateAdd.call(void 0,this,P,void 0),u.__privateAdd.call(void 0,this,M,void 0),u.__privateAdd.call(void 0,this,j,void 0),u.__privateAdd.call(void 0,this,A,void 0),u.__privateAdd.call(void 0,this,N,void 0),u.__privateAdd.call(void 0,this,R,void 0),u.__privateAdd.call(void 0,this,O,void 0),u.__privateAdd.call(void 0,this,I,void 0),u.__privateAdd.call(void 0,this,x,void 0),u.__privateAdd.call(void 0,this,L,void 0),u.__privateAdd.call(void 0,this,D,void 0),u.__privateAdd.call(void 0,this,B,void 0),u.__privateAdd.call(void 0,this,W,void 0),u.__privateAdd.call(void 0,this,U,void 0),u.__privateSet.call(void 0,this,P,e),u.__privateSet.call(void 0,this,M,i),u.__privateSet.call(void 0,this,j,s),u.__privateSet.call(void 0,this,A,a),u.__privateSet.call(void 0,this,N,p),u.__privateSet.call(void 0,this,R,h),u.__privateSet.call(void 0,this,O,o),u.__privateSet.call(void 0,this,I,l),this.maxRequestTime=c,u.__privateSet.call(void 0,this,x,d),u.__privateSet.call(void 0,this,L,f),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),u.__privateSet.call(void 0,this,B,new Map),u.__privateSet.call(void 0,this,D,new Map),u.__privateMethod.call(void 0,this,K,Y).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.subscribe("SnapController:snapInstalled",(({id:e})=>{u.__privateMethod.call(void 0,this,pt,ft).call(this,e,g.HandlerType.OnInstall).catch((t=>{g.logError.call(void 0,`Error when calling \`onInstall\` lifecycle hook for snap "${e}": ${m.getErrorMessage.call(void 0,t)}`)}))})),this.messagingSystem.subscribe("SnapController:snapUpdated",(({id:e})=>{u.__privateMethod.call(void 0,this,pt,ft).call(this,e,g.HandlerType.OnUpdate).catch((t=>{g.logError.call(void 0,`Error when calling \`onUpdate\` lifecycle hook for snap "${e}": ${m.getErrorMessage.call(void 0,t)}`)}))})),u.__privateMethod.call(void 0,this,F,H).call(this),u.__privateMethod.call(void 0,this,G,$).call(this),_&&u.__privateMethod.call(void 0,this,q,V).call(this,_),Object.values(this.state?.snaps??{}).forEach((e=>u.__privateMethod.call(void 0,this,st,at).call(this,e.id)))}async updateBlockedSnaps(){await this.messagingSystem.call("SnapsRegistry:update");const e=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((e,t)=>(e[t.id]={version:t.version,checksum:t.manifest.source.shasum},e)),{}));await Promise.all(Object.entries(e).map((async([e,{status:t,reason:r}])=>1===t?u.__privateMethod.call(void 0,this,J,X).call(this,e,r):u.__privateMethod.call(void 0,this,z,Z).call(this,e))))}_onUnhandledSnapError(e,t){this.stopSnap(e,g.SnapStatusEvents.Crash).catch((e=>{g.logError.call(void 0,e)}))}_onOutboundRequest(e){const t=u.__privateMethod.call(void 0,this,nt,it).call(this,e);t.pendingInboundRequests.filter((e=>"running"===e.timer.status)).forEach((e=>e.timer.pause())),t.pendingOutboundRequests+=1}_onOutboundResponse(e){const t=u.__privateMethod.call(void 0,this,nt,it).call(this,e);t.pendingOutboundRequests-=1,0===t.pendingOutboundRequests&&t.pendingInboundRequests.filter((e=>"paused"===e.timer.status)).forEach((e=>e.timer.resume()))}async startSnap(e){const t=this.state.snaps[e];if(!1===t.enabled)throw new Error(`Snap "${e}" is disabled.`);await u.__privateMethod.call(void 0,this,Se,Ee).call(this,{snapId:e,sourceCode:t.sourceCode})}enableSnap(e){if(this.getExpect(e),this.state.snaps[e].blocked)throw new Error(`Snap "${e}" is blocked and cannot be enabled.`);this.update((t=>{t.snaps[e].enabled=!0})),this.messagingSystem.publish("SnapController:snapEnabled",this.getTruncatedExpect(e))}async disableSnap(e){if(!this.has(e))throw new Error(`Snap "${e}" not found.`);this.update((t=>{t.snaps[e].enabled=!1})),this.isRunning(e)&&await this.stopSnap(e,g.SnapStatusEvents.Stop),this.messagingSystem.publish("SnapController:snapDisabled",this.getTruncatedExpect(e))}async stopSnap(e,t=g.SnapStatusEvents.Stop){var r;const n=u.__privateMethod.call(void 0,this,tt,rt).call(this,e);if(!n)throw new Error(`The snap "${e}" is not running.`);n.lastRequest=null,n.pendingInboundRequests=[],n.pendingOutboundRequests=0;try{this.isRunning(e)&&(null==(r=u.__privateGet.call(void 0,this,P))||r.call(this,e),await u.__privateMethod.call(void 0,this,se,ae).call(this,e))}finally{this.isRunning(e)&&u.__privateMethod.call(void 0,this,ne,ie).call(this,e,t)}}isRunning(e){return"running"===this.getExpect(e).status}has(e){return Boolean(this.get(e))}get(e){return this.state.snaps[e]}getExpect(e){const t=this.get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" not found.`)),t}getTruncated(e){const t=this.get(e);return t?C(t):null}getTruncatedExpect(e){return C(this.getExpect(e))}updateSnapState(e,t,r){this.update((n=>{r?n.snapStates[e]=t:n.unencryptedSnapStates[e]=t}))}clearSnapState(e,t){this.update((r=>{t?r.snapStates[e]=null:r.unencryptedSnapStates[e]=null}))}getSnapState(e,t){return(t?this.state.snapStates[e]:this.state.unencryptedSnapStates[e])??null}async getSnapFile(e,t,r=m.AuxiliaryFileEncoding.Base64){const n=this.getExpect(e),i=g.normalizeRelative.call(void 0,t),s=n.auxiliaryFiles?.find((e=>e.path===i))?.value;return s?g.encodeAuxiliaryFile.call(void 0,s,r):null}async clearState(){const e=Object.keys(this.state.snaps);u.__privateGet.call(void 0,this,P)&&e.forEach((e=>{var t;null==(t=u.__privateGet.call(void 0,this,P))||t.call(this,e)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),e.forEach((e=>u.__privateMethod.call(void 0,this,pe,fe).call(this,e))),this.update((e=>{e.snaps={},e.snapStates={}}))}async removeSnap(e){return this.removeSnaps([e])}async removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap ids.");e.forEach((e=>{const t=this.getExpect(e);v.assert.call(void 0,!1!==t.removable,`${e} is not removable.`)})),await Promise.all(e.map((async e=>{const t=this.getExpect(e),r=this.getTruncatedExpect(e);await this.disableSnap(e),u.__privateMethod.call(void 0,this,pe,fe).call(this,e),u.__privateMethod.call(void 0,this,de,he).call(this,e),u.__privateGet.call(void 0,this,D).delete(e),this.update((t=>{delete t.snaps[e],delete t.snapStates[e]})),t.status!==g.SnapStatus.Installing&&this.messagingSystem.publish("SnapController:snapUninstalled",r)})))}removeSnapFromSubject(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),n=r?.[f.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(!n)return;if(Boolean(n.value?.[t])){const r={...n.value};delete r[t],Object.keys(r).length>0?this.messagingSystem.call("PermissionController:updateCaveat",e,f.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,r):this.messagingSystem.call("PermissionController:revokePermissions",{[e]:[f.WALLET_SNAP_PERMISSION_KEY]})}}revokeDynamicSnapPermissions(e,t){v.assert.call(void 0,t.every((e=>u.__privateGet.call(void 0,this,M).includes(e))),"Non-dynamic permissions cannot be revoked"),this.messagingSystem.call("PermissionController:revokePermissions",{[e]:t})}incrementActiveReferences(e){u.__privateMethod.call(void 0,this,nt,it).call(this,e).activeReferences+=1}decrementActiveReferences(e){const t=u.__privateMethod.call(void 0,this,nt,it).call(this,e);v.assert.call(void 0,t.activeReferences>0,"SnapController reference management is in an invalid state."),t.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(C)}getPermittedSnaps(e){const t=this.messagingSystem.call("PermissionController:getPermissions",e)??{},r=t[f.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds))?.value??{};return Object.keys(r).reduce(((e,t)=>{const r=this.get(t),n=this.getTruncated(t);return n&&r?.status!==g.SnapStatus.Installing&&(e[t]=n),e}),{})}async installSnaps(e,t){const r={},n=Object.keys(t),i=[],s=[];try{for(const[n,{version:a}]of Object.entries(t)){g.assertIsValidSnapId.call(void 0,n);const[t,o]=g.resolveVersionRange.call(void 0,a);if(t)throw p.rpcErrors.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${a}".`);const l=u.__privateGet.call(void 0,this,L).call(this,n,{versionRange:o,fetch:u.__privateGet.call(void 0,this,R),allowLocal:u.__privateGet.call(void 0,this,N).allowLocalSnaps,resolveVersion:async e=>u.__privateGet.call(void 0,this,N).requireAllowlist?await u.__privateMethod.call(void 0,this,we,be).call(this,n,e):e}),c=this.has(n)&&!l.shouldAlwaysReload;if(c&&u.__privateMethod.call(void 0,this,dt,ht).call(this,n,o)){const e=this.getExpect(n);i.push({snapId:n,oldVersion:e.version});let t=u.__privateMethod.call(void 0,this,Ke,Ye).call(this,n);if(void 0!==t)throw new Error("This snap is already being updated.");t=u.__privateMethod.call(void 0,this,Je,Xe).call(this,n),t.newVersion=o}else c||s.push(n);r[n]=await this.processRequestedSnap(e,n,l,o)}s.forEach((t=>this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),e))),i.forEach((({snapId:t,oldVersion:r})=>this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),r,e))),n.forEach((e=>u.__privateGet.call(void 0,this,B).delete(e)))}catch(e){const t=s.filter((e=>this.has(e)));await this.removeSnaps(t);const r=[...u.__privateGet.call(void 0,this,B).keys()],n=i.map((({snapId:e})=>e)).filter((e=>r.includes(e)));throw await u.__privateMethod.call(void 0,this,Qe,et).call(this,n),e}return r}async processRequestedSnap(e,t,r,n){const i=this.getTruncated(t);if(i&&!r.shouldAlwaysReload)return v.satisfiesVersionRange.call(void 0,i.version,n)?i:await this.updateSnap(e,t,r,n,!1);let s=u.__privateMethod.call(void 0,this,me,ge).call(this,{origin:e,snapId:t,type:y});this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!1),i&&this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),i&&r.shouldAlwaysReload&&u.__privateMethod.call(void 0,this,pe,fe).call(this,t);try{const{sourceCode:i}=await u.__privateMethod.call(void 0,this,ye,ke).call(this,{origin:e,id:t,location:r,versionRange:n});await this.authorize(t,s),s=u.__privateMethod.call(void 0,this,me,ge).call(this,{origin:e,snapId:t,type:S}),await u.__privateMethod.call(void 0,this,Se,Ee).call(this,{snapId:t,sourceCode:i});const a=this.getTruncatedExpect(t);return u.__privateMethod.call(void 0,this,ve,_e).call(this,s.id,{loading:!1,type:y}),a}catch(r){g.logError.call(void 0,`Error when adding ${t}.`,r);const n=r instanceof Error?r.message:r.toString();throw u.__privateMethod.call(void 0,this,ve,_e).call(this,s.id,{loading:!1,type:y,error:n}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!1,n),r}}async updateSnap(e,t,r,n=g.DEFAULT_REQUESTED_SNAP_VERSION,i=!0){if(!v.isValidSemVerRange.call(void 0,n))throw new Error(`Received invalid snap version range: "${n}".`);let s=u.__privateMethod.call(void 0,this,me,ge).call(this,{origin:e,snapId:t,type:k});try{this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!0);const a=this.getExpect(t),o=a.manifest,c=await l.fetchSnap.call(void 0,t,r),{sourceCode:d,manifest:h}=c,m=h.result,_=m.version;if(!v.gtVersion.call(void 0,_,a.version))throw p.rpcErrors.invalidParams(`Snap "${t}@${a.version}" is already installed. Couldn't update to a version inside requested "${n}" range.`);if(!v.satisfiesVersionRange.call(void 0,_,n))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${_}" which doesn't satisfy requested version range "${n}".`);await u.__privateMethod.call(void 0,this,Q,ee).call(this,t,{version:_,checksum:m.source.shasum,permissions:m.initialPermissions});const w=f.processSnapPermissions.call(void 0,m.initialPermissions);u.__privateMethod.call(void 0,this,je,Ae).call(this,w);const{newPermissions:b,unusedPermissions:y,approvedPermissions:E}=u.__privateMethod.call(void 0,this,ot,lt).call(this,t,w);u.__privateMethod.call(void 0,this,ve,_e).call(this,s.id,{permissions:b,newVersion:m.version,newPermissions:b,approvedPermissions:E,unusedPermissions:y,loading:!1});const{permissions:T,...C}=await s.promise;s=u.__privateMethod.call(void 0,this,me,ge).call(this,{origin:e,snapId:t,type:S}),this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),u.__privateMethod.call(void 0,this,ne,ie).call(this,t,g.SnapStatusEvents.Update),u.__privateMethod.call(void 0,this,Pe,Me).call(this,{origin:e,id:t,files:c,isUpdate:!0}),u.__privateMethod.call(void 0,this,ct,ut).call(this,{snapId:t,unusedPermissions:y,newPermissions:T,requestData:C}),m.initialConnections&&u.__privateMethod.call(void 0,this,oe,le).call(this,t,o.initialConnections??null,m.initialConnections);const P=u.__privateMethod.call(void 0,this,Ke,Ye).call(this,t);void 0!==P&&(P.permissions.revoked=y,P.permissions.granted=T,P.permissions.requestData=C);const M=d.toString();v.assert.call(void 0,"string"==typeof M&&M.length>0,`Invalid source code for snap "${t}".`);try{await u.__privateMethod.call(void 0,this,Se,Ee).call(this,{snapId:t,sourceCode:M})}catch{throw new Error(`Snap ${t} crashed with updated source code.`)}const j=this.getTruncatedExpect(t);return i&&this.messagingSystem.publish("SnapController:snapUpdated",j,a.version,e),u.__privateMethod.call(void 0,this,ve,_e).call(this,s.id,{loading:!1,type:k}),j}catch(r){g.logError.call(void 0,`Error when updating ${t},`,r);const n=r instanceof Error?r.message:r.toString();throw u.__privateMethod.call(void 0,this,ve,_e).call(this,s.id,{loading:!1,error:n,type:k}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!0,n),r}}async getRegistryMetadata(e){return await this.messagingSystem.call("SnapsRegistry:getMetadata",e)}async authorize(e,t){o.log.call(void 0,`Authorizing snap: ${e}`);const r=this.state.snaps[e],{initialPermissions:n}=r;try{const i=f.processSnapPermissions.call(void 0,n);u.__privateMethod.call(void 0,this,je,Ae).call(this,i),u.__privateMethod.call(void 0,this,ve,_e).call(this,t.id,{loading:!1,permissions:i});const{permissions:s,...a}=await t.promise;u.__privateMethod.call(void 0,this,ct,ut).call(this,{snapId:e,newPermissions:s,requestData:a}),r.manifest.initialConnections&&u.__privateMethod.call(void 0,this,oe,le).call(this,e,null,r.manifest.initialConnections)}finally{u.__privateMethod.call(void 0,this,nt,it).call(this,e).installPromise=null}}destroy(){super.destroy(),u.__privateGet.call(void 0,this,W)&&clearTimeout(u.__privateGet.call(void 0,this,W)),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.clearEventSubscriptions("SnapController:snapInstalled"),this.messagingSystem.clearEventSubscriptions("SnapController:snapUpdated")}async handleRequest({snapId:e,origin:t,handler:r,request:n}){const i={jsonrpc:"2.0",id:w.nanoid.call(void 0),...n};v.assertIsJsonRpcRequest.call(void 0,i);const s=f.handlerEndowments[r];v.assert.call(void 0,"string"==typeof s||null===s,"'permissionName' must be either a string or null.");const a=this.messagingSystem.call("PermissionController:getPermissions",e);if(!(null===s||a&&v.hasProperty.call(void 0,a,s)))throw new Error(`Snap "${e}" is not permitted to use "${s}".`);const o=s?a[s]:void 0;if(s===f.SnapEndowments.Rpc||s===f.SnapEndowments.Keyring){v.assert.call(void 0,o);const r=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",t),n=s===f.SnapEndowments.Rpc?f.getRpcCaveatOrigins.call(void 0,o):f.getKeyringCaveatOrigins.call(void 0,o);if(v.assert.call(void 0,n),!g.isOriginAllowed.call(void 0,n,r?.subjectType??h.SubjectType.Website,t))throw new Error(`Snap "${e}" is not permitted to handle requests from "${t}".`)}const l=u.__privateMethod.call(void 0,this,Oe,Ie).call(this,e);if(!l)throw new Error(`Snap RPC message handler not found for snap "${e}".`);return l({origin:t,handler:r,request:i,timeout:u.__privateMethod.call(void 0,this,Ne,Re).call(this,o)})}};P=new WeakMap,M=new WeakMap,j=new WeakMap,A=new WeakMap,N=new WeakMap,R=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,L=new WeakMap,D=new WeakMap,B=new WeakMap,W=new WeakMap,U=new WeakMap,F=new WeakSet,H=function(){const e=({snapId:e})=>this.getExpect(e).enabled,t={initial:g.SnapStatus.Installing,states:{[g.SnapStatus.Installing]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e}}},[g.SnapStatus.Updating]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped}},[g.SnapStatus.Running]:{on:{[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped,[g.SnapStatusEvents.Crash]:g.SnapStatus.Crashed}},[g.SnapStatus.Stopped]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}},[g.SnapStatus.Crashed]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}}}};u.__privateSet.call(void 0,this,U,_.createMachine.call(void 0,t)),a.validateMachine.call(void 0,u.__privateGet.call(void 0,this,U))},G=new WeakSet,$=function(){this.messagingSystem.registerActionHandler(`${b}:clearSnapState`,((...e)=>this.clearSnapState(...e))),this.messagingSystem.registerActionHandler(`${b}:get`,((...e)=>this.get(...e))),this.messagingSystem.registerActionHandler(`${b}:getSnapState`,((...e)=>this.getSnapState(...e))),this.messagingSystem.registerActionHandler(`${b}:handleRequest`,(async(...e)=>this.handleRequest(...e))),this.messagingSystem.registerActionHandler(`${b}:has`,((...e)=>this.has(...e))),this.messagingSystem.registerActionHandler(`${b}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${b}:updateSnapState`,((...e)=>this.updateSnapState(...e))),this.messagingSystem.registerActionHandler(`${b}:enable`,((...e)=>this.enableSnap(...e))),this.messagingSystem.registerActionHandler(`${b}:disable`,(async(...e)=>this.disableSnap(...e))),this.messagingSystem.registerActionHandler(`${b}:remove`,(async(...e)=>this.removeSnap(...e))),this.messagingSystem.registerActionHandler(`${b}:getPermitted`,((...e)=>this.getPermittedSnaps(...e))),this.messagingSystem.registerActionHandler(`${b}:install`,(async(...e)=>this.installSnaps(...e))),this.messagingSystem.registerActionHandler(`${b}:getAll`,((...e)=>this.getAllSnaps(...e))),this.messagingSystem.registerActionHandler(`${b}:incrementActiveReferences`,((...e)=>this.incrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${b}:decrementActiveReferences`,((...e)=>this.decrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${b}:getRegistryMetadata`,(async(...e)=>this.getRegistryMetadata(...e))),this.messagingSystem.registerActionHandler(`${b}:disconnectOrigin`,((...e)=>this.removeSnapFromSubject(...e))),this.messagingSystem.registerActionHandler(`${b}:revokeDynamicPermissions`,((...e)=>this.revokeDynamicSnapPermissions(...e))),this.messagingSystem.registerActionHandler(`${b}:getFile`,(async(...e)=>this.getSnapFile(...e)))},q=new WeakSet,V=function(e){for(const{snapId:t,manifest:r,files:n,removable:i}of e){const e=this.get(t),s=void 0!==e,a=s&&v.gtVersion.call(void 0,r.version,e.version);if(s&&(!a||!0!==e.preinstalled))continue;const o=new(0,g.VirtualFile)({path:g.NpmSnapFileNames.Manifest,value:JSON.stringify(r),result:r}),l=n.map((({path:e,value:t})=>new(0,g.VirtualFile)({value:t,path:e}))),{filePath:c,iconPath:d}=r.source.location.npm,h=l.find((e=>e.path===c)),p=d?l.find((e=>e.path===d)):void 0;v.assert.call(void 0,h,"Source code not provided for preinstalled snap."),v.assert.call(void 0,!d||d&&p,"Icon not provided for preinstalled snap."),v.assert.call(void 0,void 0===r.source.files,"Auxiliary files are not currently supported for preinstalled snaps.");const m=r.source.locales?.map((e=>l.find((t=>t.path===e))))??[],_=g.getValidatedLocalizationFiles.call(void 0,m.filter(Boolean));v.assert.call(void 0,m.length===_.length,"Missing localization files for preinstalled snap.");const w={manifest:o,sourceCode:h,svgIcon:p,auxiliaryFiles:[],localizationFiles:_};u.__privateMethod.call(void 0,this,Pe,Me).call(this,{id:t,origin:"metamask",files:w,removable:i,preinstalled:!0});const b=f.processSnapPermissions.call(void 0,r.initialPermissions);u.__privateMethod.call(void 0,this,je,Ae).call(this,b);const{newPermissions:y,unusedPermissions:k}=u.__privateMethod.call(void 0,this,ot,lt).call(this,t,b);u.__privateMethod.call(void 0,this,ct,ut).call(this,{snapId:t,newPermissions:y,unusedPermissions:k}),this.update((e=>{e.snaps[t].status=g.SnapStatus.Stopped}))}},K=new WeakSet,Y=function(){u.__privateSet.call(void 0,this,W,setTimeout((()=>{u.__privateMethod.call(void 0,this,te,re).call(this).catch((e=>{g.logError.call(void 0,e)})),u.__privateMethod.call(void 0,this,K,Y).call(this)}),u.__privateGet.call(void 0,this,O)))},J=new WeakSet,X=async function(e,t){if(this.has(e)){try{this.update((r=>{r.snaps[e].blocked=!0,r.snaps[e].blockInformation=t})),await this.disableSnap(e)}catch(t){g.logError.call(void 0,`Encountered error when stopping blocked snap "${e}".`,t)}this.messagingSystem.publish(`${b}:snapBlocked`,e,t)}},z=new WeakSet,Z=function(e){this.has(e)&&this.state.snaps[e].blocked&&(this.update((t=>{t.snaps[e].blocked=!1,delete t.snaps[e].blockInformation})),this.messagingSystem.publish(`${b}:snapUnblocked`,e))},Q=new WeakSet,ee=async function(e,t){const r=(await this.messagingSystem.call("SnapsRegistry:get",{[e]:t}))[e];if(1===r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": The version is blocked. ${r.reason?.explanation??""}`);const n=Object.keys(t.permissions).some((e=>!s.ALLOWED_PERMISSIONS.includes(e)));if(u.__privateGet.call(void 0,this,N).requireAllowlist&&n&&2!==r.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": ${3===r.status?"The registry is temporarily unavailable.":"The snap is not on the allowlist."}`)},te=new WeakSet,re=async function(){const e=[...u.__privateGet.call(void 0,this,D).entries()];return Promise.all(e.filter((([e,t])=>0===t.activeReferences&&0===t.pendingInboundRequests.length&&t.lastRequest&&u.__privateGet.call(void 0,this,I)&&v.timeSince.call(void 0,t.lastRequest)>u.__privateGet.call(void 0,this,I))).map((async([e])=>this.stopSnap(e,g.SnapStatusEvents.Stop))))},ne=new WeakSet,ie=function(e,t){const{interpreter:r}=u.__privateMethod.call(void 0,this,nt,it).call(this,e);r.send(t),this.update((t=>{t.snaps[e].status=r.state.value}))},se=new WeakSet,ae=async function(e){await this.messagingSystem.call("ExecutionService:terminateSnap",e),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(e))},oe=new WeakSet,le=function(e,t,r){if(t){const n=l.setDiff.call(void 0,t,r);for(const t of Object.keys(n))this.removeSnapFromSubject(t,e)}for(const t of Object.keys(r))u.__privateMethod.call(void 0,this,ce,ue).call(this,t,e)},ce=new WeakSet,ue=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e),n=r?.[f.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(Boolean(n?.value?.[t]))return;if(n)return void this.messagingSystem.call("PermissionController:updateCaveat",e,f.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,{...n,[t]:{}});const i={[f.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:g.SnapCaveatType.SnapIds,value:{[t]:{}}}]}};this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:i,subject:{origin:e}})},de=new WeakSet,he=function(e){const t=this.messagingSystem.call("PermissionController:getSubjectNames");for(const r of t)this.removeSnapFromSubject(r,e)},pe=new WeakSet,fe=function(e){this.messagingSystem.call("PermissionController:hasPermissions",e)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",e)},me=new WeakSet,ge=function({origin:e,snapId:t,type:r}){const n=w.nanoid.call(void 0);return{id:n,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin:e,id:n,type:r,requestData:{metadata:{id:n,origin:t,dappOrigin:e},snapId:t},requestState:{loading:!0}},!0)}},ve=new WeakSet,_e=function(e,t){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id:e,requestState:t})}catch{}},we=new WeakSet,be=async function(e,t){return await this.messagingSystem.call("SnapsRegistry:resolveVersion",e,t)},ye=new WeakSet,ke=async function(e){const{id:t,location:r,versionRange:n}=e;u.__privateMethod.call(void 0,this,st,at).call(this,t);const i=u.__privateMethod.call(void 0,this,nt,it).call(this,t);i.installPromise||(o.log.call(void 0,`Adding snap: ${t}`),i.installPromise=(async()=>{const i=await l.fetchSnap.call(void 0,t,r),s=i.manifest.result;if(!v.satisfiesVersionRange.call(void 0,s.version,n))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${s.version}" which doesn't satisfy requested version range "${n}".`);return await u.__privateMethod.call(void 0,this,Q,ee).call(this,t,{version:s.version,checksum:s.source.shasum,permissions:s.initialPermissions}),u.__privateMethod.call(void 0,this,Pe,Me).call(this,{...e,files:i,id:t})})());try{return await i.installPromise}catch(e){throw i.installPromise=null,e}},Se=new WeakSet,Ee=async function(e){const{snapId:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);try{const r=u.__privateMethod.call(void 0,this,nt,it).call(this,t),n=await l.withTimeout.call(void 0,this.messagingSystem.call("ExecutionService:executeSnap",{...e,endowments:await u.__privateMethod.call(void 0,this,Te,Ce).call(this,t)}),u.__privateGet.call(void 0,this,x));if(n===l.hasTimedOut)throw new Error(`${t} failed to start.`);return u.__privateMethod.call(void 0,this,ne,ie).call(this,t,g.SnapStatusEvents.Start),r.lastRequest=Date.now(),n}catch(e){throw await u.__privateMethod.call(void 0,this,se,ae).call(this,t),e}},Te=new WeakSet,Ce=async function(e){let t=[];for(const r of u.__privateGet.call(void 0,this,j))if(this.messagingSystem.call("PermissionController:hasPermission",e,r)){const n=await this.messagingSystem.call("PermissionController:getEndowments",e,r);if(n){if(!Array.isArray(n)||n.some((e=>"string"!=typeof e)))throw new Error("Expected an array of string endowment names.");t=t.concat(n)}}const r=[...new Set([...g.DEFAULT_ENDOWMENTS,...t])];return r.length<g.DEFAULT_ENDOWMENTS.length+t.length&&g.logError.call(void 0,`Duplicate endowments found for ${e}. Default endowments should not be requested.`,t),r},Pe=new WeakSet,Me=function(e){const{id:t,origin:r,files:n,isUpdate:i=!1,removable:s,preinstalled:a}=e,{manifest:o,sourceCode:l,svgIcon:c,auxiliaryFiles:d,localizationFiles:p}=n;g.assertIsSnapManifest.call(void 0,o.result);const{version:f}=o.result,m=l.toString();v.assert.call(void 0,"string"==typeof m&&m.length>0,`Invalid source code for snap "${t}".`);const _=d.map((e=>(v.assert.call(void 0,"string"==typeof e.data.base64),{path:e.path,value:e.data.base64}))),w=this.state.snaps[t],b=[...w?.versionHistory??[],{version:f,date:Date.now(),origin:r}],y=p.map((e=>e.result)),k={...w,blocked:!1,enabled:!0,removable:s,preinstalled:a,id:t,initialPermissions:o.result.initialPermissions,manifest:o.result,status:u.__privateGet.call(void 0,this,U).config.initial,sourceCode:m,version:f,versionHistory:b,auxiliaryFiles:_,localizationFiles:y};delete k.blockInformation;const{inversePatches:S}=this.update((e=>{e.snaps[t]=k}));if(i){const e=u.__privateMethod.call(void 0,this,Ke,Ye).call(this,t);void 0!==e&&(e.statePatches=S)}const{proposedName:E}=g.getLocalizedSnapManifest.call(void 0,o.result,"en",y);return this.messagingSystem.call("SubjectMetadataController:addSubjectMetadata",{subjectType:h.SubjectType.Snap,name:E,origin:k.id,version:f,svgIcon:c?.toString()??null}),{...k,sourceCode:m}},je=new WeakSet,Ae=function(e){const t=Object.keys(e),r=Array.from(new Set(Object.values(f.handlerEndowments)));v.assert.call(void 0,t.some((e=>r.includes(e))),`A snap must request at least one of the following permissions: ${r.filter((e=>null!==e)).join(", ")}.`);const n=t.reduce(((e,t)=>(v.hasProperty.call(void 0,u.__privateGet.call(void 0,this,A),t)&&e.push(u.__privateGet.call(void 0,this,A)[t]),e)),[]);v.assert.call(void 0,0===n.length,`One or more permissions are not allowed:\n${n.join("\n")}`)},Ne=new WeakSet,Re=function(e){return f.getMaxRequestTimeCaveat.call(void 0,e)??this.maxRequestTime},Oe=new WeakSet,Ie=function(e){const t=u.__privateMethod.call(void 0,this,nt,it).call(this,e),r=t.rpcHandler;if(r)return r;const n=new(0,i.RequestQueue)(5),s=new Map,a=async({origin:t,handler:r,request:i,timeout:a})=>{if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===g.SnapStatus.Installing)throw new Error(`Snap "${e}" is currently being installed. Please try again later.`);if(!this.isRunning(e)){let r=s.get(e);if(r){if(n.get(t)>=n.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else r=this.startSnap(e),s.set(e,r);n.increment(t);try{await r}finally{n.decrement(t),s.get(e)===r&&s.delete(e)}}const o=new(0,c.Timer)(a);u.__privateMethod.call(void 0,this,Ge,$e).call(this,e,i.id,o);const d=this.messagingSystem.call("ExecutionService:handleRpcRequest",e,{origin:t,handler:r,request:i});try{const t=await l.withTimeout.call(void 0,d,o);if(t===l.hasTimedOut)throw new Error(`${e} failed to respond to the request in time.`);return await u.__privateMethod.call(void 0,this,Fe,He).call(this,e,r,t),u.__privateMethod.call(void 0,this,We,Ue).call(this,e,r,t)}catch(t){const[r,n]=g.unwrapError.call(void 0,t);throw n||await this.stopSnap(e,g.SnapStatusEvents.Crash),r}finally{u.__privateMethod.call(void 0,this,qe,Ve).call(this,e,i.id)}};return t.rpcHandler=a,a},xe=new WeakSet,Le=async function(e,t){return this.messagingSystem.call("SnapInterfaceController:createInterface",e,t)},De=new WeakSet,Be=function(e,t){v.assert.call(void 0,this.messagingSystem.call("SnapInterfaceController:getInterface",e,t))},We=new WeakSet,Ue=async function(e,t,r){switch(t){case g.HandlerType.OnTransaction:case g.HandlerType.OnSignature:case g.HandlerType.OnHomePage:{const t=r;if(t&&v.hasProperty.call(void 0,t,"content")){const{content:r,...n}=t;return{...n,id:await u.__privateMethod.call(void 0,this,xe,Le).call(this,e,r)}}return r}default:return r}},Fe=new WeakSet,He=async function(e,t,r){switch(t){case g.HandlerType.OnTransaction:v.assertStruct.call(void 0,r,g.OnTransactionResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,De,Be).call(this,e,r.id);break;case g.HandlerType.OnSignature:v.assertStruct.call(void 0,r,g.OnSignatureResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,De,Be).call(this,e,r.id);break;case g.HandlerType.OnHomePage:v.assertStruct.call(void 0,r,g.OnHomePageResponseStruct),r&&v.hasProperty.call(void 0,r,"id")&&u.__privateMethod.call(void 0,this,De,Be).call(this,e,r.id);break;case g.HandlerType.OnNameLookup:v.assertStruct.call(void 0,r,g.OnNameLookupResponseStruct)}},Ge=new WeakSet,$e=function(e,t,r){const n=u.__privateMethod.call(void 0,this,nt,it).call(this,e);n.pendingInboundRequests.push({requestId:t,timer:r}),n.lastRequest=null},qe=new WeakSet,Ve=function(e,t){const r=u.__privateMethod.call(void 0,this,nt,it).call(this,e);r.pendingInboundRequests=r.pendingInboundRequests.filter((e=>e.requestId!==t)),0===r.pendingInboundRequests.length&&(r.lastRequest=Date.now())},Ke=new WeakSet,Ye=function(e){return u.__privateGet.call(void 0,this,B).get(e)},Je=new WeakSet,Xe=function(e){v.assert.call(void 0,void 0===u.__privateGet.call(void 0,this,B).get(e),new Error(`Snap "${e}" rollback snapshot already exists.`)),u.__privateGet.call(void 0,this,B).set(e,{statePatches:[],permissions:{},newVersion:""});const t=u.__privateGet.call(void 0,this,B).get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snapshot creation failed for ${e}.`)),t},ze=new WeakSet,Ze=async function(e){const t=u.__privateMethod.call(void 0,this,Ke,Ye).call(this,e);if(!t)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(e,g.SnapStatusEvents.Stop),this.get(e)?.status!==g.SnapStatus.Stopped&&u.__privateMethod.call(void 0,this,ne,ie).call(this,e,g.SnapStatusEvents.Stop);const{statePatches:r,permissions:n}=t;r?.length&&this.applyPatches(r),this.get(e)?.status!==g.SnapStatus.Stopped&&this.update((t=>{t.snaps[e].status=g.SnapStatus.Stopped})),u.__privateMethod.call(void 0,this,ct,ut).call(this,{snapId:e,unusedPermissions:n.granted,newPermissions:n.revoked,requestData:n.requestData});const i=this.getTruncatedExpect(e);this.messagingSystem.publish("SnapController:snapRolledback",i,t.newVersion),u.__privateGet.call(void 0,this,B).delete(e)},Qe=new WeakSet,et=async function(e){for(const t of e)await u.__privateMethod.call(void 0,this,ze,Ze).call(this,t)},tt=new WeakSet,rt=function(e){return u.__privateGet.call(void 0,this,D).get(e)},nt=new WeakSet,it=function(e){const t=u.__privateMethod.call(void 0,this,tt,rt).call(this,e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" runtime data not found`)),t},st=new WeakSet,at=function(e){if(u.__privateGet.call(void 0,this,D).has(e))return;const t=this.get(e),r=_.interpret.call(void 0,u.__privateGet.call(void 0,this,U));r.start({context:{snapId:e},value:t?.status??u.__privateGet.call(void 0,this,U).config.initial}),a.forceStrict.call(void 0,r),u.__privateGet.call(void 0,this,D).set(e,{lastRequest:null,rpcHandler:null,installPromise:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter:r})},ot=new WeakSet,lt=function(e,t){const r=this.messagingSystem.call("PermissionController:getPermissions",e)??{},n=l.setDiff.call(void 0,t,r),i=l.setDiff.call(void 0,r,t);return{newPermissions:n,unusedPermissions:i,approvedPermissions:l.setDiff.call(void 0,r,i)}},ct=new WeakSet,ut=function({snapId:e,unusedPermissions:t={},newPermissions:r={},requestData:n}){const i=Object.keys(t);v.isNonEmptyArray.call(void 0,i)&&this.messagingSystem.call("PermissionController:revokePermissions",{[e]:i}),v.isNonEmptyArray.call(void 0,Object.keys(r))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:r,subject:{origin:e},requestData:n})},dt=new WeakSet,ht=function(e,t){const r=this.getExpect(e);return!v.satisfiesVersionRange.call(void 0,r.version,t)&&!v.gtRange.call(void 0,r.version,t)},pt=new WeakSet,ft=async function(e,t){const r=f.handlerEndowments[t];v.assert.call(void 0,r,"Lifecycle hook must have an endowment.");this.messagingSystem.call("PermissionController:hasPermission",e,r)&&await this.handleRequest({snapId:e,handler:t,origin:"",request:{jsonrpc:"2.0",method:t}})},r.controllerName=b,r.SNAP_APPROVAL_INSTALL=y,r.SNAP_APPROVAL_UPDATE=k,r.SNAP_APPROVAL_RESULT=S,r.SnapController=mt}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-APQVOL5T.js"}],[1612,{"@metamask/utils":1886,"@xstate/fsm":2142},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils"),i=e("@xstate/fsm");r.validateMachine=function(e){n.assert.call(void 0,"_options"in e,"The machine is not an @xstate/fsm machine");const t=e,r=new Set,i=e=>{return(t=e,Array.isArray(t)?t:null==t?[]:[t]).flatMap((e=>"string"==typeof e?[e]:(n.assert.call(void 0,"function"==typeof e),[]))).forEach(r.add.bind(r));var t};for(const e of Object.values(t.config.states)){i(e.entry),i(e.exit);for(const t of Object.values(e.on??{}))i(t.actions)}r.forEach((e=>n.assert.call(void 0,void 0!==t._options.actions&&e in t._options.actions,`Action "${e}" doesn't have an implementation`)))},r.forceStrict=function(e){let t=!1;e.subscribe((e=>{n.assert.call(void 0,!t||e.changed,"Invalid state transition"),t=!0}));const r=e.send.bind(e);e.send=(...t)=>(n.assert.call(void 0,e.status===i.InterpreterStatus.Running,"Interpreter is stopped"),r(...t))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BO2ZDPWV.js"}],[1613,{"./chunk-7Y6P5FRN.js":1609,"./chunk-EXN2TFDJ.js":1616,"./chunk-VJZI4VSJ.js":1630,nanoid:1657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-VJZI4VSJ.js"),s=e("./chunk-7Y6P5FRN.js"),a=e("./chunk-EXN2TFDJ.js"),o=e("nanoid"),l=class extends i.AbstractExecutionService{constructor({stream:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),a.__privateAdd.call(void 0,this,n,void 0),a.__privateSet.call(void 0,this,n,e)}async terminateJob(e){a.__privateGet.call(void 0,this,n).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:o.nanoid.call(void 0)}})}async initEnvStream(e){return{worker:e,stream:new(0,s.ProxyPostMessageStream)({stream:a.__privateGet.call(void 0,this,n),jobId:e})}}};n=new WeakMap,r.ProxyExecutionService=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CFTCANAK.js"}],[1614,{"./chunk-EXN2TFDJ.js":1616,"@metamask/base-controller":1066,"@metamask/snaps-registry":1674,"@metamask/snaps-utils":1759,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p,f,m,g,v,_,w,b,y,k,S,E,T,C,P,M,j=e("./chunk-EXN2TFDJ.js"),A=e("@metamask/base-controller"),N=e("@metamask/snaps-registry"),R=e("@metamask/snaps-utils"),O=e("@metamask/utils"),I={database:null,lastUpdated:null,databaseUnavailable:!1},x=class extends A.BaseController{constructor({messenger:e,state:t,url:r={registry:"https://acl.execution.metamask.io/latest/registry.json",signature:"https://acl.execution.metamask.io/latest/signature.json"},publicKey:u="0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6",fetchFunction:f=globalThis.fetch.bind(globalThis),recentFetchThreshold:g=O.inMilliseconds.call(void 0,5,O.Duration.Minute),refetchOnAllowlistMiss:_=!0}){super({messenger:e,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1},databaseUnavailable:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...I,...t}}),j.__privateAdd.call(void 0,this,c),j.__privateAdd.call(void 0,this,d),j.__privateAdd.call(void 0,this,p),j.__privateAdd.call(void 0,this,m),j.__privateAdd.call(void 0,this,v),j.__privateAdd.call(void 0,this,w),j.__privateAdd.call(void 0,this,y),j.__privateAdd.call(void 0,this,S),j.__privateAdd.call(void 0,this,T),j.__privateAdd.call(void 0,this,P),j.__privateAdd.call(void 0,this,n,void 0),j.__privateAdd.call(void 0,this,i,void 0),j.__privateAdd.call(void 0,this,s,void 0),j.__privateAdd.call(void 0,this,a,void 0),j.__privateAdd.call(void 0,this,o,void 0),j.__privateAdd.call(void 0,this,l,void 0),j.__privateSet.call(void 0,this,n,r),j.__privateSet.call(void 0,this,i,u),j.__privateSet.call(void 0,this,s,f),j.__privateSet.call(void 0,this,a,g),j.__privateSet.call(void 0,this,o,_),j.__privateSet.call(void 0,this,l,null),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...e)=>j.__privateMethod.call(void 0,this,w,b).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...e)=>j.__privateMethod.call(void 0,this,S,E).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:resolveVersion",(async(...e)=>j.__privateMethod.call(void 0,this,y,k).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:update",(async()=>j.__privateMethod.call(void 0,this,d,h).call(this)))}};n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakSet,u=function(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<j.__privateGet.call(void 0,this,a)},d=new WeakSet,h=async function(){j.__privateGet.call(void 0,this,l)?await j.__privateGet.call(void 0,this,l):(null===j.__privateGet.call(void 0,this,l)&&j.__privateSet.call(void 0,this,l,j.__privateMethod.call(void 0,this,p,f).call(this)),await j.__privateGet.call(void 0,this,l),j.__privateSet.call(void 0,this,l,null))},p=new WeakSet,f=async function(){if(!j.__privateMethod.call(void 0,this,c,u).call(this))try{const e=await j.__privateMethod.call(void 0,this,P,M).call(this,j.__privateGet.call(void 0,this,n).registry),t=await j.__privateMethod.call(void 0,this,P,M).call(this,j.__privateGet.call(void 0,this,n).signature);j.__privateMethod.call(void 0,this,T,C).call(this,e,t),this.update((t=>{t.database=JSON.parse(e),t.lastUpdated=Date.now(),t.databaseUnavailable=!1}))}catch{this.update((e=>{e.databaseUnavailable=!0}))}},m=new WeakSet,g=async function(){return null===this.state.database&&await j.__privateMethod.call(void 0,this,d,h).call(this),this.state.database},v=new WeakSet,_=async function(e,t,r=!1){const n=await j.__privateMethod.call(void 0,this,m,g).call(this),i=n?.blockedSnaps.find((r=>"id"in r?r.id===e&&O.satisfiesVersionRange.call(void 0,t.version,r.versionRange):r.checksum===t.checksum));if(i)return{status:1,reason:i.reason};const s=n?.verifiedSnaps[e],a=s?.versions?.[t.version];return a&&a.checksum===t.checksum?{status:2}:j.__privateGet.call(void 0,this,o)&&!r?(await j.__privateMethod.call(void 0,this,d,h).call(this),j.__privateMethod.call(void 0,this,v,_).call(this,e,t,!0)):{status:this.state.databaseUnavailable?3:0}},w=new WeakSet,b=async function(e){return Object.entries(e).reduce((async(e,[t,r])=>{const n=await j.__privateMethod.call(void 0,this,v,_).call(this,t,r),i=await e;return i[t]=n,i}),Promise.resolve({}))},y=new WeakSet,k=async function(e,t,r=!1){const n=await j.__privateMethod.call(void 0,this,m,g).call(this),i=n?.verifiedSnaps[e]?.versions??null;if(!i&&j.__privateGet.call(void 0,this,o)&&!r)return await j.__privateMethod.call(void 0,this,d,h).call(this),j.__privateMethod.call(void 0,this,y,k).call(this,e,t,!0);if(!i)return t;const s=R.getTargetVersion.call(void 0,Object.keys(i),t);return s||!j.__privateGet.call(void 0,this,o)||r?s?(O.assertIsSemVerRange.call(void 0,s),s):t:(await j.__privateMethod.call(void 0,this,d,h).call(this),j.__privateMethod.call(void 0,this,y,k).call(this,e,t,!0))},S=new WeakSet,E=async function(e){const t=await j.__privateMethod.call(void 0,this,m,g).call(this);return t?.verifiedSnaps[e]?.metadata??null},T=new WeakSet,C=function(e,t){O.assert.call(void 0,j.__privateGet.call(void 0,this,i),"No public key provided.");const r=N.verify.call(void 0,{registry:e,signature:JSON.parse(t),publicKey:j.__privateGet.call(void 0,this,i)});O.assert.call(void 0,r,"Invalid registry signature.")},P=new WeakSet,M=async function(e){const t=await j.__privateGet.call(void 0,this,s).call(this,e);if(!t.ok)throw new Error(`Failed to fetch ${e}.`);return await t.text()},r.JsonSnapsRegistry=x}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CPUUURMT.js"}],[1615,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-D74XJG2L.js"}],[1616,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(t=>void 0!==e?e:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,r)=>(void 0!==e?e:t)[r]}):t)((function(t){if(void 0!==e)return e.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),i=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__require=n,r.__privateGet=(e,t,r)=>(i(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(i(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(i(e,t,"access private method"),r)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-EXN2TFDJ.js"}],[1617,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-G66GQJS6.js"}],[1618,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HOY6NKQR.js"}],[1619,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JAUAKTUL.js"}],[162,{"../../../shared/constants/network":4033,"bignumber.js":2427,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),s=(n=e("bignumber.js"))&&n.__esModule?n:{default:n},a=e("../../../shared/constants/network");const o=e=>new s.default(e||"0x0",16).gt(0),l=["0x3","0x2a","0x4"],c={"0x3":{rpcUrl:(0,a.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,a.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,a.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const n=(null==e?void 0:e.PreferencesController)||{},s=n.preferences||{},a=(null==e?void 0:e.NetworkController)||{},u=(null==a?void 0:a.provider)||{},d=l.filter((e=>e===(null==u?void 0:u.chainId)));if(!s.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},p=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},f=Object.values(h).filter((({chainId:e})=>l.includes(e))).map((({chainId:e})=>e)),m=l.filter((e=>Object.values(p[e]||{}).some(o))),g=(0,i.uniq)([...m,...f,...d]),v=n.frequentRpcListDetail??[];g.forEach((e=>{v.find((t=>t.chainId===e))||v.unshift({rpcUrl:c[e].rpcUrl,chainId:e,ticker:c[e].ticker,nickname:c[e].nickname,rpcPrefs:{}})})),v.length&&(n.frequentRpcListDetail=v);if(d.length){const e=d[0];a.provider={...a.provider,type:"rpc",rpcUrl:c[e].rpcUrl,chainId:e,nickname:c[e].nickname,ticker:c[e].ticker}}return{...e,PreferencesController:{...n},NetworkController:{...a}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[1620,{"@metamask/snaps-sdk":1723},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-sdk"),i=(e,t)=>t.value??e[t.name]??null,s=(e,t,r)=>{const n=e[r],i=n?.[t.name];return t.value??i??null},a=(e,t)=>{n.assert.call(void 0,void 0===e[t],`Duplicate component names are not allowed, found multiple instances of: "${t}".`)},o=(e,t,r={})=>{const{type:l}=t;return l===n.NodeType.Panel?t.children.reduce(((t,r)=>o(e,r,t)),r):(l===n.NodeType.Form&&(a(r,t.name),r[t.name]=t.children.reduce(((r,i)=>(i.type===n.NodeType.Input&&(a(r,i.name),r[i.name]=s(e,i,t.name)),r)),{})),l===n.NodeType.Input&&(a(r,t.name),r[t.name]=i(e,t)),r)};r.constructInputState=i,r.constructFormInputState=s,r.assertNameIsUnique=a,r.constructState=o}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-KLK7ZRMH.js"}],[1621,{"./chunk-VJZI4VSJ.js":1630,"@metamask/post-message-stream":1501,"@metamask/snaps-utils":1759},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-VJZI4VSJ.js"),i=e("@metamask/post-message-stream"),s=e("@metamask/snaps-utils"),a=class extends n.AbstractExecutionService{constructor({iframeUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),this.iframeUrl=e}terminateJob(e){document.getElementById(e.id)?.remove()}async initEnvStream(e){const t=await s.createWindow.call(void 0,this.iframeUrl.toString(),e);return{worker:t,stream:new(0,i.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"})}}};r.IframeExecutionService=a}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-LAVQZHSH.js"}],[1622,{"./chunk-EXN2TFDJ.js":1616,"./chunk-RDBT3ZJQ.js":1629,"@metamask/snaps-utils":1759,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-RDBT3ZJQ.js"),s=e("./chunk-EXN2TFDJ.js"),a=e("@metamask/snaps-utils"),o=e("@metamask/utils");function l(e){return o.assert.call(void 0,void 0!==e.data.canonicalPath),e.data.canonicalPath=`local:${e.data.canonicalPath}`,e}n=new WeakMap,r.LocalLocation=class{constructor(e,t={}){s.__privateAdd.call(void 0,this,n,void 0),o.assertStruct.call(void 0,e.toString(),a.LocalSnapIdStruct,"Invalid Snap Id"),o.assert.call(void 0,void 0===t.fetchOptions,"Currently adding fetch options to local: is unsupported."),s.__privateSet.call(void 0,this,n,new(0,i.HttpLocation)(new URL(e.toString().slice(a.SnapIdPrefixes.local.length)),{...t,fetchOptions:{cache:"no-cache"}}))}async manifest(){return l(await s.__privateGet.call(void 0,this,n).manifest())}async fetch(e){return l(await s.__privateGet.call(void 0,this,n).fetch(e))}get shouldAlwaysReload(){return!0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-LWBPKSU2.js"}],[1623,{"./chunk-EXN2TFDJ.js":1616,"./chunk-NOLPMHXS.js":1624,"./chunk-YYPUPKQY.js":1636,"@metamask/base-controller":1066,"@metamask/snaps-rpc-methods":1722,"@metamask/snaps-utils":1759,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o=e("./chunk-YYPUPKQY.js"),l=e("./chunk-NOLPMHXS.js"),c=e("./chunk-EXN2TFDJ.js"),u=e("@metamask/base-controller"),d=e("@metamask/snaps-rpc-methods"),h=e("@metamask/snaps-utils"),p=e("@metamask/utils"),f=p.inMilliseconds.call(void 0,24,p.Duration.Hour),m=class extends u.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...t}}),c.__privateAdd.call(void 0,this,n,void 0),c.__privateAdd.call(void 0,this,i,void 0),c.__privateAdd.call(void 0,this,s,void 0),c.__privateAdd.call(void 0,this,a,void 0),c.__privateSet.call(void 0,this,s,new Map),c.__privateSet.call(void 0,this,a,new Map),c.__privateSet.call(void 0,this,n,e),this._handleSnapRegisterEvent=this._handleSnapRegisterEvent.bind(this),this._handleSnapUnregisterEvent=this._handleSnapUnregisterEvent.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}getAllJobs(){const e=this.messagingSystem.call("SnapController:getAll");return o.getRunnableSnaps.call(void 0,e).map((e=>this.getSnapJobs(e.id))).flat().filter((e=>void 0!==e))}getSnapJobs(e){const t=c.__privateGet.call(void 0,this,n).call("PermissionController:getPermissions",e),r=t?.[d.SnapEndowments.Cronjob],i=d.getCronjobCaveatJobs.call(void 0,r);return i?.map(((t,r)=>({...t,id:`${e}-${r}`,snapId:e})))}register(e){const t=this.getSnapJobs(e);t?.forEach((e=>this.schedule(e)))}schedule(e){if(c.__privateGet.call(void 0,this,s).has(e.id))return;const t=h.parseCronExpression.call(void 0,e.expression).next(),r=new Date,n=t.getTime()-r.getTime();if(n>f)return;const i=new(0,l.Timer)(n);i.start((()=>{this.executeCronjob(e).catch((e=>{h.logError.call(void 0,e)})),c.__privateGet.call(void 0,this,s).delete(e.id),this.schedule(e)})),this.state.jobs[e.id]?.lastRun||this.updateJobLastRunState(e.id,0),c.__privateGet.call(void 0,this,s).set(e.id,i),c.__privateGet.call(void 0,this,a).set(e.id,e.snapId)}async executeCronjob(e){this.updateJobLastRunState(e.id,Date.now()),await c.__privateGet.call(void 0,this,n).call("SnapController:handleRequest",{snapId:e.snapId,origin:"",handler:h.HandlerType.OnCronjob,request:e.request})}unregister(e){const t=[...c.__privateGet.call(void 0,this,a).entries()].filter((([t,r])=>r===e));t.length&&t.forEach((([e])=>{const t=c.__privateGet.call(void 0,this,s).get(e);t&&(t.cancel(),c.__privateGet.call(void 0,this,s).delete(e),c.__privateGet.call(void 0,this,a).delete(e))}))}updateJobLastRunState(e,t){this.update((r=>{r.jobs[e]={lastRun:t}}))}async dailyCheckIn(){const e=this.getAllJobs();for(const t of e){const e=h.parseCronExpression.call(void 0,t.expression),r=this.state.jobs[t.id]?.lastRun;void 0!==r&&e.hasPrev()&&e.prev().getTime()>r&&await this.executeCronjob(t),this.schedule(t)}c.__privateSet.call(void 0,this,i,new(0,l.Timer)(f)),c.__privateGet.call(void 0,this,i).start((()=>{this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),c.__privateGet.call(void 0,this,a).forEach((e=>{this.unregister(e)}))}_handleSnapRegisterEvent(e){this.register(e.id)}_handleSnapUnregisterEvent(e){this.unregister(e.id)}_handleEventSnapUpdated(e){this.unregister(e.id),this.register(e.id)}};n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,r.DAILY_TIMEOUT=f,r.CronjobController=m}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-MYWDTEX2.js"}],[1624,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils");r.Timer=class{constructor(e){n.assert.call(void 0,!Number.isNaN(e),new TypeError("Can't start a timer with NaN time")),n.assert.call(void 0,e>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:e}}get status(){return this.state.value}cancel(){n.assert.call(void 0,"paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}pause(){n.assert.call(void 0,"running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback:e,start:t,timeout:r,remaining:i}=this.state;void 0!==r&&clearTimeout(r),this.state={value:"paused",callback:e,remaining:i-(Date.now()-t)}}start(e){n.assert.call(void 0,"stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining:t}=this.state;this.state={value:"paused",remaining:t,callback:e},this.resume()}resume(){n.assert.call(void 0,"paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining:e,callback:t}=this.state,r=Date.now();let i;e!==Number.POSITIVE_INFINITY&&(i=setTimeout((()=>this.onFinish(!0)),e)),this.state={value:"running",callback:t,remaining:e,start:r,timeout:i}}onFinish(e){n.assert.call(void 0,"running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&void 0!==this.state.timeout&&clearTimeout(this.state.timeout);const{callback:t}=this.state;this.state={value:"finished"},e&&t()}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-NOLPMHXS.js"}],[1625,{"@metamask/snaps-utils":1759,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-utils"),i=e("@metamask/utils").createModuleLogger.call(void 0,n.snapsLogger,"snaps-controllers");r.log=i}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-NXZVKBSV.js"}],[1626,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OHMCPTOI.js"}],[1627,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OIEUL55W.js"}],[1628,{"./chunk-EXN2TFDJ.js":1616,"./chunk-KLK7ZRMH.js":1620,"@metamask/base-controller":1066,"@metamask/snaps-utils":1759,"@metamask/utils":1886,nanoid:1657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p=e("./chunk-KLK7ZRMH.js"),f=e("./chunk-EXN2TFDJ.js"),m=e("@metamask/base-controller"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),_=e("nanoid"),w=25e4,b="SnapInterfaceController",y=class extends m.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{interfaces:{persist:!1,anonymous:!1}},name:b,state:{interfaces:{},...t}}),f.__privateAdd.call(void 0,this,n),f.__privateAdd.call(void 0,this,s),f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,c),f.__privateAdd.call(void 0,this,d),f.__privateMethod.call(void 0,this,n,i).call(this)}async createInterface(e,t){await f.__privateMethod.call(void 0,this,d,h).call(this,t);const r=_.nanoid.call(void 0),n=p.constructState.call(void 0,{},t);return this.update((i=>{i.interfaces[r]={snapId:e,content:t,state:n}})),r}getInterface(e,t){return f.__privateMethod.call(void 0,this,s,a).call(this,e,t),this.state.interfaces[t]}async updateInterface(e,t,r){f.__privateMethod.call(void 0,this,s,a).call(this,e,t),await f.__privateMethod.call(void 0,this,d,h).call(this,r);const n=this.state.interfaces[t].state,i=p.constructState.call(void 0,n,r);this.update((e=>{e.interfaces[t].state=i,e.interfaces[t].content=r}))}deleteInterface(e){this.update((t=>{delete t.interfaces[e]}))}updateInterfaceState(e,t){this.update((r=>{r.interfaces[e].state=t}))}};n=new WeakSet,i=function(){this.messagingSystem.registerActionHandler(`${b}:createInterface`,this.createInterface.bind(this)),this.messagingSystem.registerActionHandler(`${b}:getInterface`,this.getInterface.bind(this)),this.messagingSystem.registerActionHandler(`${b}:updateInterface`,this.updateInterface.bind(this)),this.messagingSystem.registerActionHandler(`${b}:deleteInterface`,this.deleteInterface.bind(this)),this.messagingSystem.registerActionHandler(`${b}:updateInterfaceState`,this.updateInterfaceState.bind(this))},s=new WeakSet,a=function(e,t){const r=this.state.interfaces[t];v.assert.call(void 0,void 0!==r,`Interface with id '${t}' not found.`),v.assert.call(void 0,r.snapId===e,`Interface not created by ${e}.`)},o=new WeakSet,l=async function(){await this.messagingSystem.call("PhishingController:maybeUpdateState")},c=new WeakSet,u=function(e){return this.messagingSystem.call("PhishingController:testOrigin",e).result},d=new WeakSet,h=async function(e){const t=v.getJsonSize.call(void 0,e);v.assert.call(void 0,t<=w,"A Snap UI may not be larger than 250 kB.");const r=g.getTotalTextLength.call(void 0,e);v.assert.call(void 0,r<=5e4,"The text in a Snap UI may not be larger than 50 kB."),await f.__privateMethod.call(void 0,this,o,l).call(this),g.validateComponentLinks.call(void 0,e,f.__privateMethod.call(void 0,this,c,u).bind(this))},r.SnapInterfaceController=y}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-Q2ON6SMV.js"}],[1629,{"@metamask/snaps-utils":1759,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/snaps-utils"),i=e("@metamask/utils");r.HttpLocation=class{constructor(e,t={}){this.cache=new Map,i.assertStruct.call(void 0,e.toString(),n.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=t.fetch??globalThis.fetch.bind(globalThis),this.fetchOptions=t.fetchOptions,this.url=e}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const e=new URL(n.NpmSnapFileNames.Manifest,this.url).toString(),t=await this.fetchFn(e,this.fetchOptions);if(!t.ok)throw new Error(`Failed to fetch "${e}". Status code: ${t.status}.`);const r=await t.text(),i=n.parseJson.call(void 0,r),s=new(0,n.VirtualFile)({value:r,result:n.createSnapManifest.call(void 0,i),path:n.NpmSnapFileNames.Manifest,data:{canonicalPath:e}});return this.validatedManifest=s,this.manifest()}async fetch(e){const t=n.normalizeRelative.call(void 0,e),r=this.cache.get(t);if(void 0!==r){const{file:e,contents:t}=r,n=new Uint8Array(await t.arrayBuffer()),i=e.clone();return i.value=n,i}const s=this.toCanonical(t).toString(),a=await this.fetchFn(s,this.fetchOptions);if(!a.ok)throw new Error(`Failed to fetch "${s}". Status code: ${a.status}.`);const o=new(0,n.VirtualFile)({value:"",path:t,data:{canonicalPath:s}}),l=await a.blob();return i.assert.call(void 0,!this.cache.has(t),"Corrupted cache, multiple files with same path."),this.cache.set(t,{file:o,contents:l}),this.fetch(t)}get root(){return new URL(this.url)}toCanonical(e){return i.assert.call(void 0,!e.startsWith("/"),"Tried to parse absolute path."),new URL(e,this.url)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-RDBT3ZJQ.js"}],[163,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:75,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[1630,{"./chunk-EXN2TFDJ.js":1616,"./chunk-NXZVKBSV.js":1625,"./chunk-XE5IWVNV.js":1634,"@metamask/json-rpc-engine":1251,"@metamask/object-multiplex":1432,"@metamask/rpc-errors":1562,"@metamask/snaps-utils":1759,"@metamask/utils":1886,"json-rpc-middleware-stream":3174,nanoid:1657,"readable-stream":1673},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p,f,m,g,v,_=e("./chunk-NXZVKBSV.js"),w=e("./chunk-XE5IWVNV.js"),b=e("./chunk-EXN2TFDJ.js"),y=e("@metamask/json-rpc-engine"),k=e("@metamask/object-multiplex"),S=(n=k)&&n.__esModule?n:{default:n},E=e("@metamask/rpc-errors"),T=e("@metamask/snaps-utils"),C=e("@metamask/utils"),P=e("json-rpc-middleware-stream"),M=e("nanoid"),j=e("readable-stream"),A="ExecutionService";function N(e,t){const r=new(0,S.default);return j.pipeline.call(void 0,e,r,e,(e=>{e&&(t?T.logError.call(void 0,`"${t}" stream failure.`,e):T.logError.call(void 0,e))})),r}i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakSet,d=function(e){b.__privateGet.call(void 0,this,i).delete(e)},h=new WeakSet,p=function(e,t){b.__privateGet.call(void 0,this,i).set(e,(async({origin:r,handler:n,request:i})=>await this.command(t,{id:M.nanoid.call(void 0),jsonrpc:"2.0",method:"snapRpc",params:{origin:r,handler:n,request:i,target:e}})))},f=new WeakSet,m=function(e,t){b.__privateGet.call(void 0,this,s).set(e,t),b.__privateGet.call(void 0,this,a).set(t,e)},g=new WeakSet,v=function(e){const t=b.__privateGet.call(void 0,this,a).get(e);if(!t)throw new Error(`job: "${e}" has no mapped snap.`);b.__privateGet.call(void 0,this,a).delete(e),b.__privateGet.call(void 0,this,s).delete(t),b.__privateMethod.call(void 0,this,u,d).call(this,t)},r.AbstractExecutionService=class{constructor({setupSnapProvider:e,messenger:t,pingTimeout:r=C.inMilliseconds.call(void 0,2,C.Duration.Second),terminationTimeout:n=C.inMilliseconds.call(void 0,1,C.Duration.Second)}){b.__privateAdd.call(void 0,this,u),b.__privateAdd.call(void 0,this,h),b.__privateAdd.call(void 0,this,f),b.__privateAdd.call(void 0,this,g),b.__privateAdd.call(void 0,this,i,void 0),b.__privateAdd.call(void 0,this,s,void 0),b.__privateAdd.call(void 0,this,a,void 0),b.__privateAdd.call(void 0,this,o,void 0),b.__privateAdd.call(void 0,this,l,void 0),b.__privateAdd.call(void 0,this,c,void 0),b.__privateSet.call(void 0,this,i,new Map),this.jobs=new Map,this.setupSnapProvider=e,b.__privateSet.call(void 0,this,s,new Map),b.__privateSet.call(void 0,this,a,new Map),b.__privateSet.call(void 0,this,o,t),b.__privateSet.call(void 0,this,l,r),b.__privateSet.call(void 0,this,c,n),this.registerMessageHandlers()}registerMessageHandlers(){b.__privateGet.call(void 0,this,o).registerActionHandler(`${A}:handleRpcRequest`,(async(e,t)=>this.handleRpcRequest(e,t))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${A}:executeSnap`,(async e=>this.executeSnap(e))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${A}:terminateSnap`,(async e=>this.terminateSnap(e))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${A}:terminateAllSnaps`,(async()=>this.terminateAllSnaps()))}async terminate(e){const t=this.jobs.get(e);if(!t)throw new Error(`Job with id "${e}" not found.`);const r=await w.withTimeout.call(void 0,this.command(e,{jsonrpc:"2.0",method:"terminate",params:[],id:M.nanoid.call(void 0)}),b.__privateGet.call(void 0,this,c));r!==w.hasTimedOut&&"OK"===r||T.logError.call(void 0,`Job "${e}" failed to terminate gracefully.`,r),Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){T.logError.call(void 0,"Error while destroying stream",e)}})),this.terminateJob(t),b.__privateMethod.call(void 0,this,g,v).call(this,e),this.jobs.delete(e),_.log.call(void 0,`Job "${e}" terminated.`)}async initJob(){const e=M.nanoid.call(void 0),{streams:t,worker:r}=await this.initStreams(e),n=new(0,y.JsonRpcEngine),i=P.createStreamMiddleware.call(void 0);j.pipeline.call(void 0,i.stream,t.command,i.stream,(e=>{e&&T.logError.call(void 0,"Command stream failure.",e)})),n.push(i.middleware);const s={id:e,streams:t,rpcEngine:n,worker:r};return this.jobs.set(e,s),s}async initStreams(e){const{worker:t,stream:r}=await this.initEnvStream(e),n=N(r,`Job: "${e}"`),i=n.createStream(T.SNAP_STREAM_NAMES.COMMAND),s=t=>{if(!C.isJsonRpcNotification.call(void 0,t))return;const r=b.__privateGet.call(void 0,this,a).get(e);"OutboundRequest"===t.method?b.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundRequest",r):"OutboundResponse"===t.method?b.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundResponse",r):"UnhandledError"===t.method?C.isObject.call(void 0,t.params)&&t.params.error?(b.__privateGet.call(void 0,this,o).publish("ExecutionService:unhandledError",r,t.params.error),i.removeListener("data",s)):T.logError.call(void 0,new Error(`Received malformed "${t.method}" command stream notification.`)):T.logError.call(void 0,new Error(`Received unexpected command stream notification "${t.method}".`))};i.on("data",s);const l=n.createStream(T.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:i,rpc:l,_connection:r},worker:t}}async terminateSnap(e){const t=b.__privateGet.call(void 0,this,s).get(e);t&&await this.terminate(t)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async e=>this.terminate(e)))),b.__privateGet.call(void 0,this,i).clear()}getRpcRequestHandler(e){return b.__privateGet.call(void 0,this,i).get(e)}async executeSnap(e){if(b.__privateGet.call(void 0,this,s).has(e.snapId))throw new Error(`Snap "${e.snapId}" is already being executed.`);const t=await this.initJob();b.__privateMethod.call(void 0,this,f,m).call(this,e.snapId,t.id);if(await w.withTimeout.call(void 0,this.command(t.id,{jsonrpc:"2.0",method:"ping",id:M.nanoid.call(void 0)}),b.__privateGet.call(void 0,this,l))===w.hasTimedOut)throw new Error("The Snaps execution environment failed to start.");const r=t.streams.rpc;this.setupSnapProvider(e.snapId,r);const n=await this.command(t.id,{jsonrpc:"2.0",method:"executeSnap",params:e,id:M.nanoid.call(void 0)});return b.__privateMethod.call(void 0,this,h,p).call(this,e.snapId,t.id),n}async command(e,t){C.assertIsJsonRpcRequest.call(void 0,t);const r=this.jobs.get(e);if(!r)throw new Error(`Job with id "${e}" not found.`);_.log.call(void 0,"Parent: Sending Command",t);const n=await r.rpcEngine.handle(t);if(n.error)throw new(0,E.JsonRpcError)(n.error.code,n.error.message,n.error.data);return n.result}async handleRpcRequest(e,t){const r=this.getRpcRequestHandler(e);if(!r)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);return r(t)}},r.setupMultiplex=N}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VJZI4VSJ.js"}],[1631,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VNOCJWOK.js"}],[1632,{"./chunk-7Y6P5FRN.js":1609,"./chunk-EXN2TFDJ.js":1616,"./chunk-VJZI4VSJ.js":1630,"@metamask/post-message-stream":1501,"@metamask/snaps-utils":1759,"@metamask/utils":1886,nanoid:1657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s=e("./chunk-VJZI4VSJ.js"),a=e("./chunk-7Y6P5FRN.js"),o=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/post-message-stream"),c=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("nanoid"),h="snaps-worker-pool",p=class extends s.AbstractExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:r}){super({messenger:t,setupSnapProvider:r}),o.__privateAdd.call(void 0,this,n,void 0),o.__privateAdd.call(void 0,this,i,void 0),o.__privateSet.call(void 0,this,n,e)}async terminateJob(e){u.assert.call(void 0,o.__privateGet.call(void 0,this,i),"Runtime stream not initialized."),o.__privateGet.call(void 0,this,i).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:d.nanoid.call(void 0)}})}async initEnvStream(e){await this.createDocument(),u.assert.call(void 0,o.__privateGet.call(void 0,this,i),"Runtime stream not initialized.");return{worker:e,stream:new(0,a.ProxyPostMessageStream)({stream:o.__privateGet.call(void 0,this,i),jobId:e})}}async createDocument(){if(document.getElementById(h))return;const e=await c.createWindow.call(void 0,o.__privateGet.call(void 0,this,n).href,h,!1);o.__privateSet.call(void 0,this,i,new(0,l.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:e,targetOrigin:"*"}))}};n=new WeakMap,i=new WeakMap,r.WORKER_POOL_ID=h,r.WebWorkerExecutionService=p}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VOAJRWUB.js"}],[1633,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-WEY7ICES.js"}],[1634,{"./chunk-NOLPMHXS.js":1624,"@metamask/snaps-sdk":1723,"@metamask/snaps-utils":1759},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NOLPMHXS.js"),i=e("@metamask/snaps-sdk"),s=e("@metamask/snaps-utils");function a(e,t){let r;const n=new Promise(((n,i)=>{e.start((()=>{void 0===t?n():n(t)})),r=i}));return n.cancel=()=>{"finished"!==e.status&&(e.cancel(),r(new Error("The delay has been canceled.")))},n}var o=Symbol("Used to check if the requested promise has timeout (see withTimeout)");async function l(e,t){return t&&0!==t.length?await Promise.all(t.map((async t=>e.fetch(t)))):[]}r.setDiff=function(e,t){return Object.entries(e).reduce(((e,[r,n])=>(r in t||(e[r]=n),e)),{})},r.delay=function(e,t){return a(new(0,n.Timer)(e),t)},r.delayWithTimer=a,r.hasTimedOut=o,r.withTimeout=async function(e,t){const r=a("number"==typeof t?new(0,n.Timer)(t):t,o);try{return await Promise.race([e,r])}finally{r.cancel()}},r.getSnapFiles=l,r.fetchSnap=async function(e,t){try{const e=await t.manifest(),r=await t.fetch(e.result.source.location.npm.filePath),{iconPath:n}=e.result.source.location.npm,i=n?await t.fetch(n):void 0,a=await l(t,e.result.source.files);await Promise.all(a.map((async e=>{e.data.base64=await s.encodeBase64.call(void 0,e)})));const o=await l(t,e.result.source.locales),c={manifest:e,sourceCode:r,svgIcon:i,auxiliaryFiles:a,localizationFiles:s.getValidatedLocalizationFiles.call(void 0,o)};return await s.validateFetchedSnap.call(void 0,c),c}catch(t){throw new Error(`Failed to fetch snap "${e}": ${i.getErrorMessage.call(void 0,t)}.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XE5IWVNV.js"}],[1635,{"./chunk-EXN2TFDJ.js":1616,"@metamask/snaps-utils":1759,"@metamask/utils":1886,"browserify-zlib":2516,"concat-stream":1656,"get-npm-tarball-url":2887,"readable-stream":1673,"readable-web-to-node-stream":3761,"tar-stream":3908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i,s,a,o,l=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("browserify-zlib"),h=n(e("concat-stream")),p=n(e("get-npm-tarball-url")),f=e("readable-stream"),m=e("readable-web-to-node-stream"),g=e("tar-stream"),v=new URL("https://registry.npmjs.org"),_=class{constructor(e,t={}){l.__privateAdd.call(void 0,this,a),l.__privateAdd.call(void 0,this,i,void 0),l.__privateAdd.call(void 0,this,s,void 0);const r=t.allowCustomRegistries??!1,n=t.fetch??globalThis.fetch.bind(globalThis),o=t.versionRange??c.DEFAULT_REQUESTED_SNAP_VERSION,d=t.resolveVersion??(async e=>e);let h;u.assertStruct.call(void 0,e.toString(),c.NpmSnapIdStruct,"Invalid Snap Id: "),""===e.host&&""===e.port&&""===e.username&&""===e.password?h=v:(h="https://",e.username&&(h+=e.username,e.password&&(h+=`:${e.password}`),h+="@"),h+=e.host,h=new URL(h),u.assert.call(void 0,r,new TypeError(`Custom NPM registries are disabled, tried to use "${h.toString()}".`))),u.assert.call(void 0,"/"===h.pathname&&""===h.search&&""===h.hash),u.assert.call(void 0,""!==e.pathname&&"/"!==e.pathname,new TypeError("The package name in NPM location is empty."));let p=e.pathname;p.startsWith("/")&&(p=p.slice(1)),this.meta={requestedRange:o,registry:h,packageName:p,fetch:n,resolveVersion:d}}async manifest(){if(l.__privateGet.call(void 0,this,i))return l.__privateGet.call(void 0,this,i).clone();const e=await this.fetch("snap.manifest.json"),t=c.parseJson.call(void 0,e.toString());return e.result=c.createSnapManifest.call(void 0,t),l.__privateSet.call(void 0,this,i,e),this.manifest()}async fetch(e){const t=c.normalizeRelative.call(void 0,e);l.__privateGet.call(void 0,this,s)||(await l.__privateMethod.call(void 0,this,a,o).call(this),u.assert.call(void 0,void 0!==l.__privateGet.call(void 0,this,s)));const r=l.__privateGet.call(void 0,this,s).get(t);return u.assert.call(void 0,void 0!==r,new TypeError(`File "${e}" not found in package.`)),r.clone()}get packageName(){return this.meta.packageName}get version(){return u.assert.call(void 0,void 0!==this.meta.version,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}};i=new WeakMap,s=new WeakMap,a=new WeakSet,o=async function(){u.assert.call(void 0,void 0===l.__privateGet.call(void 0,this,s));const e=await this.meta.resolveVersion(this.meta.requestedRange),{tarballURL:t,targetVersion:r}=await async function(e,t,r,n){if(k(r)&&u.isValidSemVerVersion.call(void 0,t))return{tarballURL:p.default.call(void 0,e,t),targetVersion:t};const i=await b(e,r,n),s=Object.keys(i?.versions??{}).map((e=>(u.assertIsSemVerVersion.call(void 0,e),e))),a=c.getTargetVersion.call(void 0,s,t);if(null===a)throw new Error(`Failed to find a matching version in npm metadata for package "${e}" and requested semver range "${t}".`);const o=i?.versions?.[a]?.dist?.tarball;return{tarballURL:o,targetVersion:a}}(this.meta.packageName,e,this.meta.registry,this.meta.fetch);if(!c.isValidUrl.call(void 0,t)||!t.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${this.meta.packageName}".`);const n=new URL(t);n.hostname=this.meta.registry.hostname,n.protocol=this.meta.registry.protocol;const i=await this.fetchNpmTarball(n);l.__privateSet.call(void 0,this,s,i),this.meta.version=r};var w=262144e3;async function b(e,t,r){const n=await r(new URL(e,t).toString(),{headers:{accept:k(t)?"application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${n.status}.`);const i=await n.json();if(!u.isObject.call(void 0,i))throw new Error(`Failed to fetch package "${e}" metadata from npm.`);return i}function y(e,t){let r="npm://";return""!==e.username&&(r+=e.username,""!==e.password&&(r+=`:${e.password}`),r+="@"),`${r}${e.host}/${t}/`}function k(e){return e.toString()===v.toString()}var S=/^package\//u;function E(e){return"function"!=typeof e.getReader?e:new(0,m.ReadableWebToNodeStream)(e)}r.DEFAULT_NPM_REGISTRY=v,r.BaseNpmLocation=_,r.TARBALL_SIZE_SAFETY_LIMIT=w,r.NpmLocation=class extends _{async fetchNpmTarball(e){const t=await this.meta.fetch(e.toString());if(!t.ok||!t.body)throw new Error(`Failed to fetch tarball for package "${this.meta.packageName}".`);const r=t.headers.get("content-length");u.assert.call(void 0,r,"Snap tarball has invalid content-length");const n=parseInt(r,10);return u.assert.call(void 0,n<=w,"Snap tarball exceeds size limit"),new Promise(((e,r)=>{const n=new Map,i=function(e,t){u.assert.call(void 0,e.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),u.assert.call(void 0,e.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const r=g.extract.call(void 0);let n=0;return r.on("entry",((i,s,a)=>{const{name:o,type:l}=i;if("file"===l){const i=o.replace(S,"");return s.pipe(h.default.call(void 0,{encoding:"uint8array"},(s=>{try{n+=s.byteLength,u.assert.call(void 0,n<w,"Snap tarball exceeds limit of 262144000 bytes.");const r=new(0,c.VirtualFile)({value:s,path:i,data:{canonicalPath:new URL(i,e).toString()}});return u.assert.call(void 0,!t.has(i),"Malformed tarball, multiple files with the same path."),t.set(i,r),a()}catch(e){return r.destroy(e)}})))}return s.on("end",(()=>a())),s.resume()})),r}(y(this.meta.registry,this.meta.packageName),n),s=t.body;if("pipeThrough"in s&&"DecompressionStream"in globalThis){const t=new DecompressionStream("gzip"),a=s.pipeThrough(t);f.pipeline.call(void 0,E(a),i,(t=>{t?r(t):e(n)}))}else f.pipeline.call(void 0,E(s),d.createGunzip.call(void 0),i,(t=>{t?r(t):e(n)}))}))}},r.fetchNpmMetadata=b,r.getNpmCanonicalBasePath=y}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XWDEGRM5.js"}],[1636,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.getRunnableSnaps=e=>e.filter((e=>e.enabled&&!e.blocked))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-YYPUPKQY.js"}],[1637,{"./chunk-4CA3O64H.js":1604,"./chunk-4URGXJP7.js":1605,"./chunk-5YBORD3A.js":1606,"./chunk-6HI7J27U.js":1607,"./chunk-7WOG63YY.js":1608,"./chunk-7Y6P5FRN.js":1609,"./chunk-AP7CJ6DA.js":1610,"./chunk-APQVOL5T.js":1611,"./chunk-BO2ZDPWV.js":1612,"./chunk-CFTCANAK.js":1613,"./chunk-CPUUURMT.js":1614,"./chunk-D74XJG2L.js":1615,"./chunk-EXN2TFDJ.js":1616,"./chunk-G66GQJS6.js":1617,"./chunk-HOY6NKQR.js":1618,"./chunk-JAUAKTUL.js":1619,"./chunk-KLK7ZRMH.js":1620,"./chunk-LAVQZHSH.js":1621,"./chunk-LWBPKSU2.js":1622,"./chunk-MYWDTEX2.js":1623,"./chunk-NOLPMHXS.js":1624,"./chunk-NXZVKBSV.js":1625,"./chunk-OHMCPTOI.js":1626,"./chunk-OIEUL55W.js":1627,"./chunk-Q2ON6SMV.js":1628,"./chunk-RDBT3ZJQ.js":1629,"./chunk-VJZI4VSJ.js":1630,"./chunk-VNOCJWOK.js":1631,"./chunk-VOAJRWUB.js":1632,"./chunk-WEY7ICES.js":1633,"./chunk-XE5IWVNV.js":1634,"./chunk-XWDEGRM5.js":1635,"./chunk-YYPUPKQY.js":1636},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-MYWDTEX2.js");e("./chunk-JAUAKTUL.js");var i=e("./chunk-APQVOL5T.js");e("./chunk-G66GQJS6.js");var s=e("./chunk-CPUUURMT.js"),a=e("./chunk-4CA3O64H.js");e("./chunk-WEY7ICES.js");var o=e("./chunk-7WOG63YY.js"),l=e("./chunk-XWDEGRM5.js"),c=e("./chunk-LWBPKSU2.js"),u=e("./chunk-RDBT3ZJQ.js");e("./chunk-AP7CJ6DA.js"),e("./chunk-5YBORD3A.js");var d=e("./chunk-YYPUPKQY.js");e("./chunk-VNOCJWOK.js");var h=e("./chunk-Q2ON6SMV.js");e("./chunk-KLK7ZRMH.js"),e("./chunk-4URGXJP7.js"),e("./chunk-D74XJG2L.js");var p=e("./chunk-VOAJRWUB.js");e("./chunk-HOY6NKQR.js");var f=e("./chunk-LAVQZHSH.js");e("./chunk-OHMCPTOI.js");var m=e("./chunk-6HI7J27U.js");e("./chunk-CFTCANAK.js");var g=e("./chunk-VJZI4VSJ.js");e("./chunk-OIEUL55W.js");var v=e("./chunk-7Y6P5FRN.js");e("./chunk-BO2ZDPWV.js"),e("./chunk-NXZVKBSV.js");var _=e("./chunk-XE5IWVNV.js");e("./chunk-NOLPMHXS.js"),e("./chunk-EXN2TFDJ.js"),r.AbstractExecutionService=g.AbstractExecutionService,r.BaseNpmLocation=l.BaseNpmLocation,r.CronjobController=n.CronjobController,r.DAILY_TIMEOUT=n.DAILY_TIMEOUT,r.DEFAULT_NPM_REGISTRY=l.DEFAULT_NPM_REGISTRY,r.HttpLocation=u.HttpLocation,r.IframeExecutionService=f.IframeExecutionService,r.JsonSnapsRegistry=s.JsonSnapsRegistry,r.LocalLocation=c.LocalLocation,r.NpmLocation=l.NpmLocation,r.OffscreenExecutionService=m.OffscreenExecutionService,r.ProxyPostMessageStream=v.ProxyPostMessageStream,r.SNAP_APPROVAL_INSTALL=i.SNAP_APPROVAL_INSTALL,r.SNAP_APPROVAL_RESULT=i.SNAP_APPROVAL_RESULT,r.SNAP_APPROVAL_UPDATE=i.SNAP_APPROVAL_UPDATE,r.SnapController=i.SnapController,r.SnapInterfaceController=h.SnapInterfaceController,r.SnapsRegistryStatus=a.SnapsRegistryStatus,r.TARBALL_SIZE_SAFETY_LIMIT=l.TARBALL_SIZE_SAFETY_LIMIT,r.WebWorkerExecutionService=p.WebWorkerExecutionService,r.controllerName=i.controllerName,r.delay=_.delay,r.delayWithTimer=_.delayWithTimer,r.detectSnapLocation=o.detectSnapLocation,r.fetchNpmMetadata=l.fetchNpmMetadata,r.fetchSnap=_.fetchSnap,r.getNpmCanonicalBasePath=l.getNpmCanonicalBasePath,r.getRunnableSnaps=d.getRunnableSnaps,r.getSnapFiles=_.getSnapFiles,r.hasTimedOut=_.hasTimedOut,r.setDiff=_.setDiff,r.setupMultiplex=g.setupMultiplex,r.withTimeout=_.withTimeout}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/index.js"}],[1638,{"./types":1642},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,ticker:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.ChainId.goerli]:n.BuiltInNetworkName.Goerli,[n.ChainId.sepolia]:n.BuiltInNetworkName.Sepolia,[n.ChainId.mainnet]:n.BuiltInNetworkName.Mainnet,[n.ChainId["linea-goerli"]]:n.BuiltInNetworkName.LineaGoerli,[n.ChainId["linea-mainnet"]]:n.BuiltInNetworkName.LineaMainnet,[n.ChainId.aurora]:n.BuiltInNetworkName.Aurora}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/constants.js"}],[1639,{"./constants":1638,"./siwe":1641,"./types":1642,"./util":1643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/index.js"}],[164,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:76,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:n,...i}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...n?{ignoredNfts:n}:{},...i},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[1640,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/logger.js"}],[1641,{"./logger":1640,"@metamask/utils":1886,"@spruceid/siwe-parser":2077,buffer:2522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),s=e("./logger"),a=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function o(e){try{const i="string"!=typeof(r=e)?r:(0,n.remove0x)(r),s=t.from(i,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return a(t),e}var r}const l={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const s=new URL(n),a=(0,r.parseDomainParts)(i.parsedMessage.domain,s.protocol);return 0===a.hostname.localeCompare(s.hostname,undefined,{sensitivity:"accent"})&&(""!==a.port&&a.port!==s.port?""===s.port&&a.port===l[s.protocol]:""===a.username||a.username===s.username)}catch(e){return a(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new i.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1642,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.ChainId=r.BuiltInNetworkName=r.isInfuraNetworkType=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(r.InfuraNetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/types.js"}],[1643,{"./constants":1638,"@ethereumjs/util":394,"@metamask/ethjs-unit":1224,"@metamask/utils":1886,"bn.js":2474,buffer:2522,"eth-ens-namehash":2721,"fast-deep-equal":2837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const s=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=i(e("bn.js")),c=i(e("eth-ens-namehash")),u=i(e("fast-deep-equal")),d=e("./constants"),h=new Error("timeout");function p(e){return e?new l.default((0,o.remove0x)(e),16):new l.default(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}))}function m(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,o.isHexString)(e))return!1;const t=Number.parseInt(e,(0,o.isStrictHexString)(e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=d.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,o.add0x)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new l.default(t),i=new l.default(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new l.default(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,a.toWei)(r,"gwei");if(n.length<=9)return(0,a.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=(0,a.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new l.default(1))),s},r.weiHexToGweiDec=function(e){const t=new l.default((0,o.remove0x)(e),16);return(0,a.fromWei)(t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=p,r.hexToText=function(e){try{const r=(0,o.remove0x)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new l.default(p(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,o.isStrictHexString)(e)?e:`0x${l.default.isBN(e)?e.toString(16):new l.default(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,o.add0x)(e);return(0,o.isHexString)(t)?(0,s.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,o.add0x)(e):e;return!!(0,o.isStrictHexString)(r)&&(0,s.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=m,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield m(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))]):yield m(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===h)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(h)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,o.isStrictHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/util.js"}],[1644,{"./Permission":1645,"./errors":1648,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.decorateWithCaveats=r.isRestrictedMethodCaveatSpecification=void 0;const i=e("@metamask/utils"),s=e("./errors"),a=e("./Permission");function o(e){return(0,i.hasProperty)(e,"decorator")}r.isRestrictedMethodCaveatSpecification=o,r.decorateWithCaveats=function(e,t,r){const{caveats:i}=t;if(!i)return e;let l=t=>n(this,void 0,void 0,(function*(){return e(t)}));for(const e of i){const t=r[e.type];if(!t)throw new s.UnrecognizedCaveatTypeError(e.type);if(!o(t))throw new s.CaveatSpecificationMismatchError(t,a.PermissionType.RestrictedMethod);l=t.decorator(l,e)}return l}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/Caveat.js"}],[1645,{nanoid:1657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hasSpecificationType=r.PermissionType=r.findCaveat=r.constructPermission=void 0;const n=e("nanoid");r.constructPermission=function(e){const{caveats:t=null,invoker:r,target:i}=e;return{id:(0,n.nanoid)(),parentCapability:i,invoker:r,caveats:t,date:(new Date).getTime()}},r.findCaveat=function(e,t){var r;return null===(r=e.caveats)||void 0===r?void 0:r.find((e=>e.type===t))},function(e){e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment"}(r.PermissionType||(r.PermissionType={})),r.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/Permission.js"}],[1646,{"./Caveat":1644,"./Permission":1645,"./errors":1648,"./permission-middleware":1650,"./utils":1655,"@metamask/base-controller":1066,"@metamask/controller-utils":1639,"@metamask/rpc-errors":1562,"@metamask/utils":1886,"deep-freeze-strict":2670,immer:3129,nanoid:1657},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionController=r.CaveatMutatorOperation=void 0;const a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),l=e("@metamask/rpc-errors"),c=e("@metamask/utils"),u=s(e("deep-freeze-strict")),d=e("immer"),h=e("nanoid"),p=e("./Caveat"),f=e("./errors"),m=e("./Permission"),g=e("./permission-middleware"),v=e("./utils"),_="PermissionController";var w;!function(e){e[e.noop=0]="noop",e[e.updateValue=1]="updateValue",e[e.deleteCaveat=2]="deleteCaveat",e[e.revokePermission=3]="revokePermission"}(w=r.CaveatMutatorOperation||(r.CaveatMutatorOperation={}));class b extends a.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:r,unrestrictedMethods:n,messenger:i,state:s={}}=e;super({name:_,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:i,state:Object.assign(Object.assign({},{subjects:{}}),s)}),this._unrestrictedMethods=new Set(n),this._caveatSpecifications=(0,u.default)(Object.assign({},t)),this.validatePermissionSpecifications(r,this._caveatSpecifications),this._permissionSpecifications=(0,u.default)(Object.assign({},r)),this.registerMessageHandlers(),this.createPermissionMiddleware=(0,g.getPermissionMiddlewareFactory)({executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:r,targetName:n,allowedCaveats:i}])=>{if(!r||!(0,c.hasProperty)(m.PermissionType,r))throw new Error(`Invalid permission type: "${r}"`);if(!e)throw new Error(`Invalid permission target name: "${e}"`);if(e!==n)throw new Error(`Invalid permission specification: target name "${e}" must match specification.targetName value "${n}".`);i&&i.forEach((e=>{if(!(0,c.hasProperty)(t,e))throw new f.UnrecognizedCaveatTypeError(e);const n=t[e],i=(0,p.isRestrictedMethodCaveatSpecification)(n);if(r===m.PermissionType.RestrictedMethod&&!i||r===m.PermissionType.Endowment&&i)throw new f.CaveatSpecificationMismatchError(n,r)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${_}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${_}:getEndowments`,((e,t,r)=>this.getEndowments(e,t,r))),this.messagingSystem.registerActionHandler(`${_}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${_}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${_}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:grantPermissions`,this.grantPermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:requestPermissions`,((e,t)=>this.requestPermissions(e,t))),this.messagingSystem.registerActionHandler(`${_}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissionForAllSubjects`,(e=>this.revokePermissionForAllSubjects(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateCaveat`,((e,t,r,n)=>{this.updateCaveat(e,t,r,n)}))}clearState(){this.update((e=>Object.assign({},{subjects:{}})))}getTypedPermissionSpecification(e,t,r){const n=e===m.PermissionType.RestrictedMethod?(0,f.methodNotFound)(t,r?{origin:r}:undefined):new f.EndowmentPermissionDoesNotExistError(t,r);if(!this.targetExists(t))throw n;const i=this.getPermissionSpecification(t);if(!(0,m.hasSpecificationType)(i,e))throw n;return i}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification(m.PermissionType.RestrictedMethod,e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){var r;return null===(r=this.state.subjects[e])||void 0===r?void 0:r.permissions[t]}getPermissions(e){var t;return null===(t=this.state.subjects[e])||void 0===t?void 0:t.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new f.UnrecognizedSubjectError(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((r=>{if(!(0,c.hasProperty)(t.subjects,r))throw new f.UnrecognizedSubjectError(r);e[r].forEach((e=>{const{permissions:n}=t.subjects[r];if(!(0,c.hasProperty)(n,e))throw new f.PermissionDoesNotExistError(r,e);this.deletePermission(t.subjects,r,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([r,n])=>{const{permissions:i}=n;(0,c.hasProperty)(i,e)&&this.deletePermission(t.subjects,r,e)}))}))}deletePermission(e,t,r){const{permissions:n}=e[t];Object.keys(n).length>1?delete n[r]:delete e[t]}hasCaveat(e,t,r){return Boolean(this.getCaveat(e,t,r))}getCaveat(e,t,r){const n=this.getPermission(e,t);if(!n)throw new f.PermissionDoesNotExistError(e,t);return(0,m.findCaveat)(n,r)}addCaveat(e,t,r,n){if(this.hasCaveat(e,t,r))throw new f.CaveatAlreadyExistsError(e,t,r);this.setCaveat(e,t,r,n)}updateCaveat(e,t,r,n){if(!this.hasCaveat(e,t,r))throw new f.CaveatDoesNotExistError(e,t,r);this.setCaveat(e,t,r,n)}setCaveat(e,t,r,n){this.update((i=>{const s=i.subjects[e];if(!s)throw new f.UnrecognizedSubjectError(e);const a=s.permissions[t];if(!a)throw new f.PermissionDoesNotExistError(e,t);const o={type:r,value:n};if(this.validateCaveat(o,e,t),a.caveats){const e=a.caveats.findIndex((e=>e.type===o.type));-1===e?a.caveats.push(o):a.caveats.splice(e,1,o)}else a.caveats=[o];this.validateModifiedPermission(a,e)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((r=>{Object.values(r.subjects).forEach((n=>{Object.values(n.permissions).forEach((i=>{const{caveats:s}=i,a=null==s?void 0:s.find((({type:t})=>t===e));if(!a)return;const o=t(a.value);switch(o.operation){case w.noop:break;case w.updateValue:a.value=o.value,this.validateCaveat(a,n.origin,i.parentCapability);break;case w.deleteCaveat:this.deleteCaveat(i,e,n.origin);break;case w.revokePermission:this.deletePermission(r.subjects,n.origin,i.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${o.operation}"`)}}))}))}))}removeCaveat(e,t,r){this.update((n=>{var i;const s=null===(i=n.subjects[e])||void 0===i?void 0:i.permissions[t];if(!s)throw new f.PermissionDoesNotExistError(e,t);if(!s.caveats)throw new f.CaveatDoesNotExistError(e,t,r);this.deleteCaveat(s,r,e)}))}deleteCaveat(e,t,r){if(!e.caveats)throw new f.CaveatDoesNotExistError(r,e.parentCapability,t);const n=e.caveats.findIndex((e=>e.type===t));if(-1===n)throw new f.CaveatDoesNotExistError(r,e.parentCapability,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(n,1),this.validateModifiedPermission(e,r)}validateModifiedPermission(e,t){if(!this.targetExists(e.parentCapability))throw new Error(`Fatal: Existing permission target "${e.parentCapability}" has no specification.`);this.validatePermission(this.getPermissionSpecification(e.parentCapability),e,t)}targetExists(e){return(0,c.hasProperty)(this._permissionSpecifications,e)}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:r=!0,subject:n}){const{origin:i}=n;if(!i||"string"!=typeof i)throw new f.InvalidSubjectIdentifierError(i);const s=r?Object.assign({},this.getPermissions(i)):{};for(const[r,n]of Object.entries(e)){if(!this.targetExists(r))throw(0,f.methodNotFound)(r);if(n.parentCapability!==undefined&&r!==n.parentCapability)throw new f.InvalidApprovedPermissionError(i,r,n);const e=r,a=this.getPermissionSpecification(e),o={caveats:this.constructCaveats(i,e,n.caveats),invoker:i,target:e};let l;a.factory?(l=a.factory(o,t),this.validatePermission(a,l,i)):(l=(0,m.constructPermission)(o),this.validatePermission(a,l,i,{invokePermissionValidator:!0,performCaveatValidation:!1})),s[e]=l}return this.setValidatedPermissions(i,s),s}validatePermission(e,t,r,{invokePermissionValidator:n,performCaveatValidation:i}={invokePermissionValidator:!0,performCaveatValidation:!0}){var s;const{allowedCaveats:a,validator:o,targetName:l}=e;if((null===(s=e.subjectTypes)||void 0===s?void 0:s.length)&&e.subjectTypes.length>0){const t=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",r);if(!t||null===t.subjectType||!e.subjectTypes.includes(t.subjectType))throw e.permissionType===m.PermissionType.RestrictedMethod?(0,f.methodNotFound)(l,{origin:r}):new f.EndowmentPermissionDoesNotExistError(l,r)}if((0,c.hasProperty)(t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new f.InvalidCaveatsPropertyError(r,l,e);const n=new Set;null==e||e.forEach((e=>{if(i&&this.validateCaveat(e,r,l),!(null==a?void 0:a.includes(e.type)))throw new f.ForbiddenCaveatError(e.type,r,l);if(n.has(e.type))throw new f.DuplicateCaveatError(e.type,r,l);n.add(e.type)}))}n&&o&&o(t,r,l)}setValidatedPermissions(e,t){this.update((r=>{r.subjects[e]||(r.subjects[e]={origin:e,permissions:{}}),r.subjects[e].permissions=(0,d.castDraft)(t)}))}constructCaveats(e,t,r){const n=null==r?void 0:r.map((r=>{this.validateCaveat(r,e,t);const{type:n,value:i}=r;return{type:n,value:i}}));return n&&(0,o.isNonEmptyArray)(n)?n:undefined}validateCaveat(e,t,r){var n;if(!(0,o.isPlainObject)(e))throw new f.InvalidCaveatError(e,t,r);if(2!==Object.keys(e).length)throw new f.InvalidCaveatFieldsError(e,t,r);if("string"!=typeof e.type)throw new f.InvalidCaveatTypeError(e,t,r);const i=this.getCaveatSpecification(e.type);if(!i)throw new f.UnrecognizedCaveatTypeError(e.type,t,r);if(!(0,c.hasProperty)(e,"value")||e.value===undefined)throw new f.CaveatMissingValueError(e,t,r);if(!(0,o.isValidJson)(e.value))throw new f.CaveatInvalidJsonError(e,t,r);null===(n=i.validator)||void 0===n||n.call(i,e,t,r)}requestPermissions(e,t,r={}){return n(this,void 0,void 0,(function*(){const{origin:n}=e,{id:s=(0,h.nanoid)(),preserveExistingPermissions:a=!0}=r;this.validateRequestedPermissions(n,t);const o={id:s,origin:n},l={metadata:o,permissions:t},c=yield this.requestUserApproval(l),{permissions:u}=c,d=i(c,["permissions"]),p=this.getSideEffects(u);if(Object.values(p.permittedHandlers).length>0){const t=yield this.executeSideEffects(p,c),r=Object.keys(p.permittedHandlers).reduce(((e,r,n)=>Object.assign({[r]:t[n]},e)),{});return[this.grantPermissions({subject:e,approvedPermissions:u,preserveExistingPermissions:a,requestData:d}),Object.assign({data:r},o)]}return[this.grantPermissions({subject:e,approvedPermissions:u,preserveExistingPermissions:a,requestData:d}),o]}))}validateRequestedPermissions(e,t){if(!(0,o.isPlainObject)(t))throw(0,f.invalidParams)({message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw(0,f.invalidParams)({message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const r of Object.keys(t)){const n=t[r];if(!this.targetExists(r))throw(0,f.methodNotFound)(r,{origin:e,requestedPermissions:t});if(!(0,o.isPlainObject)(n)||n.parentCapability!==undefined&&r!==n.parentCapability)throw(0,f.invalidParams)({message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(r),n,e,{invokePermissionValidator:!1,performCaveatValidation:!0})}}requestUserApproval(e){return n(this,void 0,void 0,(function*(){const{origin:t,id:r}=e.metadata,n=yield this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:t,requestData:e,type:v.MethodNames.requestPermissions},!0);return this.validateApprovedPermissions(n,{id:r,origin:t}),n}))}getSideEffects(e){return Object.keys(e).reduce(((e,t)=>{if(this.targetExists(t)){const r=this.getPermissionSpecification(t);r.sideEffect&&(e.permittedHandlers[t]=r.sideEffect.onPermitted,r.sideEffect.onFailure&&(e.failureHandlers[t]=r.sideEffect.onFailure))}return e}),{permittedHandlers:{},failureHandlers:{}})}executeSideEffects(e,t){return n(this,void 0,void 0,(function*(){const{permittedHandlers:r,failureHandlers:n}=e,i={requestData:t,messagingSystem:this.messagingSystem},s=yield Promise.allSettled(Object.values(r).map((e=>e(i)))),a=s.filter((e=>"rejected"===e.status));if(a.length>0){const e=Object.values(n);if(e.length>0)try{yield Promise.all(e.map((e=>e(i))))}catch(e){throw(0,f.internalError)("Unexpected error in side-effects",{error:e})}const t=a.map((e=>e.reason));throw t.forEach((e=>{console.error(e)})),t.length>1?(0,f.internalError)("Multiple errors occurred during side-effects execution",{errors:t}):t[0]}return s.map((({value:e})=>e))}))}validateApprovedPermissions(e,t){const{id:r,origin:n}=t;if(!(0,o.isPlainObject)(e)||!(0,o.isPlainObject)(e.metadata))throw(0,f.internalError)(`Approved permissions request for subject "${n}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:i,origin:s},permissions:a}=e;if(i!==r)throw(0,f.internalError)(`Approved permissions request for subject "${n}" mutated its id.`,{originalId:r,mutatedId:i});if(s!==n)throw(0,f.internalError)(`Approved permissions request for subject "${n}" mutated its origin.`,{originalOrigin:n,mutatedOrigin:s});try{this.validateRequestedPermissions(n,a)}catch(e){if(e instanceof l.JsonRpcError)throw(0,f.internalError)(`Invalid approved permissions request: ${e.message}`,e.data);throw(0,f.internalError)("Unrecognized error type",{error:e})}}acceptPermissionsRequest(e){return n(this,void 0,void 0,(function*(){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new f.PermissionsRequestNotFoundError(t);if(0!==Object.keys(e.permissions).length)try{this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,(0,f.invalidParams)({message:"Must request at least one permission."}))}))}rejectPermissionsRequest(e){return n(this,void 0,void 0,(function*(){if(!this.hasApprovalRequest({id:e}))throw new f.PermissionsRequestNotFoundError(e);this._rejectPermissionsRequest(e,(0,f.userRejectedRequest)())}))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}getEndowments(e,t,r){return n(this,void 0,void 0,(function*(){if(!this.hasPermission(e,t))throw(0,f.unauthorized)({data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification(m.PermissionType.Endowment,t,e).endowmentGetter({origin:e,requestData:r})}))}executeRestrictedMethod(e,t,r){return n(this,void 0,void 0,(function*(){const n=this.getRestrictedMethod(t,e),i=yield this._executeRestrictedMethod(n,{origin:e},t,r);if(i===undefined)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return i}))}_executeRestrictedMethod(e,t,r,n=[]){const{origin:i}=t,s=this.getPermission(i,r);if(!s)throw(0,f.unauthorized)({data:{origin:i,method:r}});return(0,p.decorateWithCaveats)(e,s,this._caveatSpecifications)({method:r,params:n,context:{origin:i}})}}r.PermissionController=b}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/PermissionController.js"}],[1647,{"@metamask/base-controller":1066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SubjectMetadataController=r.SubjectType=void 0;const n=e("@metamask/base-controller");!function(e){e.Extension="extension",e.Internal="internal",e.Unknown="unknown",e.Website="website",e.Snap="snap"}(r.SubjectType||(r.SubjectType={}));const i={subjectMetadata:{persist:!0,anonymous:!1}},s={subjectMetadata:{}};class a extends n.BaseController{constructor({messenger:e,subjectCacheLimit:t,state:r={}}){if(!Number.isInteger(t)||t<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${t}"`);const n=t=>e.call("PermissionController:hasPermissions",t);super({name:"SubjectMetadataController",metadata:i,messenger:e,state:Object.assign({},a.getTrimmedState(r,n))}),this.subjectHasPermissions=n,this.subjectCacheLimit=t,this.subjectsWithoutPermissionsEncounteredSinceStartup=new Set,this.messagingSystem.registerActionHandler(`${this.name}:getSubjectMetadata`,this.getSubjectMetadata.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:addSubjectMetadata`,this.addSubjectMetadata.bind(this))}clearState(){this.subjectsWithoutPermissionsEncounteredSinceStartup.clear(),this.update((e=>Object.assign({},s)))}addSubjectMetadata(e){const{origin:t}=e,r=Object.assign(Object.assign({},e),{extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null,subjectType:e.subjectType||null});let n=null;if(this.subjectsWithoutPermissionsEncounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEncounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEncounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(n=e)}this.subjectsWithoutPermissionsEncounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=r,"string"==typeof n&&delete e.subjectMetadata[n]}))}getSubjectMetadata(e){return this.state.subjectMetadata[e]}trimMetadataState(){this.update((e=>a.getTrimmedState(e,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:r={}}=e;return{subjectMetadata:Object.keys(r).reduce(((e,n)=>(t(n)&&(e[n]=r[n]),e)),{})}}}r.SubjectMetadataController=a}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/SubjectMetadataController.js"}],[1648,{"@metamask/rpc-errors":1562},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionsRequestNotFoundError=r.CaveatSpecificationMismatchError=r.DuplicateCaveatError=r.ForbiddenCaveatError=r.InvalidCaveatFieldsError=r.CaveatInvalidJsonError=r.CaveatMissingValueError=r.InvalidCaveatTypeError=r.InvalidCaveatError=r.CaveatAlreadyExistsError=r.CaveatDoesNotExistError=r.InvalidCaveatsPropertyError=r.UnrecognizedCaveatTypeError=r.EndowmentPermissionDoesNotExistError=r.PermissionDoesNotExistError=r.InvalidApprovedPermissionError=r.UnrecognizedSubjectError=r.InvalidSubjectIdentifierError=r.internalError=r.userRejectedRequest=r.invalidParams=r.methodNotFound=r.unauthorized=void 0;const n=e("@metamask/rpc-errors");r.unauthorized=function(e){return n.providerErrors.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},r.methodNotFound=function(e,t){const r={message:`The method "${e}" does not exist / is not available.`};return t!==undefined&&(r.data=t),n.rpcErrors.methodNotFound(r)},r.invalidParams=function(e){return n.rpcErrors.invalidParams({data:e.data,message:e.message})},r.userRejectedRequest=function(e){return n.providerErrors.userRejectedRequest({data:e})},r.internalError=function(e,t){return n.rpcErrors.internal({message:e,data:t})};class i extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}}r.InvalidSubjectIdentifierError=i;class s extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}}r.UnrecognizedSubjectError=s;class a extends Error{constructor(e,t,r){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:r}}}r.InvalidApprovedPermissionError=a;class o extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}}r.PermissionDoesNotExistError=o;class l extends Error{constructor(e,t){super(`Subject "${t}" has no permission for "${e}".`),t&&(this.data={origin:t})}}r.EndowmentPermissionDoesNotExistError=l;class c extends Error{constructor(e,t,r){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},t!==undefined&&(this.data.origin=t),r!==undefined&&(this.data.target=r)}}r.UnrecognizedCaveatTypeError=c;class u extends Error{constructor(e,t,r){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:r}}}r.InvalidCaveatsPropertyError=u;class d extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${r}".`)}}r.CaveatDoesNotExistError=d;class h extends Error{constructor(e,t,r){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${r}".`)}}r.CaveatAlreadyExistsError=h;class p extends n.JsonRpcError{constructor(e,t,r){super(n.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:r}}}r.InvalidCaveatError=p;class f extends Error{constructor(e,t,r){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:r}}}r.InvalidCaveatTypeError=f;class m extends Error{constructor(e,t,r){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:r}}}r.CaveatMissingValueError=m;class g extends Error{constructor(e,t,r){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:r}}}r.CaveatInvalidJsonError=g;class v extends Error{constructor(e,t,r){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:r}}}r.InvalidCaveatFieldsError=v;class _ extends Error{constructor(e,t,r){super(`Permissions for target "${r}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}}r.ForbiddenCaveatError=_;class w extends Error{constructor(e,t,r){super(`Permissions for target "${r}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:r}}}r.DuplicateCaveatError=w;class b extends Error{constructor(e,t){super(`Caveat specification uses a mismatched type. Expected caveats for ${t}`),this.data={caveatSpec:e,permissionType:t}}}r.CaveatSpecificationMismatchError=b;class y extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}}r.PermissionsRequestNotFoundError=y}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/errors.js"}],[1649,{"./Caveat":1644,"./Permission":1645,"./PermissionController":1646,"./SubjectMetadataController":1647,"./errors":1648,"./rpc-methods":1652,"./utils":1655},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.permissionRpcMethods=void 0,s(e("./Caveat"),r),s(e("./errors"),r),s(e("./Permission"),r),s(e("./PermissionController"),r),s(e("./utils"),r),r.permissionRpcMethods=a(e("./rpc-methods")),s(e("./SubjectMetadataController"),r)}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/index.js"}],[165,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[1650,{"./errors":1648,"@metamask/json-rpc-engine":1251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionMiddlewareFactory=void 0;const i=e("@metamask/json-rpc-engine"),s=e("./errors");r.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:r}){return function(a){const{origin:o}=a;if("string"!=typeof o||!o)throw new Error('The subject "origin" must be a non-empty string.');return(0,i.createAsyncMiddleware)(((i,l,c)=>n(this,void 0,void 0,(function*(){const{method:n,params:u}=i;if(r(n))return c();const d=t(n,o),h=yield e(d,a,n,u);return h===undefined?(l.error=(0,s.internalError)(`Request for method "${i.method}" returned undefined result.`,{request:i}),undefined):(l.result=h,undefined)}))))}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/permission-middleware.js"}],[1651,{"../utils":1655},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.getPermissionsHandler=void 0;const i=e("../utils");r.getPermissionsHandler={methodNames:[i.MethodNames.getPermissions],implementation:function(e,t,r,i,{getPermissionsForOrigin:s}){return n(this,void 0,void 0,(function*(){return t.result=Object.values(s()||{}),i()}))},hookNames:{getPermissionsForOrigin:!0}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/rpc-methods/getPermissions.js"}],[1652,{"./getPermissions":1651,"./requestPermissions":1653,"./revokePermissions":1654},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handlers=void 0;const n=e("./getPermissions"),i=e("./requestPermissions"),s=e("./revokePermissions");r.handlers=[i.requestPermissionsHandler,n.getPermissionsHandler,s.revokePermissionsHandler]}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/rpc-methods/index.js"}],[1653,{"../errors":1648,"../utils":1655,"@metamask/controller-utils":1639},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.requestPermissionsHandler=void 0;const i=e("@metamask/controller-utils"),s=e("../errors"),a=e("../utils");r.requestPermissionsHandler={methodNames:[a.MethodNames.requestPermissions],implementation:function(e,t,r,a,{requestPermissionsForOrigin:o}){return n(this,void 0,void 0,(function*(){const{params:r}=e;if(!Array.isArray(r)||!(0,i.isPlainObject)(r[0]))return a((0,s.invalidParams)({data:{request:e}}));const[n]=r,[l]=yield o(n);return t.result=Object.values(l),a()}))},hookNames:{requestPermissionsForOrigin:!0}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/rpc-methods/requestPermissions.js"}],[1654,{"../errors":1648,"../utils":1655,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.revokePermissionsHandler=void 0;const i=e("@metamask/utils"),s=e("../errors"),a=e("../utils");r.revokePermissionsHandler={methodNames:[a.MethodNames.revokePermissions],implementation:function(e,t,r,a,{revokePermissionsForOrigin:o}){return n(this,void 0,void 0,(function*(){const{params:r}=e,n=null==r?void 0:r[0];if(!n)return a((0,s.invalidParams)({data:{request:e}}));const l=Object.keys(n);return(0,i.isNonEmptyArray)(l)?(o(l),t.result=null,a()):a((0,s.invalidParams)({data:{request:e}}))}))},hookNames:{revokePermissionsForOrigin:!0}}}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/rpc-methods/revokePermissions.js"}],[1655,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MethodNames=void 0,function(e){e.requestPermissions="wallet_requestPermissions",e.getPermissions="wallet_getPermissions",e.revokePermissions="wallet_revokePermissions"}(r.MethodNames||(r.MethodNames={}))}}},{package:"@metamask/snaps-controllers>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/permission-controller/dist/utils.js"}],[1656,{buffer:2522,"buffer-from":2527,inherits:3130,"readable-stream":1673,typedarray:3927},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Writable,i=e("inherits"),s=e("buffer-from");if("undefined"==typeof Uint8Array)var a=e("typedarray").Uint8Array;else a=Uint8Array;function o(e,t){if(!(this instanceof o))return new o(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,n.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}t.exports=o,i(o,n),o.prototype._write=function(e,t,r){this.body.push(e),r()},o.prototype.inferEncoding=function(e){var t=e===undefined?this.body[0]:e;return r.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},o.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"string"==typeof i||r.isBuffer(i)?t.push(i):l(i)?t.push(s(i)):t.push(s(String(i)))}t=r.isBuffer(e[0])?(t=r.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];r.isBuffer(i)?t.push(i):l(i)?t.push(s(i)):t.push(s(String(i)))}return r.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=s(e[r])),t+=e[r].length;for(var n=new a(t),i=(r=0,0);r<e.length;r++)for(var o=e[r],l=0;l<o.length;l++)n[i++]=o[l];return n}(this.body):this.body):[]};Array.isArray;function l(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>concat-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js"}],[1657,{"./url-alphabet/index.cjs":1658},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(s=t)=>{let a="";for(;;){let t=r(i),o=i;for(;o--;)if(a+=e[t[o]&n]||"",a.length===s)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>s(e,t,i),customRandom:s,urlAlphabet:n,random:i}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.cjs"}],[1658,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/url-alphabet/index.cjs"}],[1659,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,o;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var l=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(s(t,"type"))}return o+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/errors-browser.js"}],[166,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"network")&&(0,n.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[1660,{"./_stream_readable":1662,"./_stream_writable":1664,_process:3530,inherits:3130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(c,i);for(var a=n(s.prototype),o=0;o<a.length;o++){var l=a[o];c.prototype[l]||(c.prototype[l]=s.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_duplex.js"}],[1661,{"./_stream_transform":1663,inherits:3130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1662,{"../errors":1659,"./_stream_duplex":1660,"./internal/streams/async_iterator":1665,"./internal/streams/buffer_list":1666,"./internal/streams/destroy":1667,"./internal/streams/from":1669,"./internal/streams/state":1671,"./internal/streams/stream":1672,_process:3530,buffer:2522,events:2809,inherits:3130,"string_decoder/":3900,util:2487},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=E,E.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,o=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=e("util");l=c&&c.debuglog?c.debuglog("stream"):function(){};var u,d,h,p=e("./internal/streams/buffer_list"),f=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,v=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,s);var y=f.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=e("string_decoder/").StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function E(t){if(n=n||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function T(e,t,r,n,i){l("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?j(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(i||(s=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof o||"string"==typeof t||t===undefined||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),s)y(e,s);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)c.endEmitted?y(e,new b):C(e,c,t,!0);else if(c.ended)y(e,new _);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?C(e,c,t,!1):N(e,c)):C(e,c,t,!1)}else n||(c.reading=!1,N(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function C(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&j(e)),N(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},E.prototype.unshift=function(e){return T(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){u||(u=e("string_decoder/").StringDecoder);var r=new u(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var P=1073741824;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function j(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(A,e))}function A(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function N(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){l("readable nexttick read 0"),e.read(0)}function x(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(W,t,e))}function W(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):j(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){y(this,new w("_read()"))},E.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,l("pipe count=%d opts=%j",s.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function o(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",o),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}s.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",o);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",u);var d=!1;function h(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==U(s.pipes,e))&&!d&&(l("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function p(t){l("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&y(e,t)}function f(){e.removeListener("finish",m),g()}function m(){l("onfinish"),e.removeListener("close",f),g()}function g(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",f),e.once("finish",m),e.emit("pipe",n),s.flowing||(l("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?j(this):i.reading||r.nextTick(I,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(O,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(O,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(x,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<k.length;s++)e.on(k[s],this.emit.bind(this,k[s]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=D,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(E,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_readable.js"}],[1663,{"../errors":1659,"./_stream_duplex":1660,inherits:3130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=u;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_transform.js"}],[1664,{"../errors":1659,"./_stream_duplex":1660,"./internal/streams/destroy":1667,"./internal/streams/state":1671,"./internal/streams/stream":1672,_process:3530,buffer:2522,inherits:3130,"util-deprecate":3965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=E,E.WritableState=S;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),o=e("buffer").Buffer,l=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,u=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,p=h.ERR_INVALID_ARG_TYPE,f=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,b=h.ERR_UNKNOWN_ENCODING,y=u.errorOrDestroy;function k(){}function S(t,s,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=s instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(A,e,t),e._writableState.errorEmitted=!0,y(e,i)):(s(i),e._writableState.errorEmitted=!0,y(e,i),A(e,t))}(e,n,i,t,s);else{var a=M(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||P(e,n),i?r.nextTick(C,e,n,a,s):C(e,n,a,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function E(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(E,this))return new E(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function T(e,t,r,n,i,s,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function C(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),A(e,t)}function P(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,l=!0;r;)s[o]=r,r.isBuf||(l=!1),r=r.next,o+=1;s.allBuffers=l,T(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,d=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function j(e,t){e._final((function(r){t.pendingcb--,r&&y(e,r),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=M(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(j,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(E,a),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===E&&(e&&e._writableState instanceof S)}})):c=function(e){return e instanceof this},E.prototype.pipe=function(){y(this,new g)},E.prototype.write=function(e,t,n){var i,s=this._writableState,a=!1,c=!s.objectMode&&(i=e,o.isBuffer(i)||i instanceof l);return c&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=k),s.ending?function(e,t){var n=new w;y(e,n),r.nextTick(t,n)}(this,n):(c||function(e,t,n,i){var s;return null===n?s=new _:"string"==typeof n||t.objectMode||(s=new p("chunk",["string","Buffer"],n)),!s||(y(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,a=function(e,t,r,n,i,s){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,l,n,i,s);return c}(this,s,c,e,t,n)),a},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||P(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=u.destroy,E.prototype._undestroy=u.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/_stream_writable.js"}],[1665,{"./end-of-stream":1668,_process:3530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[a]=null,e[o]=null,t(p(r,!1)))}}function m(e){r.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(p(undefined,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(p(undefined,!0)):t[d](r,n)}),n)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(p(s,!1));n=new Promise(this[d])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(p(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[h].read();n?(r[u]=null,r[a]=null,r[o]=null,e(p(n,!1))):(r[a]=e,r[o]=t)},writable:!0}),t));return r[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];return null!==t&&(r[u]=null,r[a]=null,r[o]=null,t(e)),void(r[l]=e)}var n=r[a];null!==n&&(r[u]=null,r[a]=null,r[o]=null,n(p(undefined,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[1666,{buffer:2522,util:2487},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=e("buffer").Buffer,c=e("util").inspect,u=c&&c.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,r,n,i=l.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,l.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return c(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1667,{_process:3530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var a=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):s?(e.nextTick(n,a),s(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1668,{"../../../errors":1659},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var a=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){o=!1,c=!0,a||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||s.call(t)},p=function(e){s.call(t,e)},f=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1669,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[167,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var n=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[1670,{"../../../errors":1659,"./end-of-stream":1668},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var h=r.map((function(t,i){var s=i<r.length-1;return function(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var l=!1;return function(e){if(!o&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}(t,s,i>0,(function(e){u||(u=e),e&&h.forEach(l),s||(h.forEach(l),d(u))}))}));return r.reduce(c)}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1671,{"../../../errors":1659},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/state.js"}],[1672,{events:2809},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1673,{"./lib/_stream_duplex.js":1660,"./lib/_stream_passthrough.js":1661,"./lib/_stream_readable.js":1662,"./lib/_stream_transform.js":1663,"./lib/_stream_writable.js":1664,"./lib/internal/streams/end-of-stream.js":1668,"./lib/internal/streams/pipeline.js":1670},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snaps-controllers>readable-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/readable-stream/readable-browser.js"}],[1674,{"./verify":1675,"@metamask/utils":1886,superstruct:3904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapsRegistryDatabaseStruct=r.BlockedSnapStruct=r.BlockReasonStruct=r.VerifiedSnapStruct=r.ImagePathStruct=r.AdditionalSourceCodeStruct=r.SupportStruct=r.AuditStruct=r.AuthorStruct=void 0;const s=e("@metamask/utils"),a=e("superstruct"),o=(0,a.refine)((0,a.string)(),"Npm ID",(e=>e.startsWith("npm:"))),l=(0,a.object)({checksum:s.ChecksumStruct});r.AuthorStruct=(0,a.object)({name:(0,a.string)(),website:(0,a.string)()}),r.AuditStruct=(0,a.object)({auditor:(0,a.string)(),report:(0,a.string)()}),r.SupportStruct=(0,a.object)({knowledgeBase:(0,a.optional)((0,a.string)()),faq:(0,a.optional)((0,a.string)()),contact:(0,a.optional)((0,a.string)()),keyRecovery:(0,a.optional)((0,a.string)())}),r.AdditionalSourceCodeStruct=(0,a.object)({name:(0,a.string)(),url:(0,a.string)()}),r.ImagePathStruct=(0,a.pattern)((0,a.string)(),/\.\/images\/.*\/\d+\.(?:png|jpe?g)$/u),r.VerifiedSnapStruct=(0,a.object)({id:o,metadata:(0,a.object)({name:(0,a.string)(),type:(0,a.optional)((0,a.enums)(["account"])),author:(0,a.optional)(r.AuthorStruct),website:(0,a.optional)((0,a.string)()),onboard:(0,a.optional)((0,a.boolean)()),summary:(0,a.optional)((0,a.string)()),description:(0,a.optional)((0,a.string)()),audits:(0,a.optional)((0,a.array)(r.AuditStruct)),category:(0,a.optional)((0,a.enums)(["interoperability","notifications","transaction insights","account management"])),tags:(0,a.optional)((0,a.array)((0,a.string)())),support:(0,a.optional)(r.SupportStruct),sourceCode:(0,a.optional)((0,a.string)()),hidden:(0,a.optional)((0,a.boolean)()),privateCode:(0,a.optional)((0,a.boolean)()),privacyPolicy:(0,a.optional)((0,a.string)()),termsOfUse:(0,a.optional)((0,a.string)()),additionalSourceCode:(0,a.optional)((0,a.array)(r.AdditionalSourceCodeStruct)),screenshots:(0,a.optional)((0,a.size)((0,a.array)(r.ImagePathStruct),3,3))}),versions:(0,a.record)(s.VersionStruct,l)}),r.BlockReasonStruct=(0,a.object)({explanation:(0,a.optional)((0,a.string)()),url:(0,a.optional)((0,a.string)())}),r.BlockedSnapStruct=(0,a.union)([(0,a.object)({id:o,versionRange:s.VersionRangeStruct,reason:(0,a.optional)(r.BlockReasonStruct)}),(0,a.object)({checksum:s.ChecksumStruct,reason:(0,a.optional)(r.BlockReasonStruct)})]),r.SnapsRegistryDatabaseStruct=(0,a.object)({verifiedSnaps:(0,a.record)(o,r.VerifiedSnapStruct),blockedSnaps:(0,a.array)(r.BlockedSnapStruct)}),i(e("./verify"),r)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/index.js"}],[1675,{"@metamask/utils":1886,"@noble/curves/secp256k1":1907,"@noble/hashes/sha256":1915,superstruct:3904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.verify=r.SignatureStruct=void 0;const n=e("@metamask/utils"),i=e("@noble/curves/secp256k1"),s=e("@noble/hashes/sha256"),a=e("superstruct");r.SignatureStruct=(0,a.object)({signature:n.StrictHexStruct,curve:(0,a.literal)("secp256k1"),format:(0,a.literal)("DER")}),r.verify=function({registry:e,signature:t,publicKey:a}){(0,n.assertStruct)(t,r.SignatureStruct,"Invalid signature object");const o=(0,n.hexToBytes)(a);return i.secp256k1.verify((0,n.remove0x)(t.signature),(0,s.sha256)((0,n.stringToBytes)(e)),o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/verify.js"}],[168,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const t=e.NftController;if((0,n.hasProperty)(t,"allNftContracts")&&(0,n.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&i(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}if((0,n.hasProperty)(t,"allNfts")&&(0,n.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,n.isObject)(r)&&i(r))for(const e of Object.keys(r))(0,n.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)&&i(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,n.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)&&i(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allTokens[r]}if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)&&i(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)&&i(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,n.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var n=e("@metamask/utils");function i(e){return Object.keys(e).some((e=>(0,n.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[169,{"./077-supplements/077-supplement-for-082":165,"./077-supplements/077-supplement-for-084":166,"./077-supplements/077-supplement-for-086":167,"./077-supplements/077-supplement-for-088":168,"@metamask/utils":1886,lodash:3375,loglevel:3385},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=u(e("loglevel")),s=e("@metamask/utils"),a=u(e("./077-supplements/077-supplement-for-082")),o=u(e("./077-supplements/077-supplement-for-084")),l=u(e("./077-supplements/077-supplement-for-086")),c=u(e("./077-supplements/077-supplement-for-088"));function u(e){return e&&e.__esModule?e:{default:e}}r.default={version:77,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=77;let r=function(e){if(!(0,s.hasProperty)(e,"TokenListController"))return i.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,s.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,s.hasProperty)(e.TokenListController,"tokensChainsCache"))return i.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:n}=e,{tokensChainsCache:a}=n;let o,l;for(const e in a){var c,u;if(o=a[e].data||{},l={},Array.isArray(o))for(const e of o)l[e.address]=e;else if((null===(c=Object.keys(o)[0])||void 0===c?void 0:c.toLowerCase())!==(null===(u=o[Object.keys(o)[0]])||void 0===u||null===(u=u.address)||void 0===u?void 0:u.toLowerCase()))for(const e in o)l[o[e].address]=o[e];a[e].data=Object.keys(l).length>0?l:o}return n.tokensChainsCache=a,{...e,TokenListController:{...n}}}(t.data);return r=(0,a.default)(r),r=(0,o.default)(r),r=(0,l.default)(r),r=(0,c.default)(r),t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[17,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NOTIFICATION_NAMES=void 0;r.NOTIFICATION_NAMES={accountsChanged:"metamask_accountsChanged",unlockStateChanged:"metamask_unlockStateChanged",chainChanged:"metamask_chainChanged"}}}},{package:"$root$",file:"app/scripts/controllers/permissions/enums.js"}],[170,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.hasProperty)(e,"PhishingController")||!(0,i.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[171,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:79,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[172,{lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:80,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[173,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);t.meta.version=s;const r=function(e){if(!(0,i.hasProperty)(e,"SnapController")||!(0,i.hasProperty)(e,"PermissionController")||!(0,i.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,i.isObject)(r))return e;const s="wallet_snap_";for(const[t,a]of Object.entries(r)){if(!(0,i.isObject)(a)||!(0,i.isObject)(a.permissions))return e;let r,o=1;const{permissions:l}=a,c={...l};for(const[a,u]of Object.entries(l))if(a.startsWith(s)){if(!(0,i.isObject)(u)||!(0,i.hasProperty)(u,"id")||!(0,i.hasProperty)(u,"date"))return e;if((0,i.hasProperty)(c,"wallet_snap")||(c.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,i.isObject)(c.wallet_snap))return e;if(!(0,n.isArray)(c.wallet_snap.caveats))return e;const l=a.slice(s.length),d=c.wallet_snap.caveats[0];if(!(0,i.isObject)(d))return e;if(!(0,i.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,i.hasProperty)(d,"value")||!(0,i.isObject)(d.value))return e;if(d.value[l]={},"number"!=typeof u.date||"string"!=typeof u.id)return e;u.date>o&&(o=u.date,r=u.id),delete c[a]}c.wallet_snap&&(c.wallet_snap.date=o,c.wallet_snap.id=r,a.permissions=c)}return e}(t.data);return t.data=r,t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[174,{"@metamask/utils":1886,lodash:3375,loglevel:3385,uuid:3969},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=l,t.data=function(e){if(!(0,s.hasProperty)(e,"PreferencesController"))return o.default.warn("state.PreferencesController is undefined"),e;if(!(0,s.isObject)(e.PreferencesController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,s.hasProperty)(e,"NetworkController")||!(0,s.isObject)(e.NetworkController)){var n,i;return null===(n=global.sentry)||void 0===n||null===(i=n.captureException)||void 0===i||i.call(n,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,s.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var l,c;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(s.isObject)){var u,d;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,s.isObject)(e)));return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:p}=e,{frequentRpcListDetail:f}=h;if(!Array.isArray(f))return e;const m=f.reduce(((e,{rpcUrl:t,chainId:r,ticker:n,nickname:i,rpcPrefs:s})=>({...e,[(0,a.v4)()]:{rpcUrl:t,chainId:r,ticker:n,rpcPrefs:s,nickname:i}})),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...p,networkConfigurations:m},PreferencesController:{...h}}}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),a=e("uuid"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const l=r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[175,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:n}=e;if(!(0,i.isObject)(n.networkConfigurations)){var s,a;return null===(s=global.sentry)||void 0===s||null===(a=s.captureException)||void 0===a||a.call(s,new Error("typeof NetworkController.networkConfigurations is "+typeof n.networkConfigurations)),e}const{networkConfigurations:o}=n,l={};for(const t of Object.keys(o)){const r=o[t];if(!(0,i.isObject)(r))return e;l[t]={...r,id:t}}return{...e,NetworkController:{...n,networkConfigurations:l}}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[176,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,i.hasProperty)(e.NetworkController,"network")){var n,s;if(e.NetworkController.networkId===undefined)null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const a={...e.NetworkController};"loading"===a.network?(a.networkId=null,a.networkStatus="unknown"):(a.networkId=a.network,a.networkStatus="available");return delete a.network,{...e,NetworkController:a}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[177,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,i.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[178,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.hasProperty)(e.NetworkController,"provider")){var i,s;if(e.NetworkController.providerConfig===undefined)null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[179,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if(!(0,n.isObject)(e.TokensController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[18,{"./background-api":15,"./caveat-mutators":16,"./enums":17,"./selectors":19,"./specifications":20},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./caveat-mutators");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=e("./background-api");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=e("./enums");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=e("./specifications");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=e("./selectors");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}))}}},{package:"$root$",file:"app/scripts/controllers/permissions/index.js"}],[180,{"@metamask/utils":1886,"ethereumjs-util":2768,lodash:3375,loglevel:3385},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=l,function(e){if((0,i.hasProperty)(e,"NftController")&&(0,i.isObject)(e.NftController)){const l=e.NftController;if((0,i.hasProperty)(l,"allNftContracts")&&(0,i.isObject)(l.allNftContracts)){const{allNftContracts:e}=l;Object.keys(e).every((t=>(0,i.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,i.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined||delete r[e];e[t]=(0,a.mapKeys)(r,((e,t)=>c(t)))}}))}else if((0,i.hasProperty)(l,"allNftContracts")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof l.allNftContracts))}else o.default.warn("typeof state.NftController.allNftContracts is "+typeof l.allNftContracts);if((0,i.hasProperty)(l,"allNfts")&&(0,i.isObject)(l.allNfts)){const{allNfts:e}=l;Object.keys(e).every((t=>(0,i.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,i.isObject)(r)){for(const e of Object.keys(r))"undefined"!==e&&e!==undefined||delete r[e];e[t]=(0,a.mapKeys)(r,((e,t)=>c(t)))}}))}else if((0,i.hasProperty)(l,"allNfts")){var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NftController.allNfts is "+typeof l.allNfts))}else o.default.warn("typeof state.NftController.allNfts is "+typeof l.allNfts);e.NftController=l}else if((0,i.hasProperty)(e,"NftController")){var l,u;null===(l=global.sentry)||void 0===l||null===(u=l.captureException)||void 0===u||u.call(l,new Error("typeof state.NftController is "+typeof e.NftController))}else o.default.warn("typeof state.NftController is undefined");if((0,i.hasProperty)(e,"TokenListController")&&(0,i.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,i.hasProperty)(t,"tokensChainsCache")&&(0,i.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,a.mapKeys)(t.tokensChainsCache,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"tokensChainsCache")){var d,h;null===(d=global.sentry)||void 0===d||null===(h=d.captureException)||void 0===h||h.call(d,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else o.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else o.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,i.hasProperty)(e,"TokensController")&&(0,i.isObject)(e.TokensController)){const t=e.TokensController;if((0,i.hasProperty)(t,"allTokens")&&(0,i.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined||delete e[t];t.allTokens=(0,a.mapKeys)(e,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"allTokens")){var p,f;null===(p=global.sentry)||void 0===p||null===(f=p.captureException)||void 0===f||f.call(p,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else o.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,i.hasProperty)(t,"allIgnoredTokens")&&(0,i.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined||delete e[t];t.allIgnoredTokens=(0,a.mapKeys)(e,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"allIgnoredTokens")){var m,g;null===(m=global.sentry)||void 0===m||null===(g=m.captureException)||void 0===g||g.call(m,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else o.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,i.hasProperty)(t,"allDetectedTokens")&&(0,i.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined||delete e[t];t.allDetectedTokens=(0,a.mapKeys)(e,((e,t)=>c(t)))}else if((0,i.hasProperty)(t,"allDetectedTokens")){var v,_;null===(v=global.sentry)||void 0===v||null===(_=v.captureException)||void 0===_||_.call(v,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else o.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var w,b;null===(w=global.sentry)||void 0===w||null===(b=w.captureException)||void 0===b||b.call(w,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},r.version=void 0;var n,i=e("@metamask/utils"),s=e("ethereumjs-util"),a=e("lodash"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const l=r.version=88;function c(e){if("string"==typeof e&&(0,i.isStrictHexString)(e))return e;return`0x${s.BN.isBN(e)?e.toString(16):new s.BN(e.toString(),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[181,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:r}=e.NetworkController;if(!(0,n.isObject)(t))return e;if(r.id)return e;let i;for(const s of Object.keys(t)){const a=t[s];if(!(0,n.isObject)(a))return e;if(a.rpcUrl===r.rpcUrl){i=a.id;break}}return i?(e.NetworkController.providerConfig={...r,id:i},{...e,NetworkController:e.NetworkController}):e}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.isObject)(e.NetworkController.providerConfig)){var i,s;null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[182,{"@metamask/utils":1886,lodash:3375,loglevel:3385},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,s.hasProperty)(e,"PhishingController"))return a.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,s.isObject)(e.PhishingController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,s.hasProperty)(e.PhishingController,"listState"))return a.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};const o=r.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[183,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,n.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,r]of Object.entries(t))(0,n.isObject)(r)&&(r.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.isObject)(e.NetworkController.networkConfigurations)){var i,s;null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[184,{"@metamask/utils":1886,lodash:3375,loglevel:3385},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,s.hasProperty)(e,"TokenListController"))return a.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,s.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,s.hasProperty)(e.TokenListController,"tokensChainsCache"))return a.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};const o=r.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[1840,{"./chunk-BTR56Y3F.js":1842,"./chunk-K6XMMCKJ.js":1843,"./chunk-KQMYR73X.js":1844,"@metamask/controller-utils":1864,"@metamask/utils":1886,"bn.js":2474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-K6XMMCKJ.js"),s=e("./chunk-KQMYR73X.js"),a=e("./chunk-BTR56Y3F.js"),o=e("@metamask/controller-utils"),l=e("@metamask/utils"),c=e("bn.js"),u=(n=c)&&n.__esModule?n:{default:n},d=s.createModuleLogger.call(void 0,s.projectLogger,"gas"),h=1.5;function p(e){const t=("string"==typeof e?o.hexToBN.call(void 0,e):new(0,u.default)(e)).muln(h);return l.add0x.call(void 0,t.toString(16))}r.updateGas=async function(e,t,r){const{userOperation:n}=e;if(t.gas)return n.callGasLimit=t.gas.callGasLimit,n.preVerificationGas=t.gas.preVerificationGas,n.verificationGasLimit=t.gas.verificationGasLimit,void d("Using gas values from smart contract account",{callGasLimit:n.callGasLimit,preVerificationGas:n.preVerificationGas,verificationGasLimit:n.verificationGasLimit});const s={...n,maxFeePerGas:a.VALUE_ZERO,maxPriorityFeePerGas:a.VALUE_ZERO,callGasLimit:a.VALUE_ZERO,preVerificationGas:a.VALUE_ZERO,verificationGasLimit:"0xF4240"},o=new(0,i.Bundler)(e.bundlerUrl),l=await o.estimateUserOperationGas(s,r);n.callGasLimit=p(l.callGasLimit),n.preVerificationGas=p(l.preVerificationGas),n.verificationGasLimit=p(l.verificationGasLimit??l.verificationGas),d("Using buffered gas values from bundler estimate",{callGasLimit:n.callGasLimit,preVerificationGas:n.preVerificationGas,verificationGasLimit:n.verificationGasLimit,multiplier:h,estimate:l})}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-7JPKNM2X.js"}],[1841,{"./chunk-K6XMMCKJ.js":1843,"./chunk-KQMYR73X.js":1844,"./chunk-Z4BLTVTB.js":1851,"@metamask/controller-utils":1864,"@metamask/eth-query":1147,"@metamask/polling-controller":1491,"@metamask/utils":1886,events:2809},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i,s,a,o,l,c,u,d,h,p,f,m,g,v,_,w,b=e("./chunk-K6XMMCKJ.js"),y=e("./chunk-KQMYR73X.js"),k=e("./chunk-Z4BLTVTB.js"),S=e("@metamask/controller-utils"),E=n(e("@metamask/eth-query")),T=e("@metamask/polling-controller"),C=e("@metamask/utils"),P=n(e("events")),M=C.createModuleLogger.call(void 0,y.projectLogger,"pending-user-operations"),j=class extends T.BlockTrackerPollingControllerOnly{constructor({getUserOperations:e,messenger:t}){super(),k.__privateAdd.call(void 0,this,a),k.__privateAdd.call(void 0,this,l),k.__privateAdd.call(void 0,this,u),k.__privateAdd.call(void 0,this,h),k.__privateAdd.call(void 0,this,f),k.__privateAdd.call(void 0,this,g),k.__privateAdd.call(void 0,this,_),k.__privateAdd.call(void 0,this,i,void 0),k.__privateAdd.call(void 0,this,s,void 0),this.hub=new(0,P.default),k.__privateSet.call(void 0,this,i,e),k.__privateSet.call(void 0,this,s,t)}async _executePoll(e,t){try{const{blockTracker:t,configuration:r,provider:n}=this._getNetworkClientById(e);M("Polling",{blockNumber:t.getCurrentBlock(),chainId:r.chainId}),await k.__privateMethod.call(void 0,this,a,o).call(this,r.chainId,n)}catch(e){M("Failed to check user operations",e)}}_getNetworkClientById(e){return k.__privateGet.call(void 0,this,s).call("NetworkController:getNetworkClientById",e)}};i=new WeakMap,s=new WeakMap,a=new WeakSet,o=async function(e,t){const r=k.__privateMethod.call(void 0,this,f,m).call(this).filter((t=>t.chainId===e));r.length?(M("Found pending user operations to check",{count:r.length,ids:r.map((e=>e.id))}),await Promise.all(r.map((e=>k.__privateMethod.call(void 0,this,l,c).call(this,e,t))))):M("No pending user operations to check")},l=new WeakSet,c=async function(e,t){const{bundlerUrl:r,hash:n,id:i}=e;if(n&&r)try{const s=await k.__privateMethod.call(void 0,this,_,w).call(this,n,r),a=s?.success;if(s&&!a)return void k.__privateMethod.call(void 0,this,h,p).call(this,e,s);if(a)return void await k.__privateMethod.call(void 0,this,u,d).call(this,e,s,t);M("No receipt found for user operation",{id:i,hash:n})}catch(e){M("Failed to check user operation",i,e)}else M("Skipping user operation as missing hash or bundler",i)},u=new WeakSet,d=async function(e,t,r){const{id:n}=e,{actualGasCost:i,actualGasUsed:s,receipt:{blockHash:a,transactionHash:o}}=t;M("User operation confirmed",n,o);const{baseFeePerGas:l}=await S.query.call(void 0,new(0,E.default)(r),"getBlockByHash",[a,!1]);e.actualGasCost=i,e.actualGasUsed=s,e.baseFeePerGas=l,e.status="confirmed",e.transactionHash=o,k.__privateMethod.call(void 0,this,g,v).call(this,e),this.hub.emit("user-operation-confirmed",e)},h=new WeakSet,p=function(e,t){const{id:r}=e;M("User operation failed",r),e.status="failed",k.__privateMethod.call(void 0,this,g,v).call(this,e),this.hub.emit("user-operation-failed",e,new Error("User operation receipt has failed status"))},f=new WeakSet,m=function(){return k.__privateGet.call(void 0,this,i).call(this).filter((e=>"submitted"===e.status))},g=new WeakSet,v=function(e){this.hub.emit("user-operation-updated",e)},_=new WeakSet,w=async function(e,t){return new(0,b.Bundler)(t).getUserOperationReceipt(e)},r.PendingUserOperationTracker=j}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-B7GI5EWI.js"}],[1842,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.EMPTY_BYTES="0x",r.ADDRESS_ZERO="0x0000000000000000000000000000000000000000",r.VALUE_ZERO="0x0"}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-BTR56Y3F.js"}],[1843,{"./chunk-KQMYR73X.js":1844,"./chunk-Z4BLTVTB.js":1851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a=e("./chunk-KQMYR73X.js"),o=e("./chunk-Z4BLTVTB.js"),l=a.createModuleLogger.call(void 0,a.projectLogger,"bundler");n=new WeakMap,i=new WeakSet,s=async function(e,t){const r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:e,params:t})},i=await fetch(o.__privateGet.call(void 0,this,n),r),s=await i.json();if(s.error){const e=new Error(s.error.message||s.error);throw e.code=s.error.code,e}return s.result},r.Bundler=class{constructor(e){o.__privateAdd.call(void 0,this,i),o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,n,e)}async estimateUserOperationGas(e,t){l("Estimating gas",{url:o.__privateGet.call(void 0,this,n),userOperation:e,entrypoint:t});const r=await o.__privateMethod.call(void 0,this,i,s).call(this,"eth_estimateUserOperationGas",[e,t]);return l("Estimated gas",{response:r}),r}async getUserOperationReceipt(e){return l("Getting user operation receipt",{url:o.__privateGet.call(void 0,this,n),hash:e}),await o.__privateMethod.call(void 0,this,i,s).call(this,"eth_getUserOperationReceipt",[e])}async sendUserOperation(e,t){l("Sending user operation",{url:o.__privateGet.call(void 0,this,n),userOperation:e,entrypoint:t});const r=await o.__privateMethod.call(void 0,this,i,s).call(this,"eth_sendUserOperation",[e,t]);return l("Sent user operation",r),r}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-K6XMMCKJ.js"}],[1844,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils"),i=n.createProjectLogger.call(void 0,"user-operation-controller");r.createModuleLogger=n.createModuleLogger,r.projectLogger=i}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-KQMYR73X.js"}],[1845,{"./chunk-BTR56Y3F.js":1842,"@metamask/transaction-controller":1827,"@metamask/utils":1886,superstruct:3904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-BTR56Y3F.js"),i=e("@metamask/transaction-controller"),s=e("@metamask/utils"),a=e("superstruct");function o(e,t,r){try{a.assert.call(void 0,e,t,r)}catch(e){const t=e.failures().map((e=>e.path.length?`${e.path.join(".")} - ${e.message}`:e.message)).join("\n");throw new Error(`${r}\n${t}`)}}function l(){return a.define.call(void 0,"Hexadecimal String",(e=>s.isStrictHexString.call(void 0,e)))}function c(){return a.define.call(void 0,"Hexadecimal String or 0x",(e=>s.isStrictHexString.call(void 0,e)||e===n.EMPTY_BYTES))}r.validateAddUserOperationRequest=function(e){const t=l(),r=c();o(e,a.object.call(void 0,{data:a.optional.call(void 0,r),from:t,maxFeePerGas:a.optional.call(void 0,t),maxPriorityFeePerGas:a.optional.call(void 0,t),to:a.optional.call(void 0,t),value:a.optional.call(void 0,t)}),"Invalid request to add user operation")},r.validateAddUserOperationOptions=function(e){o(e,a.object.call(void 0,{networkClientId:a.string.call(void 0),origin:a.string.call(void 0),requireApproval:a.optional.call(void 0,a.boolean.call(void 0)),smartContractAccount:a.optional.call(void 0,a.object.call(void 0,{prepareUserOperation:a.func.call(void 0),updateUserOperation:a.func.call(void 0),signUserOperation:a.func.call(void 0)})),swaps:a.optional.call(void 0,a.object.call(void 0,{approvalTxId:a.optional.call(void 0,a.string.call(void 0)),destinationTokenAddress:a.optional.call(void 0,a.string.call(void 0)),destinationTokenDecimals:a.optional.call(void 0,a.number.call(void 0)),destinationTokenSymbol:a.optional.call(void 0,a.string.call(void 0)),estimatedBaseFee:a.optional.call(void 0,a.string.call(void 0)),sourceTokenSymbol:a.optional.call(void 0,a.string.call(void 0)),swapMetaData:a.optional.call(void 0,a.object.call(void 0)),swapTokenValue:a.optional.call(void 0,a.string.call(void 0))})),type:a.optional.call(void 0,a.enums.call(void 0,Object.values(i.TransactionType)))}),"Invalid options to add user operation")},r.validatePrepareUserOperationResponse=function(e){const t=l(),r=c();o(e,a.refine.call(void 0,a.object.call(void 0,{bundler:a.string.call(void 0),callData:t,dummyPaymasterAndData:a.optional.call(void 0,r),dummySignature:a.optional.call(void 0,r),gas:a.optional.call(void 0,a.object.call(void 0,{callGasLimit:t,preVerificationGas:t,verificationGasLimit:t})),initCode:a.optional.call(void 0,r),nonce:t,sender:t}),"ValidPrepareUserOperationResponse",(({gas:e,dummySignature:t})=>!!(e||t&&t!==n.EMPTY_BYTES)||"Must specify dummySignature if not specifying gas")),"Invalid response when preparing user operation")},r.validateUpdateUserOperationResponse=function(e){const t=l();o(e,a.optional.call(void 0,a.object.call(void 0,{paymasterAndData:a.optional.call(void 0,t)})),"Invalid response when updating user operation")},r.validateSignUserOperationResponse=function(e){const t=l();o(e,a.object.call(void 0,{signature:t}),"Invalid response when signing user operation")}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-OH6WM4Z6.js"}],[1846,{"./chunk-BTR56Y3F.js":1842,"./chunk-Z4BLTVTB.js":1851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-BTR56Y3F.js"),s=e("./chunk-Z4BLTVTB.js");n=new WeakMap,r.SnapSmartContractAccount=class{constructor(e){s.__privateAdd.call(void 0,this,n,void 0),s.__privateSet.call(void 0,this,n,e)}async prepareUserOperation(e){const{data:t,from:r,to:a,value:o}=e,l=t??i.EMPTY_BYTES,c=a??i.ADDRESS_ZERO,u=o??i.VALUE_ZERO,d=await s.__privateGet.call(void 0,this,n).call("KeyringController:prepareUserOperation",r,[{data:l,to:c,value:u}]),{bundlerUrl:h,callData:p,dummyPaymasterAndData:f,dummySignature:m,gasLimits:g,initCode:v,nonce:_}=d;return{bundler:h,callData:p,dummyPaymasterAndData:f,dummySignature:m,gas:g,initCode:v,nonce:_,sender:r}}async updateUserOperation(e){const{userOperation:t}=e,{sender:r}=t,{paymasterAndData:a}=await s.__privateGet.call(void 0,this,n).call("KeyringController:patchUserOperation",r,t);return{paymasterAndData:a===i.EMPTY_BYTES?void 0:a}}async signUserOperation(e){const{userOperation:t}=e,{sender:r}=t;return{signature:await s.__privateGet.call(void 0,this,n).call("KeyringController:signUserOperation",r,t)}}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-QVY5Q2VX.js"}],[1847,{"./chunk-BTR56Y3F.js":1842,"./chunk-KQMYR73X.js":1844,"@metamask/controller-utils":1864,"@metamask/eth-query":1147,"@metamask/gas-fee-controller":1236,"@metamask/transaction-controller":1827,"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-KQMYR73X.js"),s=e("./chunk-BTR56Y3F.js"),a=e("@metamask/controller-utils"),o=e("@metamask/eth-query"),l=(n=o)&&n.__esModule?n:{default:n},c=e("@metamask/gas-fee-controller"),u=e("@metamask/transaction-controller"),d=e("@metamask/utils"),h=i.createModuleLogger.call(void 0,i.projectLogger,"gas-fees");function p(e){return a.toHex.call(void 0,a.gweiDecToWEIBN.call(void 0,e))}function f(e){return!e||e===s.EMPTY_BYTES}r.updateGasFees=async function(e){const{metadata:t,originalRequest:r,transaction:n}=e,{userOperation:i}=t;let s;const o=async()=>(s||(s=await async function(e){const{getGasFeeEstimates:t,provider:r}=e;try{const{gasFeeEstimates:e,gasEstimateType:r}=await t();if(r===c.GAS_ESTIMATE_TYPES.FEE_MARKET){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}={}}=e;if(t&&r){const e={maxFeePerGas:p(r),maxPriorityFeePerGas:p(t)};return h("Using medium values from fee market estimate",e),e}}if(r===c.GAS_ESTIMATE_TYPES.LEGACY){const t=p(e.medium);return h("Using medium value from legacy estimate",t),{maxFeePerGas:t}}if(r===c.GAS_ESTIMATE_TYPES.ETH_GASPRICE){const t=p(e.gasPrice);return h("Using gasPrice from estimate",t),{maxFeePerGas:t}}}catch(e){h("Failed to get estimate",e)}const n=await a.query.call(void 0,new(0,l.default)(r),"gasPrice");if(!n)return{};const i=d.add0x.call(void 0,n.toString(16));return h("Using gasPrice from network as fallback",i),{maxFeePerGas:i}}(e)),s);i.maxFeePerGas=await async function(e,t,r){const{maxFeePerGas:n,maxPriorityFeePerGas:i}=e,{gasPrice:s}=r??{};if(!f(n))return h("Using maxFeePerGas from request",n),n;if(f(i)&&s)return h("Setting maxFeePerGas to transaction gasPrice",s),s;const{maxFeePerGas:a}=await t();if(!a)throw new Error("Failed to get gas fee estimate for maxFeePerGas");return h("Using maxFeePerGas from estimate",a),a}(r,o,n),i.maxPriorityFeePerGas=await async function(e,t,r,n){const{maxFeePerGas:i,maxPriorityFeePerGas:s}=e,{gasPrice:a}=n??{},{maxFeePerGas:o}=r;if(!f(s))return h("Using maxPriorityFeePerGas from request",s),s;if(f(i)&&a)return h("Setting maxPriorityFeePerGas to transaction gasPrice",a),a;const{maxPriorityFeePerGas:l}=await t();if(l)return h("Using maxPriorityFeePerGas from estimate",l),l;return h("Setting maxPriorityFeePerGas to maxFeePerGas",o),o}(r,o,i,n),t.userFeeLevel=function(e,t,r,n){const{origin:i}=e,{maxFeePerGas:s,maxPriorityFeePerGas:o}=t,{maxFeePerGas:l,maxPriorityFeePerGas:c}=r||{};if(f(s)&&f(o)&&n?.gasPrice)return i===a.ORIGIN_METAMASK?u.UserFeeLevel.CUSTOM:u.UserFeeLevel.DAPP_SUGGESTED;if(f(s)&&f(o)&&l&&c)return u.UserFeeLevel.MEDIUM;if(i===a.ORIGIN_METAMASK)return u.UserFeeLevel.CUSTOM;return u.UserFeeLevel.DAPP_SUGGESTED}(t,r,s,n)}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-SSHRMBLI.js"}],[1848,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e=>(e.Unapproved="unapproved",e.Approved="approved",e.Signed="signed",e.Submitted="submitted",e.Failed="failed",e.Confirmed="confirmed",e))(n||{});r.UserOperationStatus=n}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-W4DFKKZT.js"}],[1849,{"./chunk-7JPKNM2X.js":1840,"./chunk-B7GI5EWI.js":1841,"./chunk-BTR56Y3F.js":1842,"./chunk-K6XMMCKJ.js":1843,"./chunk-KQMYR73X.js":1844,"./chunk-OH6WM4Z6.js":1845,"./chunk-QVY5Q2VX.js":1846,"./chunk-SSHRMBLI.js":1847,"./chunk-WF3VLEGJ.js":1850,"./chunk-Z4BLTVTB.js":1851,"@metamask/base-controller":1858,"@metamask/controller-utils":1864,"@metamask/eth-query":1147,"@metamask/rpc-errors":1562,"@metamask/transaction-controller":1827,"@metamask/utils":1886,events:2809,lodash:3375,uuid:3969},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i,s,a,o,l,c,u,d,h,p,f,m,g,v,_,w,b,y,k,S,E,T,C,P,M,j,A,N,R,O,I,x,L,D,B,W,U,F,H,G,$,q,V,K=e("./chunk-SSHRMBLI.js"),Y=e("./chunk-7JPKNM2X.js"),J=e("./chunk-WF3VLEGJ.js"),X=e("./chunk-OH6WM4Z6.js"),z=e("./chunk-B7GI5EWI.js"),Z=e("./chunk-K6XMMCKJ.js"),Q=e("./chunk-KQMYR73X.js"),ee=e("./chunk-QVY5Q2VX.js"),te=e("./chunk-BTR56Y3F.js"),re=e("./chunk-Z4BLTVTB.js"),ne=e("@metamask/base-controller"),ie=e("@metamask/controller-utils"),se=n(e("@metamask/eth-query")),ae=e("@metamask/rpc-errors"),oe=e("@metamask/transaction-controller"),le=e("@metamask/utils"),ce=n(e("events")),ue=e("lodash"),de=e("uuid"),he={userOperations:{persist:!0,anonymous:!1}},pe=class extends ne.BaseController{constructor({entrypoint:e,getGasFeeEstimates:t,messenger:r,state:n}){super({name:"UserOperationController",metadata:he,messenger:r,state:{userOperations:{},...n}}),re.__privateAdd.call(void 0,this,o),re.__privateAdd.call(void 0,this,c),re.__privateAdd.call(void 0,this,d),re.__privateAdd.call(void 0,this,p),re.__privateAdd.call(void 0,this,m),re.__privateAdd.call(void 0,this,v),re.__privateAdd.call(void 0,this,w),re.__privateAdd.call(void 0,this,y),re.__privateAdd.call(void 0,this,S),re.__privateAdd.call(void 0,this,T),re.__privateAdd.call(void 0,this,P),re.__privateAdd.call(void 0,this,j),re.__privateAdd.call(void 0,this,N),re.__privateAdd.call(void 0,this,O),re.__privateAdd.call(void 0,this,x),re.__privateAdd.call(void 0,this,D),re.__privateAdd.call(void 0,this,W),re.__privateAdd.call(void 0,this,F),re.__privateAdd.call(void 0,this,G),re.__privateAdd.call(void 0,this,q),re.__privateAdd.call(void 0,this,i,void 0),re.__privateAdd.call(void 0,this,s,void 0),re.__privateAdd.call(void 0,this,a,void 0),this.hub=new(0,ce.default),re.__privateSet.call(void 0,this,i,e),re.__privateSet.call(void 0,this,s,t),re.__privateSet.call(void 0,this,a,new(0,z.PendingUserOperationTracker)({getUserOperations:()=>ue.cloneDeep.call(void 0,Object.values(this.state.userOperations)),messenger:r})),re.__privateMethod.call(void 0,this,x,L).call(this)}async addUserOperation(e,t){return X.validateAddUserOperationRequest.call(void 0,e),X.validateAddUserOperationOptions.call(void 0,t),await re.__privateMethod.call(void 0,this,o,l).call(this,e,t)}async addUserOperationFromTransaction(e,t){X.validateAddUserOperationOptions.call(void 0,t);const{data:r,from:n,maxFeePerGas:i,maxPriorityFeePerGas:s,to:a,value:c}=e,u={data:""===r?void 0:r,from:n,maxFeePerGas:i,maxPriorityFeePerGas:s,to:a,value:c};return X.validateAddUserOperationRequest.call(void 0,u),await re.__privateMethod.call(void 0,this,o,l).call(this,u,{...t,transaction:e})}startPollingByNetworkClientId(e){return re.__privateGet.call(void 0,this,a).startPollingByNetworkClientId(e)}};i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=async function(e,t){Q.projectLogger.call(void 0,"Adding user operation",{request:e,options:t});const{networkClientId:r,origin:n,smartContractAccount:i,swaps:s,transaction:a}=t,{chainId:o,provider:l}=await re.__privateMethod.call(void 0,this,F,H).call(this,r),m=await re.__privateMethod.call(void 0,this,p,f).call(this,o,n,a,s),g=i??new(0,ee.SnapSmartContractAccount)(this.messagingSystem),v={chainId:o,metadata:m,options:{...t,smartContractAccount:g},provider:l,request:e,transaction:a},{id:_}=m;let w=!1;const b=(async()=>{try{return await re.__privateMethod.call(void 0,this,c,u).call(this,v)}catch(e){if(re.__privateMethod.call(void 0,this,T,C).call(this,m,e),w)throw e;return}})(),y=async()=>(w=!0,await b);return{id:_,hash:y,transactionHash:async()=>{await y();const{transactionHash:e}=await re.__privateMethod.call(void 0,this,d,h).call(this,m);return e}}},c=new WeakSet,u=async function(e){const{metadata:t,options:r}=e,{requireApproval:n,smartContractAccount:i}=r;let s;try{return await re.__privateMethod.call(void 0,this,m,g).call(this,e),await re.__privateMethod.call(void 0,this,v,_).call(this,t,i),this.hub.emit("user-operation-added",t),!1!==n&&(s=await re.__privateMethod.call(void 0,this,w,b).call(this,e)),await re.__privateMethod.call(void 0,this,y,k).call(this,t,i),await re.__privateMethod.call(void 0,this,S,E).call(this,t),s?.success(),t.hash}catch(e){throw s?.error(e),e}},d=new WeakSet,h=async function(e){const{id:t,hash:r}=e;return Q.projectLogger.call(void 0,"Waiting for confirmation",t,r),new Promise(((e,r)=>{this.hub.once(`${t}:confirmed`,(t=>{e(t)})),this.hub.once(`${t}:failed`,((e,t)=>{r(t)}))}))},p=new WeakSet,f=async function(e,t,r,n){const i={actualGasCost:null,actualGasUsed:null,baseFeePerGas:null,bundlerUrl:null,chainId:e,error:null,hash:null,id:de.v1.call(void 0),origin:t,status:"unapproved",swapsMetadata:n?{approvalTxId:n.approvalTxId??null,destinationTokenAddress:n.destinationTokenAddress??null,destinationTokenDecimals:n.destinationTokenDecimals??null,destinationTokenSymbol:n.destinationTokenSymbol??null,estimatedBaseFee:n.estimatedBaseFee??null,sourceTokenSymbol:n.sourceTokenSymbol??null,swapMetaData:n.swapMetaData??null,swapTokenValue:n.swapTokenValue??null}:null,time:Date.now(),transactionHash:null,transactionParams:r??null,transactionType:null,userFeeLevel:null,userOperation:re.__privateMethod.call(void 0,this,P,M).call(this,r)};return re.__privateMethod.call(void 0,this,j,A).call(this,i),Q.projectLogger.call(void 0,"Added user operation",i.id),i},m=new WeakSet,g=async function(e){const{chainId:t,metadata:r,options:n,provider:a,request:o,transaction:l}=e,{data:c,from:u,to:d,value:h}=o,{id:p,transactionParams:f,userOperation:m}=r,{smartContractAccount:g}=n;Q.projectLogger.call(void 0,"Preparing user operation",{id:p});const v=await re.__privateMethod.call(void 0,this,W,U).call(this,l,a,n);r.transactionType=v??null,Q.projectLogger.call(void 0,"Determined transaction type",v),await K.updateGasFees.call(void 0,{getGasFeeEstimates:re.__privateGet.call(void 0,this,s),metadata:r,originalRequest:o,provider:a,transaction:f??void 0});const _=await g.prepareUserOperation({chainId:t,data:c,from:u,to:d,value:h});X.validatePrepareUserOperationResponse.call(void 0,_);const{bundler:w,callData:b,dummyPaymasterAndData:y,dummySignature:k,initCode:S,nonce:E,sender:T}=_;m.callData=b,m.initCode=S??te.EMPTY_BYTES,m.nonce=E,m.paymasterAndData=y??te.EMPTY_BYTES,m.sender=T,m.signature=k??te.EMPTY_BYTES,r.bundlerUrl=w,await Y.updateGas.call(void 0,r,_,re.__privateGet.call(void 0,this,i)),re.__privateMethod.call(void 0,this,j,A).call(this,r)},v=new WeakSet,_=async function(e,t){const{id:r,userOperation:n}=e;Q.projectLogger.call(void 0,"Requesting paymaster data",{id:r});const i=await t.updateUserOperation({userOperation:n});X.validateUpdateUserOperationResponse.call(void 0,i),n.paymasterAndData=i.paymasterAndData??te.EMPTY_BYTES,re.__privateMethod.call(void 0,this,j,A).call(this,e)},w=new WeakSet,b=async function(e){Q.projectLogger.call(void 0,"Requesting approval");const{metadata:t}=e,{resultCallbacks:r,value:n}=await re.__privateMethod.call(void 0,this,D,B).call(this,t),i=n?.txMeta;return i&&await re.__privateMethod.call(void 0,this,G,$).call(this,e,i),t.status="approved",re.__privateMethod.call(void 0,this,j,A).call(this,t),r},y=new WeakSet,k=async function(e,t){const{id:r,chainId:n,userOperation:i}=e;Q.projectLogger.call(void 0,"Signing user operation",r,i);const s=await t.signUserOperation({userOperation:i,chainId:n});X.validateSignUserOperationResponse.call(void 0,s);const{signature:a}=s;i.signature=a,Q.projectLogger.call(void 0,"Signed user operation",a),e.status="signed",re.__privateMethod.call(void 0,this,j,A).call(this,e)},S=new WeakSet,E=async function(e){const{userOperation:t}=e;Q.projectLogger.call(void 0,"Submitting user operation",t);const r=new(0,Z.Bundler)(e.bundlerUrl),n=await r.sendUserOperation(t,re.__privateGet.call(void 0,this,i));e.hash=n,e.status="submitted",re.__privateMethod.call(void 0,this,j,A).call(this,e)},T=new WeakSet,C=function(e,t){const{id:r}=e,n=t;Q.projectLogger.call(void 0,"User operation failed",r,t),e.error={name:n.name,message:n.message,stack:n.stack,code:n.code,rpc:n.value},e.status="failed",re.__privateMethod.call(void 0,this,j,A).call(this,e),String(n.code)===String(ae.errorCodes.provider.userRejectedRequest)&&re.__privateMethod.call(void 0,this,N,R).call(this,r)},P=new WeakSet,M=function(e){return{callData:te.EMPTY_BYTES,callGasLimit:te.EMPTY_BYTES,initCode:te.EMPTY_BYTES,maxFeePerGas:e?.maxFeePerGas??te.EMPTY_BYTES,maxPriorityFeePerGas:e?.maxPriorityFeePerGas??te.EMPTY_BYTES,nonce:te.EMPTY_BYTES,paymasterAndData:te.EMPTY_BYTES,preVerificationGas:te.EMPTY_BYTES,sender:te.ADDRESS_ZERO,signature:te.EMPTY_BYTES,verificationGasLimit:te.EMPTY_BYTES}},j=new WeakSet,A=function(e){const{id:t}=e;this.update((r=>{r.userOperations[t]=ue.cloneDeep.call(void 0,e)})),re.__privateMethod.call(void 0,this,O,I).call(this,e)},N=new WeakSet,R=function(e){this.update((t=>{delete t.userOperations[e]}))},O=new WeakSet,I=function(e){if(!e.transactionParams)return;const t=J.getTransactionMetadata.call(void 0,e);this.hub.emit("transaction-updated",t)},x=new WeakSet,L=function(){re.__privateGet.call(void 0,this,a).hub.on("user-operation-confirmed",(e=>{Q.projectLogger.call(void 0,"In listener..."),this.hub.emit("user-operation-confirmed",e),this.hub.emit(`${e.id}:confirmed`,e)})),re.__privateGet.call(void 0,this,a).hub.on("user-operation-failed",((e,t)=>{this.hub.emit("user-operation-failed",e,t),this.hub.emit(`${e.id}:failed`,e,t)})),re.__privateGet.call(void 0,this,a).hub.on("user-operation-updated",(e=>{re.__privateMethod.call(void 0,this,j,A).call(this,e)}))},D=new WeakSet,B=async function(e){const{id:t,origin:r}=e,n=ie.ApprovalType.Transaction,i={txId:t};return await this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:n,requestData:i,expectsResult:!0},!0)},W=new WeakSet,U=async function(e,t,r){if(!e)return;if(r.type)return r.type;const n=new(0,se.default)(t),i=oe.determineTransactionType.call(void 0,e,n);return(await i).type},F=new WeakSet,H=async function(e){const{provider:t,configuration:r}=this.messagingSystem.call("NetworkController:getNetworkClientById",e),{chainId:n}=r;return{provider:t,chainId:n}},G=new WeakSet,$=async function(e,t){Q.projectLogger.call(void 0,"Found updated transaction in approval",{updatedTransaction:t});const{metadata:r,request:n}=e,{userOperation:i}=r,s=i.paymasterAndData!==te.EMPTY_BYTES,a=le.add0x.call(void 0,t.txParams.maxFeePerGas),o=le.add0x.call(void 0,t.txParams.maxPriorityFeePerGas);let l=!1;const c=i.maxFeePerGas,u=i.maxPriorityFeePerGas;c===a&&u===o||(Q.projectLogger.call(void 0,"Gas fees updated during approval",{previousMaxFeePerGas:c,previousMaxPriorityFeePerGas:u,updatedMaxFeePerGas:a,updatedMaxPriorityFeePerGas:o}),i.maxFeePerGas=a,i.maxPriorityFeePerGas=o,l=s);const d=n.data??te.EMPTY_BYTES,h=t.txParams.data??te.EMPTY_BYTES;d!==h&&(Q.projectLogger.call(void 0,"Data updated during approval",{previousData:d,updatedData:h}),l=!0);const p=n.value??te.VALUE_ZERO,f=t.txParams.value??te.VALUE_ZERO;if(p!==f&&(Q.projectLogger.call(void 0,"Value updated during approval",{previousValue:p,updatedValue:f}),l=!0),l){const t={...n,data:h,maxFeePerGas:a,maxPriorityFeePerGas:o,value:f};await re.__privateMethod.call(void 0,this,q,V).call(this,{...e,request:t})}},q=new WeakSet,V=async function(e){Q.projectLogger.call(void 0,"Regenerating user operation as parameters were updated during approval");const{options:{smartContractAccount:t},metadata:r}=e;await re.__privateMethod.call(void 0,this,m,g).call(this,e),await re.__privateMethod.call(void 0,this,v,_).call(this,r,t),Q.projectLogger.call(void 0,"Regenerated user operation",r.userOperation)},r.UserOperationController=pe}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-W63SSGH2.js"}],[185,{"@metamask/utils":1886,"@sentry/browser":1960,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=a,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,n.hasProperty)(e,"NetworkController")||!(0,s.isObject)(e.NetworkController))return(0,i.captureException)(`Migration ${a}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const r=e.NetworkController,o=(0,s.pick)(r,t);return{...e,NetworkController:o}}(e)}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("@sentry/browser"),s=e("lodash");const a=r.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[1850,{"./chunk-BTR56Y3F.js":1842,"@metamask/transaction-controller":1827,"@metamask/utils":1886,"bn.js":2474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-BTR56Y3F.js"),s=e("@metamask/transaction-controller"),a=e("@metamask/utils"),o=e("bn.js"),l=(n=o)&&n.__esModule?n:{default:n};r.getTransactionMetadata=function(e){const{actualGasCost:t,actualGasUsed:r,baseFeePerGas:n,chainId:o,error:c,origin:u,transactionHash:d,id:h,swapsMetadata:p,time:f,transactionParams:m,transactionType:g,userFeeLevel:v,userOperation:_}=e;if(!m)return;const w=t&&r?a.add0x.call(void 0,new(0,l.default)(a.remove0x.call(void 0,t),16).div(new(0,l.default)(a.remove0x.call(void 0,r),16)).toString(16)):void 0,b=c?{name:c.name,message:c.message,stack:c.stack,code:c.code,rpc:c.rpc}:void 0,y={unapproved:s.TransactionStatus.unapproved,approved:s.TransactionStatus.approved,signed:s.TransactionStatus.signed,submitted:s.TransactionStatus.submitted,confirmed:s.TransactionStatus.confirmed,failed:s.TransactionStatus.failed}[e.status],k=function(...e){const t=new(0,l.default)(0);for(const r of e)r&&t.iadd(new(0,l.default)(a.remove0x.call(void 0,r),16));return a.add0x.call(void 0,t.toString(16))}(_.preVerificationGas,_.verificationGasLimit,_.callGasLimit),S=_.paymasterAndData!==i.EMPTY_BYTES,E=S?i.VALUE_ZERO:_.maxFeePerGas,T=S?i.VALUE_ZERO:_.maxPriorityFeePerGas,C=_.nonce===i.EMPTY_BYTES?void 0:_.nonce,P={...m,from:_.sender,gas:k,nonce:C,maxFeePerGas:E,maxPriorityFeePerGas:T};delete P.gasPrice;const M={approvalTxId:p?.approvalTxId??void 0,destinationTokenAddress:p?.destinationTokenAddress??void 0,destinationTokenDecimals:p?.destinationTokenDecimals??void 0,destinationTokenSymbol:p?.destinationTokenSymbol??void 0,estimatedBaseFee:p?.estimatedBaseFee??void 0,sourceTokenSymbol:p?.sourceTokenSymbol??void 0,swapMetaData:p?.swapMetaData??void 0,swapTokenValue:p?.swapTokenValue??void 0};return{baseFeePerGas:n??void 0,chainId:o,error:b,hash:d??void 0,id:h,isUserOperation:!0,origin:u,status:y,time:f,txParams:P,txReceipt:{effectiveGasPrice:w??void 0,gasUsed:r??void 0},type:g??void 0,userFeeLevel:S?s.UserFeeLevel.CUSTOM:v,...M}}}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-WF3VLEGJ.js"}],[1851,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/chunk-Z4BLTVTB.js"}],[1852,{"./chunk-7JPKNM2X.js":1840,"./chunk-B7GI5EWI.js":1841,"./chunk-BTR56Y3F.js":1842,"./chunk-K6XMMCKJ.js":1843,"./chunk-KQMYR73X.js":1844,"./chunk-OH6WM4Z6.js":1845,"./chunk-QVY5Q2VX.js":1846,"./chunk-SSHRMBLI.js":1847,"./chunk-W4DFKKZT.js":1848,"./chunk-W63SSGH2.js":1849,"./chunk-WF3VLEGJ.js":1850,"./chunk-Z4BLTVTB.js":1851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-W63SSGH2.js");e("./chunk-SSHRMBLI.js"),e("./chunk-7JPKNM2X.js"),e("./chunk-WF3VLEGJ.js"),e("./chunk-OH6WM4Z6.js"),e("./chunk-B7GI5EWI.js");var i=e("./chunk-W4DFKKZT.js");e("./chunk-K6XMMCKJ.js"),e("./chunk-KQMYR73X.js"),e("./chunk-QVY5Q2VX.js"),e("./chunk-BTR56Y3F.js"),e("./chunk-Z4BLTVTB.js"),r.UserOperationController=n.UserOperationController,r.UserOperationStatus=i.UserOperationStatus}}},{package:"@metamask/user-operation-controller",file:"node_modules/@metamask/user-operation-controller/dist/index.js"}],[1853,{"./chunk-Z4BLTVTB.js":1857,immer:3129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("./chunk-Z4BLTVTB.js"),s=e("immer");s.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${String(i)}'`);const a=s[r],o=e[i];return"function"==typeof a?n[i]=a(o):a&&(n[i]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){i.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=r,i.__privateSet.call(void 0,this,n,s.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return i.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=s.produceWithPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);return i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=s.applyPatches.call(void 0,i.__privateGet.call(void 0,this,n),e);i.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-DV5LNY3P.js"}],[1854,{"./chunk-UJFCPTF3.js":1856,"./chunk-Z4BLTVTB.js":1857},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o=e("./chunk-UJFCPTF3.js"),l=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){l.__privateAdd.call(void 0,this,n,new Map),l.__privateAdd.call(void 0,this,i,new Map),l.__privateAdd.call(void 0,this,s,new Map),l.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(l.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);l.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){l.__privateGet.call(void 0,this,n).delete(e)}clearActions(){l.__privateGet.call(void 0,this,n).clear()}call(e,...t){const r=l.__privateGet.call(void 0,this,n).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){l.__privateGet.call(void 0,this,s).set(e,t)}publish(e,...t){const r=l.__privateGet.call(void 0,this,i).get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=l.__privateGet.call(void 0,this,a).get(e),i=n(...t);i!==r&&(l.__privateGet.call(void 0,this,a).set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=l.__privateGet.call(void 0,this,i).get(e);if(n||(n=new Map,l.__privateGet.call(void 0,this,i).set(e,n)),n.set(t,r),r){const n=l.__privateGet.call(void 0,this,s).get(e);if(n){const e=r(...n());l.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=l.__privateGet.call(void 0,this,i).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&l.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){l.__privateGet.call(void 0,this,i).delete(e)}clearSubscriptions(){l.__privateGet.call(void 0,this,i).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[1855,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},i=n;r.BaseControllerV1=n,r.BaseControllerV1_default=i}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-NINOM2XQ.js"}],[1856,{"./chunk-Z4BLTVTB.js":1857},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a,o,l,c,u,d,h,p=e("./chunk-Z4BLTVTB.js");n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,a);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},c=new WeakSet,u=function(e){const t=p.__privateGet.call(void 0,this,s);return p.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,i)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:l}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,c),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,s,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateSet.call(void 0,this,n,e),p.__privateSet.call(void 0,this,i,t),p.__privateSet.call(void 0,this,s,r),p.__privateSet.call(void 0,this,a,l)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,c,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,r){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?p.__privateGet.call(void 0,this,n).subscribe(e,t,r):p.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,l).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,i)}:'`);p.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[1857,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(n(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,i)=>(n(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(n(e,t,"access private method"),r)}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[1858,{"./chunk-DV5LNY3P.js":1853,"./chunk-G42723LG.js":1854,"./chunk-NINOM2XQ.js":1855,"./chunk-UJFCPTF3.js":1856,"./chunk-Z4BLTVTB.js":1857},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-NINOM2XQ.js"),i=e("./chunk-DV5LNY3P.js"),s=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=i.BaseController,r.BaseControllerV1=n.BaseControllerV1,r.ControllerMessenger=s.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=i.getAnonymizedState,r.getPersistentState=i.getPersistentState}}},{package:"@metamask/user-operation-controller>@metamask/base-controller",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1859,{"./chunk-LGGBBU6G.js":1862},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-LGGBBU6G.js"),i={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-sepolia"]]:{chainId:n.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},s=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(s||{}),a={[n.ChainId.goerli]:"goerli",[n.ChainId.sepolia]:"sepolia",[n.ChainId.mainnet]:"mainnet",[n.ChainId["linea-goerli"]]:"linea-goerli",[n.ChainId["linea-sepolia"]]:"linea-sepolia",[n.ChainId["linea-mainnet"]]:"linea-mainnet",[n.ChainId.aurora]:"aurora"};r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},r.BUILT_IN_NETWORKS=i,r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v2",r.ORIGIN_METAMASK="metamask",r.ApprovalType=s,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=a}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-AEMFFAHN.js"}],[186,{"@metamask/utils":1886,lodash:3375,loglevel:3385},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=o,function(e){!function(e){if((0,i.isNullOrUndefined)(e.PreferencesController))return void a.default.warn(`Migration #${o}: preferences controller null or undefined, skipping migration`);if((0,i.hasProperty)(e,"AppStateController")&&(0,i.isObject)(e.AppStateController)&&(0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)){var t;const r=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,n=(0,i.isObject)(r)&&l(r);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=n,(null===e.PreferencesController.advancedGasFee||(0,i.isObject)(e.PreferencesController.advancedGasFee)&&l(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,i.isObject)(e.AppStateController)){var r,n;null===(r=global.sentry)||void 0===r||null===(n=r.captureException)||void 0===n||n.call(r,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,i.isObject)(e.PreferencesController)){var s,c;null===(s=global.sentry)||void 0===s||null===(c=s.captureException)||void 0===c||c.call(s,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},r.version=void 0;var n,i=e("@metamask/utils"),s=e("lodash"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};const o=r.version=92.3;function l(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[1860,{"./chunk-AEMFFAHN.js":1859,"@ethereumjs/util":394,"@metamask/ethjs-unit":1224,"@metamask/utils":1886,"bn.js":2474,buffer:2522,"eth-ens-namehash":2721,"fast-deep-equal":2837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./chunk-AEMFFAHN.js"),s=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),l=n(e("bn.js")),c=n(e("eth-ens-namehash")),u=n(e("fast-deep-equal")),d=new Error("timeout");function h(e){return e?new(0,l.default)(o.remove0x.call(void 0,e),16):new(0,l.default)(0)}async function p(e,t){const r=await fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${String(e)}'`);return r}async function f(e,t){const r=await p(e,t);return await r.json()}r.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=i.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},r.fractionBN=function(e,t,r){const n=new(0,l.default)(t),i=new(0,l.default)(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,l.default)(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return a.toWei.call(void 0,r,"gwei");if(n.length<=9)return a.toWei.call(void 0,`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=a.toWei.call(void 0,`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new(0,l.default)(1))),s},r.weiHexToGweiDec=function(e){const t=new(0,l.default)(o.remove0x.call(void 0,e),16);return a.fromWei.call(void 0,t,"gwei")},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},r.hexToBN=h,r.hexToText=function(e){try{const r=o.remove0x.call(void 0,e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return l.default.isBN(e)?e:new(0,l.default)(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${l.default.isBN(e)?e.toString(16):new(0,l.default)(e.toString(),10).toString(16)}`},r.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},r.safelyExecuteWithTimeout=async function(e,t=!1,r=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return void(t&&console.error(e))}},r.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?s.toChecksumAddress.call(void 0,t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,r)&&s.isValidAddress.call(void 0,r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=p,r.handleFetch=f,r.fetchWithErrorHandling=async function({url:e,options:t,timeout:r,errorCodesToCatch:n}){let i;try{i=r?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==d)throw e;console.error(e)}(e,n)}return i},r.timeoutFetch=async function(e,t,r=500){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])},r.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))},r.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return u.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-CQEHTNYT.js"}],[1861,{"@metamask/utils":1886},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("@metamask/utils"),i=n.createProjectLogger.call(void 0,"controller-utils");r.createModuleLogger=n.createModuleLogger,r.projectLogger=i}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[1862,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},i={...n,rpc:"rpc"};var s=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(s||{}),a={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});r.InfuraNetworkType=n,r.NetworkType=i,r.isNetworkType=function(e){return Object.values(i).includes(e)},r.isInfuraNetworkType=function(e){return Object.keys(n).includes(e)},r.BuiltInNetworkName=s,r.ChainId=a,r.NetworksTicker=o}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-LGGBBU6G.js"}],[1863,{"./chunk-DBJSLKNR.js":1861,"@metamask/utils":1886,"@spruceid/siwe-parser":2077,buffer:2522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-DBJSLKNR.js"),i=e("@metamask/utils"),s=e("@spruceid/siwe-parser"),a=n.createModuleLogger.call(void 0,n.projectLogger,"detect-siwe");function o(e){try{const n="string"!=typeof(r=e)?r:i.remove0x.call(void 0,r),s=t.from(n,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return a(t),e}var r}var l={"http:":"80","https:":"443"},c=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.parseDomainParts=c,r.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:r}=e;if(!t||!r?.parsedMessage?.domain)return!1;const n=new URL(t),i=c(r.parsedMessage.domain,n.protocol);return 0===i.hostname.localeCompare(n.hostname,void 0,{sensitivity:"accent"})&&(""!==i.port&&i.port!==n.port?""===n.port&&i.port===l[n.protocol]:""===i.username||i.username===n.username)}catch(e){return a(e),!1}},r.detectSIWE=e=>{try{const{data:t}=e,r=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,s.ParsedMessage)(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[1864,{"./chunk-AEMFFAHN.js":1859,"./chunk-CQEHTNYT.js":1860,"./chunk-DBJSLKNR.js":1861,"./chunk-LGGBBU6G.js":1862,"./chunk-M6G3ISXG.js":1863},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var i=e("./chunk-CQEHTNYT.js"),s=e("./chunk-AEMFFAHN.js"),a=e("./chunk-LGGBBU6G.js");r.ASSET_TYPES=s.ASSET_TYPES,r.ApprovalType=s.ApprovalType,r.BNToHex=i.BNToHex,r.BUILT_IN_NETWORKS=s.BUILT_IN_NETWORKS,r.BuiltInNetworkName=a.BuiltInNetworkName,r.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=s.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,r.ChainId=a.ChainId,r.ERC1155=s.ERC1155,r.ERC1155_INTERFACE_ID=s.ERC1155_INTERFACE_ID,r.ERC1155_METADATA_URI_INTERFACE_ID=s.ERC1155_METADATA_URI_INTERFACE_ID,r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=s.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,r.ERC20=s.ERC20,r.ERC721=s.ERC721,r.ERC721_ENUMERABLE_INTERFACE_ID=s.ERC721_ENUMERABLE_INTERFACE_ID,r.ERC721_INTERFACE_ID=s.ERC721_INTERFACE_ID,r.ERC721_METADATA_INTERFACE_ID=s.ERC721_METADATA_INTERFACE_ID,r.FALL_BACK_VS_CURRENCY=s.FALL_BACK_VS_CURRENCY,r.GANACHE_CHAIN_ID=s.GANACHE_CHAIN_ID,r.GWEI=s.GWEI,r.IPFS_DEFAULT_GATEWAY_URL=s.IPFS_DEFAULT_GATEWAY_URL,r.InfuraNetworkType=a.InfuraNetworkType,r.MAX_SAFE_CHAIN_ID=s.MAX_SAFE_CHAIN_ID,r.NetworkType=a.NetworkType,r.NetworksTicker=a.NetworksTicker,r.OPENSEA_PROXY_URL=s.OPENSEA_PROXY_URL,r.ORIGIN_METAMASK=s.ORIGIN_METAMASK,r.RPC=s.RPC,r.TESTNET_TICKER_SYMBOLS=s.TESTNET_TICKER_SYMBOLS,r.convertHexToDecimal=i.convertHexToDecimal,r.detectSIWE=n.detectSIWE,r.fetchWithErrorHandling=i.fetchWithErrorHandling,r.fractionBN=i.fractionBN,r.fromHex=i.fromHex,r.getBuyURL=i.getBuyURL,r.gweiDecToWEIBN=i.gweiDecToWEIBN,r.handleFetch=i.handleFetch,r.hexToBN=i.hexToBN,r.hexToText=i.hexToText,r.isInfuraNetworkType=a.isInfuraNetworkType,r.isNetworkType=a.isNetworkType,r.isNonEmptyArray=i.isNonEmptyArray,r.isPlainObject=i.isPlainObject,r.isSafeChainId=i.isSafeChainId,r.isSmartContractCode=i.isSmartContractCode,r.isValidHexAddress=i.isValidHexAddress,r.isValidJson=i.isValidJson,r.isValidSIWEOrigin=n.isValidSIWEOrigin,r.normalizeEnsName=i.normalizeEnsName,r.parseDomainParts=n.parseDomainParts,r.query=i.query,r.safelyExecute=i.safelyExecute,r.safelyExecuteWithTimeout=i.safelyExecuteWithTimeout,r.successfulFetch=i.successfulFetch,r.timeoutFetch=i.timeoutFetch,r.toChecksumHexAddress=i.toChecksumHexAddress,r.toHex=i.toHex,r.weiHexToGweiDec=i.weiHexToGweiDec}}},{package:"@metamask/user-operation-controller>@metamask/controller-utils",file:"node_modules/@metamask/user-operation-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[187,{"@metamask/utils":1886,lodash:3375,loglevel:3385},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,s.hasProperty)(e,"PhishingController")&&(0,s.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,s.hasProperty)(e,"PhishingController")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else a.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),a=(n=e("loglevel"))&&n.__esModule?n:{default:n};const o=r.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[188,{"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,r;if((0,i.isObject)(e.NetworkController)){if((0,i.isObject)(e.NetworkController)&&!(0,i.isObject)(e.NetworkController.providerConfig)){var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[1887,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var a=e.length,o=e.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===o;)n++,r++;for(var s=(e.length-r)*l+1>>>0,c=new Uint8Array(s);e[r];){var u=t[e.charCodeAt(r)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=a*c[h]>>>0,c[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,r++}if(" "!==e[r]){for(var p=s-i;p!==s&&0===c[p];)p++;for(var f=new Uint8Array(n+(s-p)),m=n;p!==s;)f[m++]=c[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var l=(s-i)*c+1>>>0,u=new Uint8Array(l);i!==s;){for(var d=t[i],h=0,p=l-1;(0!==d||h<n)&&-1!==p;p--,h++)d+=256*u[p]>>>0,u[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var f=l-n;f!==l&&0===u[f];)f++;for(var m=o.repeat(r);f<l;++f)m+=e.charAt(u[f]);return m},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}}}},{package:"@ensdomains/content-hash>cids>multibase>@multiformats/base-x",file:"node_modules/@multiformats/base-x/src/index.js"}],[189,{"@metamask/controller-utils":1071,"@metamask/network-controller":1378,"@metamask/utils":1886,lodash:3375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)&&((0,i.hasProperty)(e.NetworkController.providerConfig,"id")||(0,i.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==a.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const r={[t]:{EIPS:{},status:s.NetworkStatus.Unknown}};if((0,i.hasProperty)(e.NetworkController,"networkDetails")&&(0,i.isObject)(e.NetworkController.networkDetails)){const{networkDetails:n}=e.NetworkController;n.EIPS&&(0,i.isObject)(n.EIPS)&&(r[t].EIPS={...n.EIPS}),delete e.NetworkController.networkDetails}return(0,i.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(r[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:r,selectedNetworkClientId:t}}}var t,r;if((0,i.isObject)(e.NetworkController)){if((0,i.isObject)(e.NetworkController)&&!(0,i.isObject)(e.NetworkController.providerConfig)){var n,o;null===(n=global.sentry)||void 0===n||null===(o=n.captureException)||void 0===o||o.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,i.isObject)(e.NetworkController)&&(0,i.isObject)(e.NetworkController.providerConfig)){var l,c;null===(l=global.sentry)||void 0===l||null===(c=l.captureException)||void 0===c||c.call(l,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils"),s=e("@metamask/network-controller"),a=e("@metamask/controller-utils");const o=r.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[19,{"../../../../shared/constants/permissions":4036,reselect:3786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermittedAccountsByOrigin=r.getChangedAccounts=void 0;var n=e("reselect"),i=e("../../../../shared/constants/permissions");r.getPermittedAccountsByOrigin=(0,n.createSelector)((e=>e.subjects),(e=>Object.values(e).reduce(((e,t)=>{var r;const n=((null===(r=t.permissions)||void 0===r||null===(r=r.eth_accounts)||void 0===r?void 0:r.caveats)||[]).find((({type:e})=>e===i.CaveatTypes.restrictReturnedAccounts));return n&&e.set(t.origin,n.value),e}),new Map)));r.getChangedAccounts=(e,t)=>{if(t===undefined)return e;const r=new Map;if(e===t)return r;const n=new Set([...e.keys()]);for(const i of t.keys()){const s=e.get(i)??[];t.get(i)!==s&&r.set(i,s),n.delete(i)}for(const t of n.keys())r.set(t,e.get(t));return r}}}},{package:"$root$",file:"app/scripts/controllers/permissions/selectors.js"}]],[],{});